// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See http://@sbaseurl@/jsapi/jsapi/esri/copyright.txt and http://www.arcgis.com/apps/webappbuilder/copyright.txt for details.
//>>built
require({cache:{"widgets/Stream/setting/utils":function(){define(["dojo/_base/array"],function(q){return{getStreamLayers:function(f){var n=[],r;q.forEach(f.graphicsLayerIds,function(m){r=f.getLayer(m);"esri.layers.StreamLayer"===r.declaredClass&&n.push(r)});n.reverse();return n},getStreamLayerName:function(f){f=/\/([^\/]+)\/StreamServer/.exec(f);return 1<f.length?f[1]:""}}})},"widgets/Stream/setting/StreamSetting":function(){define("dojo/_base/declare dojo/_base/lang dojo/on dijit/_WidgetBase dijit/_TemplatedMixin dijit/_WidgetsInTemplateMixin dojo/text!./StreamSetting.html dojo/dom-class dojo/dom-style dojo/Evented esri/symbols/jsonUtils jimu/dijit/CheckBox jimu/dijit/SymbolPicker ./FilterConfigPopup ../FilterUtil jimu/dijit/LoadingShelter".split(" "),
function(q,f,n,r,m,e,c,l,b,h,g,a,k,d,p){return q([r,m,e,h],{baseClass:"jimu-widget-stream-setting",templateString:c,map:null,nls:null,layerName:null,streamLayer:null,_filterList:[],_started:!1,postCreate:function(){this.inherited(arguments);var d=null;this._filterList=[];this.startStopCheckBox=new a({checked:!0,label:this.nls.startStopStream});this.startStopCheckBox.placeAt(this.startStopCheckBoxDiv);this.clearPreviousCheckBox=new a({checked:!0,label:this.nls.clearStream});this.clearPreviousCheckBox.placeAt(this.clearPreviousCheckBoxDiv);
this.drawPreviousCheckBox=new a({checked:!1,label:this.nls.drawPrevious});this.drawPreviousCheckBox.placeAt(this.drawPreviousCheckBoxDiv);this.streamLayer&&(1===this.streamLayer.maximumTrackPoints?this.drawPreviousCheckBox.setStatus(!1):1<this.streamLayer.maximumTrackPoints&&this.drawPreviousCheckBox.setValue(!0));this.spatialFilterCheckBox=new a({checked:!0,label:this.nls.spatialFilter,onChange:f.hitch(this,this._spatialStatusChange)});this.spatialFilterCheckBox.placeAt(this.spatialFilterCheckBoxDiv);
this.mapExtentCheckBox=new a({checked:!1,label:this.nls.limitMapExtent});this.mapExtentCheckBox.placeAt(this.mapExtentCheckBoxDiv);this.drawExtentCheckBox=new a({checked:!1,label:this.nls.limitDrawExtent,onChange:f.hitch(this,function(a){a?b.set(this.symbolPickerNode,"display","inline"):b.set(this.symbolPickerNode,"display","none")})});b.set(this.drawExtentCheckBox.domNode,"vertical-align","top");this.drawExtentCheckBox.placeAt(this.drawExtentCheckBoxDiv);this.config&&this.config.drawSymbol&&(d=g.fromJson(this.config.drawSymbol));
this.symbolPicker=new k({symbol:d,type:"fill"});b.set(this.symbolPicker.domNode,"margin-top","-16px");b.set(this.symbolPicker.domNode,"margin-left","-20px");this.symbolPicker.placeAt(this.symbolPickerNode);this.symbolPicker.startup();this.filterCheckBox=new a({checked:!1,label:this.nls.attributeFilter,onChange:f.hitch(this,this._filterStatusChange)});this.filterCheckBox.placeAt(this.filterCheckBoxDiv);this.config?this.setConfig(this.config):this.streamLayer&&this.streamLayer.getDefinitionExpression()&&
(this.shelter.show(),p.buildFilterInfoFromString(this.streamLayer,this.streamLayer.getDefinitionExpression(),this.nls.newFilter).then(f.hitch(this,function(a){null!==a&&(this._filterList.push(a),this.filterCheckBox.setValue(!0),this.filterCheckBox.setStatus(!1));this.shelter.hide()})))},setConfig:function(a){this.config=a;this.layerName=this.config.layerName;this._filterList=this.config.filterList;this.startStopCheckBox.setValue(this.config.startStop);this.clearPreviousCheckBox.setValue(this.config.clear);
this.drawPreviousCheckBox.setValue(this.config.drawPrevious);this.spatialFilterCheckBox.setValue(this.config.spatialFilter);this.mapExtentCheckBox.setValue(!!this.config.mapExtentFilter);this.drawExtentCheckBox.setValue(!!this.config.drawExtentFilter);this.config.drawExtentFilter?b.set(this.symbolPickerNode,"display","inline"):b.set(this.symbolPickerNode,"display","none");this.filterCheckBox.setValue(this.config.attrFilter)},getConfig:function(){var a={layerId:this.streamLayer.id,layerName:this.layerName||
"",startStop:this.startStopCheckBox.getValue(),clear:this.clearPreviousCheckBox.getValue(),drawPrevious:this.drawPreviousCheckBox.getValue(),spatialFilter:this.spatialFilterCheckBox.getValue(),mapExtentFilter:this.mapExtentCheckBox.getValue(),drawExtentFilter:this.drawExtentCheckBox.getValue(),attrFilter:this.filterCheckBox.getValue(),filterList:this._filterList};!a.mapExtentFilter&&!a.drawExtentFilter&&(a.spatialFilter=!1);a.drawExtentFilter&&(a.drawSymbol=this.symbolPicker.getSymbol().toJson());
return a},_filterStatusChange:function(a){a?l.remove(this.filterIcon,"disabled"):l.add(this.filterIcon,"disabled")},_spatialStatusChange:function(a){a?b.set(this.spatialChoices,"display","block"):b.set(this.spatialChoices,"display","none")},_showFilter:function(){if(this.filterCheckBox.getValue()){var a;a=new d({titleLabel:this.nls.configFilter,filterList:this._filterList,streamLayer:this.streamLayer,nls:this.nls});this.own(n(a,"ok",f.hitch(this,function(d){this._filterList=d;a.close()})));this.own(n(a,
"cancel",f.hitch(this,function(){a.close()})));a.startup()}}})})},"jimu/dijit/SymbolPicker":function(){define("dojo/_base/declare dijit/_WidgetBase dijit/_TemplatedMixin dojo/Evented dojo/_base/lang dojo/_base/html dojo/_base/array dojo/on dojo/query dijit/TooltipDialog dijit/popup dijit/registry jimu/dijit/SymbolChooser jimu/symbolUtils".split(" "),function(q,f,n,r,m,e,c,l,b,h,g,a,k,d){return q([f,n,r],{baseClass:"jimu-symbol-picker",declaredClass:"jimu.dijit.SymbolPicker",templateString:'\x3cdiv\x3e\x3cdiv data-dojo-attach-point\x3d"symbolNode" class\x3d"symbol-node jimu-float-leading"\x3e\x3c/div\x3e\x3cdiv class\x3d"separator jimu-float-leading"\x3e\x3c/div\x3e\x3cdiv class\x3d"jimu-icon jimu-icon-down-arrow-8 jimu-float-leading"\x3e\x3c/div\x3e\x3c/div\x3e',
tooltipDialog:null,_isTooltipDialogOpened:!1,symbol:null,type:null,postCreate:function(){this.inherited(arguments);this._createTooltipDialog();this._hideTooltipDialog();var a=this.symbolChooser.getSymbol();a&&this._drawSymbol(a)},destroy:function(){this._hideTooltipDialog();this.symbolChooser&&this.symbolChooser.destroy();this.symbolChooser=null;this.inherited(arguments)},_createTooltipDialog:function(){var a=e.create("div");this.tooltipDialog=new h({content:a});this.symbolChooser=new k({symbol:this.symbol,
type:this.type});this.symbolChooser.placeAt(a);this.symbolChooser.startup();this.own(l(this.symbolChooser,"change",m.hitch(this,function(a){this._drawSymbol(a);this.emit("change",a)})));this.own(l(this.domNode,"click",m.hitch(this,function(a){a.stopPropagation();a.preventDefault();this._isTooltipDialogOpened?this._hideTooltipDialog():this._showTooltipDialog()})));this.own(l(document.body,"click",m.hitch(this,function(a){var d=a.target||a.srcElement;a=this._getColorPickers();0<a.length&&c.some(a,function(a){return a.isPartOfPopup(d)})||
(a=this.tooltipDialog.domNode,d===a||e.isDescendant(d,a)||this._hideTooltipDialog())})));this.own(l(this.symbolChooser,"resize",m.hitch(this,function(){this._isTooltipDialogOpened&&(this._hideTooltipDialog(),this._showTooltipDialog())})))},_getColorPickers:function(){var d=b(".jimu-color-picker",this.symbolChooser.domNode);return c.map(d,m.hitch(this,function(d){return a.byNode(d)}))},reset:function(){this.symbol=this.type=null;e.empty(this.symbolNode);this.symbolChooser.reset()},showBySymbol:function(a){this.reset();
a&&(this._drawSymbol(a),this.symbolChooser.showBySymbol(a))},showByType:function(a){this.reset();this.symbolChooser.showByType(a);(a=this.symbolChooser.getSymbol())&&this._drawSymbol(a)},getSymbol:function(){return this.symbolChooser.getSymbol()},_drawSymbol:function(a){e.empty(this.symbolNode);a&&(a=d.createSymbolNode(a,{width:16,height:16}))&&e.place(a,this.symbolNode)},_showTooltipDialog:function(){this.tooltipDialog&&(g.open({parent:this.getParent(),popup:this.tooltipDialog,around:this.domNode}),
this._isTooltipDialogOpened=!0)},_hideTooltipDialog:function(){this.tooltipDialog&&(g.close(this.tooltipDialog),this._isTooltipDialogOpened=!1)}})})},"widgets/Stream/setting/FilterConfigPopup":function(){define("dojo/_base/declare dojo/Evented dojo/_base/lang dojo/_base/html jimu/dijit/Popup jimu/dijit/LoadingIndicator ./FilterConfig".split(" "),function(q,f,n,r,m,e,c){return q([m,f],{width:1024,height:600,titleLabel:"",filterList:null,streamLayer:null,nls:null,constructor:function(){this.inherited(arguments);
this.nls=n.clone(window.jimuNls.common);this.buttons=[{label:this.nls.ok,onClick:n.hitch(this,this._accept)},{label:this.nls.cancel,onClick:n.hitch(this,this._reject)}]},postCreate:function(){this.inherited(arguments);r.addClass(this.domNode,"stream-filter-popup");this._initLoading();this._initFilter()},_initFilter:function(){this.filter=new c({streamLayer:this.streamLayer,config:this.filterList,nls:this.nls});this.filter.placeAt(this.contentContainerNode)},_reject:function(){this.emit("cancel")},
_accept:function(){var c=this.filter.getConfig();c?this.emit("ok",c):this.emit(null)},_initLoading:function(){this.loading=new e({hidden:!0});this.loading.placeAt(this.domNode);this.loading.startup()}})})},"widgets/Stream/setting/FilterConfig":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/on dojo/dom-style dojo/dom-class dijit/_WidgetBase dijit/_TemplatedMixin dijit/_WidgetsInTemplateMixin dojo/text!./FilterConfig.html ./SingleFilter jimu/dijit/Message jimu/dijit/SimpleTable jimu/dijit/LoadingShelter".split(" "),
function(q,f,n,r,m,e,c,l,b,h,g,a,k){return q([c,l,b],{baseClass:"jimu-widget-stream-filter",templateString:h,streamLayer:null,config:null,postCreate:function(){this.inherited(arguments);this.filterList=new k({autoHeight:!1,selectable:!0,fields:[{name:"name",title:this.nls.name,width:"auto",type:"text",editable:!1},{name:"actions",title:"",width:"70px",type:"actions",actions:["up","down","delete"]}]},this.filterList);e.add(this.filterList.domNode,"stream-filter-table");m.set(this.filterList.domNode,
"height","100%");this.own(r(this.filterList,"row-select",f.hitch(this,this._onFilterSelected)));this.own(r(this.filterList,"row-delete",f.hitch(this,this._onFilterRemoved)));this.filterList.startup();this.config&&0<this.config.length&&this._applyConfig()},_applyConfig:function(){this.filterList.clear();n.forEach(this.config,f.hitch(this,function(a,b){var k=this.filterList.addRow({name:a.name||this.nls.newFilter}).tr;this._createFilter(k,a);0===b&&this.filterList.selectRow(k)}))},getConfig:function(){var a,
b=[];n.forEach(this.filterList.getRows(),function(k){a=k.filter;b.push(a.getConfig())});return b},_addFilter:function(){var d;d=this.filterList.addRow({name:this.nls.newFilter});d.success?(d=d.tr,this._createFilter(d,{name:this.nls.newFilter}),this.filterList.selectRow(d)):new a({message:this.nls.addFilterFailed})},_onFilterSelected:function(a){var b;this.currentTR?this.currentTR!==a&&((b=this.currentTR.filter)&&m.set(b.domNode,"display","none"),this.currentTR=a,(b=this.currentTR.filter)&&m.set(b.domNode,
"display","block")):(this.currentTR=a,(b=this.currentTR.filter)&&m.set(b.domNode,"display","block"))},_onFilterRemoved:function(a){var b=a.filter;b&&(b.destroy(),a.filter=null)},_createFilter:function(a,b){var k=new g({config:b,streamLayer:this.streamLayer,nls:this.nls});k.placeAt(this.singleFilterContainer);a.filter=k;this.own(r(k,"filterNameChanged",f.hitch(this,function(b){this.filterList.editRow(a,{name:b})})));m.set(k.domNode,"display","none")}})})},"widgets/Stream/setting/SingleFilter":function(){define("dojo/_base/declare dojo/_base/lang dojo/json dojo/on dojo/Evented dojo/dom-style dijit/_WidgetBase dijit/_TemplatedMixin dijit/_WidgetsInTemplateMixin dojo/text!./SingleFilter.html jimu/dijit/Filter jimu/dijit/SimpleTable jimu/dijit/LoadingShelter dijit/form/ValidationTextBox".split(" "),
function(q,f,n,r,m,e,c,l,b,h,g){return q([c,l,b,m],{baseClass:"jimu-widget-stream-filter",templateString:h,streamLayer:null,config:null,_inherited:null,_definitionExpression:null,postCreate:function(){this.inherited(arguments);this._inherited=!1;this._definitionExpression="";this._init()},_init:function(){var a;this.filterNameEditor.set("value",this.config.name||this.nls.newFilter);"inherited"in this.config&&(this._inherited=this.config.inherited);"definitionExpression"in this.config&&(this._definitionExpression=
this.config.definitionExpression);this.own(r(this.filterNameEditor,"change",f.hitch(this,function(a){this.emit("filterNameChanged",a)})));this.filter=new g({enableAskForValues:!0,noFilterTip:this.nls.noFilterTip,style:"width:100%;margin-top:22px;"});this.filter.placeAt(this.singleFilterContent);this._inherited?(e.set(this.filterMask,"display","block"),e.set(this.filterMaskTip,"display","block")):(e.set(this.filterMask,"display","none"),e.set(this.filterMaskTip,"display","none"));this.streamLayer&&
this.config&&(this.shelter.show(),a=n.parse(this.streamLayer._json),"object"===typeof this.config&&"object"===typeof this.config.filterInfo?this.filter.buildByFilterObj(this.streamLayer.url,this.config.filterInfo,a).then(f.hitch(this,function(){this.shelter.hide()})):this.filter.buildByExpr(this.streamLayer.url,"1\x3d1",a).then(f.hitch(this,function(){this.shelter.hide()})))},getConfig:function(){return{inherited:this._inherited,definitionExpression:this._definitionExpression,name:this.filterNameEditor.get("value"),
filterInfo:this.filter.toJson()}}})})},"jimu/dijit/Filter":function(){define("dojo/Evented dojo/_base/declare dijit/_WidgetBase dijit/_TemplatedMixin dijit/_WidgetsInTemplateMixin dojo/text!./templates/Filter.html jimu/filterUtils jimu/utils dijit/registry dojo/_base/lang dojo/_base/html dojo/_base/array dojo/aspect dojo/query dojo/Deferred esri/request ./_SingleFilter ./_FilterSet ./LoadingIndicator".split(" "),function(q,f,n,r,m,e,c,l,b,h,g,a,k,d,p,t,s,u){return f([n,r,m,c,q],{templateString:e,
baseClass:"jimu-filter",declaredClass:"jimu.dijit.Filter",nls:null,_validOptions:!1,_layerDefinition:null,_def:null,noFilterTip:"",enableAskForValues:!1,postMixInProperties:function(){this.nls=window.jimuNls.filterBuilder;var a=this.nls.matchMsg.split("${any_or_all}");this.nls.strMatchMsgPart1=a[0]||"";this.nls.strMatchMsgPart2=a[1]||"";this.inherited(arguments)},postCreate:function(){this.inherited(arguments);this.noFilterTip&&"string"===typeof this.noFilterTip&&(this.noFilterTipSection.innerHTML=
this.noFilterTip)},reset:function(){this.isBuilding()||(this.removeAllFilters(),this.url=null,this.isHosted=!1,this.partsObj=this.expr=this._layerDefinition=null)},isBuilding:function(){return this._def&&!this._def.isFulfilled()},buildByExpr:function(a,d,b){var k=new p;this.isBuilding()?k.reject("Filter is already building."):(this._def=null,this.reset(),this.url=a,this.isHosted=l.isHostedService(this.url),this.expr=d||"1\x3d1",this._layerDefinition=b,k=this._def=this._init("expr"));return k},buildByFilterObj:function(a,
d,b){var k=new p;this.isBuilding()?k.reject("Filter is already building."):(this._def=null,this.reset(),this.url=a,this.isHosted=l.isHostedService(this.url),this.partsObj=d,this._layerDefinition=b,k=this._def=this._init("partsObj"));return k},removeAllFilters:function(){this._destroyAllFilters()},_validateLayerDefinition:function(a){return this._isObject(a)},_init:function(d){var b=new p;if(!this._isString(this.url))return b.reject(),b;var k=h.hitch(this,function(){setTimeout(h.hitch(this,function(){b.resolve()}),
1500)}),s=h.hitch(this,function(){g.setStyle(this.contentSection,"display","block");g.setStyle(this.errorSection,"display","none");this.removeAllFilters();var s=this._layerDefinition.fields;s&&0<s.length?(s=a.filter(s,h.hitch(this,function(a){return 0<=this._supportFieldTypes.indexOf(a.type)})))&&0<s.length?(this._validOptions=!0,g.removeClass(this.btnAddSet,"jimu-state-disabled"),g.removeClass(this.btnAddExp,"jimu-state-disabled"),g.removeClass(this.iconAddExp,"jimu-state-disabled"),g.removeClass(this.iconAddSet,
"jimu-state-disabled"),this.createFieldsStore(),"expr"===d?this._isString(this.expr)?("1\x3d1"===this.expr.replace(/\s/gi,"")&&this.removeAllFilters(),this._parseExpr(this.expr)?k():b.reject()):b.reject():"partsObj"===d?this._validatePartsObj(this.partsObj)?(this._parsePartsObj(this.partsObj),k()):b.reject():this._validatePartsObj(this.partsObj)?(this._parsePartsObj(this.partsObj),k()):this._isString(this.expr)?this._parseExpr(this.expr)?k():b.reject():(this.removeAllFilters(),k())):(this._showErrorOptions(this.nls.error.noFilterFields),
b.reject()):b.reject()});this._validateLayerDefinition(this._layerDefinition)?s():(this.loading.show(),t({url:this.url,content:{f:"json"},handleAs:"json",callbackParamName:"callback"}).then(h.hitch(this,function(a){this.domNode?(this.loading.hide(),this._layerDefinition=a,s()):b.reject()}),h.hitch(this,function(a){console.error(a);b.reject();this.domNode&&this.loading.hide()})));return b},toJson:function(){var b={logicalOperator:this.allAnySelect.value,parts:[]},d=this._getAllSingleFiltersAndFilterSets();
if(0===d.length)return b.expr="1\x3d1",b;a.forEach(d,h.hitch(this,function(a){a=a.toJson();b.parts.push(a)}));return a.every(b.parts,h.hitch(this,function(a){return!!a}))&&0<b.parts.length?(b.expr=this.getExprByFilterObj(b),b):null},createFieldsStore:function(){if(!this._layerDefinition.fields||0===this._layerDefinition.fields.length)this._showErrorOptions(this.nls.error.noFilterFields);else{var a=h.clone(this._layerDefinition).fields;0===this.setFieldsStoreByFieldInfos(a)&&this._showErrorOptions(this.nls.error.noFilterFields)}},
_parsePartsObj:function(a){this._validatePartsObj(a)&&(this.removeAllFilters(),this._buildEditUIByPartsObj(a))},_parseExpr:function(a){this._destroyAllFilters();var b=null;if(!this._validateLayerDefinition(this._layerDefinition))return b;if(!a||"string"!==typeof a)return this._showErrorOptions(this.nls.error.invalidSQL),b;if("1\x3d1"===this.expr.replace(/\s/gi,""))return b={expr:"1\x3d1",parts:[],logicalOperator:"AND"};try{b=this.getFilterObjByExpr(a)}catch(d){b=null,console.error(d)}b?this._buildEditUIByPartsObj(b):
this._showErrorOptions(this.nls.error.cantParseSQL);return b},_buildEditUIByPartsObj:function(b){b&&(this._destroyAllFilters(),this.allAnySelect.value=b.logicalOperator,a.forEach(b.parts,h.hitch(this,function(a){a.parts?this._addFilterSet(a):a.fieldObj&&(a.operator&&a.valueObj)&&this._addSingleFilter(a)})))},_addSingleFilter:function(a){a={url:this.url,layerInfo:this._layerDefinition,stringFieldType:this._stringFieldType,dateFieldType:this._dateFieldType,numberFieldTypes:this._numberFieldTypes,part:a,
OPERATORS:h.mixin({},this.OPERATORS),enableAskForValues:this.enableAskForValues,isHosted:this.isHosted};a=new s(a);a.placeAt(this.allExpsBox);a.startup();this.own(k.after(a,"_destroySelf",h.hitch(this,this._checkFilterNumbers)));this._checkFilterNumbers()},_addFilterSet:function(a){a={url:this.url,layerInfo:this._layerDefinition,stringFieldType:this._stringFieldType,dateFieldType:this._dateFieldType,numberFieldTypes:this._numberFieldTypes,partsObj:a,OPERATORS:h.mixin({},this.OPERATORS),enableAskForValues:this.enableAskForValues,
isHosted:this.isHosted};a=new u(a);a.placeAt(this.allExpsBox);a.startup();this.own(k.after(a,"_destroySelf",h.hitch(this,this._checkFilterNumbers)));this._checkFilterNumbers()},_destroyAllFilters:function(){for(var a=this._getAllSingleFiltersAndFilterSets();0<a.length;)a[0].destroy(),a.splice(0,1);this._checkFilterNumbers()},_getAllSingleFiltersAndFilterSetsDoms:function(){return d(".allExpsBox\x3e.jimu-single-filter,.allExpsBox\x3e.jimu-filter-set",this.contentSection)},_getAllSingleFiltersAndFilterSets:function(){var d=
this._getAllSingleFiltersAndFilterSetsDoms();return a.map(d,h.hitch(this,function(a){return b.byNode(a)}))},_checkFilterNumbers:function(){var b=this._getAllSingleFiltersAndFilterSetsDoms();1<b.length?g.setStyle(this.matchMsg,"display","block"):g.setStyle(this.matchMsg,"display","none");0<b.length?g.setStyle(this.noFilterTipSection,"display","none"):g.setStyle(this.noFilterTipSection,"display","block");a.forEach(b,h.hitch(this,function(a,b){g.removeClass(a,"even-filter");g.removeClass(a,"odd-filter");
g.addClass(a,0===(b+1)%2?"even-filter":"odd-filter")}));this.emit("filter-number-change")},_showErrorOptions:function(a){console.error(a);g.setStyle(this.errorSection,"display","none");this.errorTip.innerHTML=a;this.loading.hide()},_onBtnAddSetClick:function(){this._layerDefinition&&this._validOptions&&this._addFilterSet()},_onBtnAddExpClick:function(){this._layerDefinition&&this._validOptions&&this._addSingleFilter()}})})},"jimu/dijit/_SingleFilter":function(){define("dojo/_base/declare dijit/_WidgetBase dijit/_TemplatedMixin dijit/_WidgetsInTemplateMixin dojo/text!./templates/_SingleFilter.html dojo/_base/lang dojo/_base/html dojo/_base/array dojo/on dojo/store/Memory jimu/utils jimu/dijit/CheckBox dijit/form/Select dijit/form/FilteringSelect dijit/form/ValidationTextBox dijit/form/DateTextBox dijit/form/NumberTextBox".split(" "),
function(q,f,n,r,m,e,c,l,b,h,g){return q([f,n,r],{templateString:m,baseClass:"jimu-single-filter",declaredClass:"jimu.dijit._SingleFilter",nls:null,url:null,layerInfo:null,stringFieldType:"",dateFieldType:"",numberFieldTypes:[],supportFieldTypes:[],part:null,OPERATORS:null,enableAskForValues:!1,isHosted:!1,postMixInProperties:function(){this.supportFieldTypes=[];this.supportFieldTypes.push(this.stringFieldType);this.supportFieldTypes.push(this.dateFieldType);this.supportFieldTypes=this.supportFieldTypes.concat(this.numberFieldTypes);
this.nls=window.jimuNls.filterBuilder;this.nls.caseSensitive||(this.nls.caseSensitive="Case Sensitive")},postCreate:function(){this.inherited(arguments);this._initSelf()},toJson:function(){var a=null,b=this._isUseAskForValues(),d=this._getSelectedFilteringItem(this.fieldsSelect);if(!d)return null;a={fieldObj:"",operator:"",valueObj:"",interactiveObj:"",caseSensitive:!1};if(b){if(!this.promptTB.validate())return this._showValidationErrorTip(this.promptTB),null;a.interactiveObj={prompt:this.promptTB.get("value"),
hint:this.hintTB.get("value"),cascade:!1};this.uniqueRadio&&(this.uniqueRadio.checked&&this.cbxCascade.getValue())&&(a.interactiveObj.cascade=!0)}a.fieldObj={name:d.name,label:d.name,shortType:d.shortType,type:d.type};if("none"===this.operatorsSelect.get("value"))return null;a.operator=this.operatorsSelect.get("value");a.valueObj={isValid:!0,type:""};var c=d.shortType;if(this.valueRadio.checked)if(a.valueObj.type="value","string"===c)if(a.operator===this.OPERATORS.stringOperatorIsBlank||a.operator===
this.OPERATORS.stringOperatorIsNotBlank)a.valueObj.value=null;else if(this._isFieldCoded(d)&&a.operator===this.OPERATORS.stringOperatorIs){if(!this.stringCodedValuesFS.validate())return this._showValidationErrorTip(this.stringCodedValuesFS),null;b=this._getSelectedFilteringItem(this.stringCodedValuesFS);a.valueObj.value=b?b.code:""}else{if(!this.stringTextBox.validate())return this._showValidationErrorTip(this.stringTextBox),null;a.valueObj.value=this.stringTextBox.get("value")}else if("number"===
c)if(a.operator===this.OPERATORS.numberOperatorIsBlank||a.operator===this.OPERATORS.numberOperatorIsNotBlank)a.valueObj.value=null;else if(a.operator===this.OPERATORS.numberOperatorIsBetween||a.operator===this.OPERATORS.numberOperatorIsNotBetween){if(!this.numberTextBox1.validate())return this._showValidationErrorTip(this.numberTextBox1),null;if(!this.numberTextBox2.validate())return this._showValidationErrorTip(this.numberTextBox2),null;a.valueObj.value1=this._getValueForNumberTextBox(this.numberTextBox1);
a.valueObj.value2=this._getValueForNumberTextBox(this.numberTextBox2);a.valueObj.isValid=g.isValidNumber(a.valueObj.value1)&&g.isValidNumber(a.valueObj.value2)}else{if(this._isFieldCoded(d)&&a.operator===this.OPERATORS.numberOperatorIs){if(!this.numberCodedValuesFS.validate())return this._showValidationErrorTip(this.numberCodedValuesFS),null;b=this._getSelectedFilteringItem(this.numberCodedValuesFS);a.valueObj.value=b?parseFloat(b.code):null}else{if(!this.numberTextBox.validate())return this._showValidationErrorTip(this.numberTextBox),
null;a.valueObj.value=this._getValueForNumberTextBox(this.numberTextBox)}a.valueObj.isValid=g.isValidNumber(a.valueObj.value)}else{if("date"===c)if(a.operator===this.OPERATORS.dateOperatorIsBlank||a.operator===this.OPERATORS.dateOperatorIsNotBlank)a.valueObj.value=null;else if(a.operator===this.OPERATORS.dateOperatorIsBetween||a.operator===this.OPERATORS.dateOperatorIsNotBetween){if(!this.dateTextBox1.validate())return this._showValidationErrorTip(this.dateTextBox1),null;if(!this.dateTextBox2.validate())return this._showValidationErrorTip(this.dateTextBox2),
null;a.valueObj.value1=this.dateTextBox1.get("value").toDateString();a.valueObj.value2=this.dateTextBox2.get("value").toDateString()}else{if(!this.dateTextBox.validate())return this._showValidationErrorTip(this.dateTextBox),null;a.valueObj.value=this.dateTextBox.get("value").toDateString()}}else if(this.fieldRadio.checked){b=this._getSelectedFilteringItem(this.fieldsSelect2);if(!b)return this._showValidationErrorTip(this.fieldsSelect2),null;a.valueObj.value=b.name;a.valueObj.label=b.name;a.valueObj.type=
"field"}else if(this.uniqueRadio&&this.uniqueRadio.checked)if(a.valueObj.type="unique",d=this._getSelectedFilteringItem(this.uniqueValuesSelect))"string"===c?a.valueObj.value=d.value:"number"===c&&(a.valueObj.value=parseFloat(d.value));else if(b)"string"===c?a.valueObj.value="":"number"===c&&(a.valueObj.value=null,a.valueObj.isValid=!1);else return this._showValidationErrorTip(this.uniqueValuesSelect),null;if("string"===c)switch(a.operator){case this.OPERATORS.stringOperatorStartsWith:case this.OPERATORS.stringOperatorEndsWith:case this.OPERATORS.stringOperatorContains:case this.OPERATORS.stringOperatorDoesNotContain:a.caseSensitive=
this.cbxCaseSensitive.getValue()}return a},showDelteIcon:function(){c.setStyle(this.btnDelete,"display","inline-block")},hideDeleteIcon:function(){c.setStyle(this.btnDelete,"display","none")},_showCaseSensitive:function(){c.setStyle(this.cbxCaseSensitive.domNode,"display","inline-block")},_hideCaseSensitive:function(){c.setStyle(this.cbxCaseSensitive.domNode,"display","none")},_getProcessedString:function(a){return g.isNotEmptyString(a,!0)?a:""},_getProcessedNumber:function(a){return g.isValidNumber(a)?
a:null},_setValueForStringTextBox:function(a,b){b=this._getProcessedString(b);a.set("value",b)},_setValueForNumberTextBox:function(a,b){g.isValidNumber(b)&&a.set("value",b)},_getValueForNumberTextBox:function(a){a=a.get("value");return this._getProcessedNumber(a)},_initSelf:function(){this.isHosted&&(this.cbxCaseSensitive.setValue(!1),this.cbxCaseSensitive.setStatus(!1),this.cbxCaseSensitive.domNode.title=this.nls.notSupportCaseSensitiveTip);this.own(b(this.cbxAskValues,"status-change",e.hitch(this,
this._onCbxAskValuesStatusChanged)));this.cbxAskValues.onChange=e.hitch(this,this._onCbxAskValuesClicked);this.own(b(this.fieldsSelect,"MouseEnter",e.hitch(this,this._updateFieldsSelectTitle)));this.own(b(this.operatorsSelect,"MouseEnter",e.hitch(this,this._updateOperatorsSelectTitle)));this.own(b(this.dateTextBox1,"MouseEnter",e.hitch(this,this._updateDateTextBox1Title)));this.own(b(this.dateTextBox2,"MouseEnter",e.hitch(this,this._updateDateTextBox2Title)));var a=new h({idProperty:"id",data:[]});
this.uniqueValuesSelect.set("store",a);this.enableAskForValues?(c.setStyle(this.cbxAskValues.domNode,"display","inline-block"),c.setStyle(this.promptSection,"display","block")):(c.setStyle(this.cbxAskValues.domNode,"display","none"),c.setStyle(this.promptSection,"display","none"));this.layerInfo=e.mixin({},this.layerInfo);this._initRadios();this.layerInfo.currentVersion&&parseFloat(this.layerInfo.currentVersion);this._isServiceSupportDistinctValues(this.url,this.layerInfo)||(c.destroy(this.uniqueTd),
this.uniqueRadio=null);if((a=this.layerInfo.fields)&&0<a.length)a=l.filter(a,e.hitch(this,function(a){return 0<=this.supportFieldTypes.indexOf(a.type)})),this._enableRadios(),this._initFieldsSelect(a);this.cbxCascade.setLabel(window.jimuNls.filterBuilder.cascadeFilterTip);c.addClass(this.cbxCascade.domNode,"cascade-checkbox")},_isServiceSupportDistinctValues:function(a,b){return this._isStreamServer(a)?!1:10.1<=parseFloat(b.currentVersion)},_isStreamServer:function(a){a=(a||"").replace(/\/*$/g,"");
return/\/StreamServer$/gi.test(a)},_isImageServer:function(a){a=(a||"").replace(/\/*$/g,"");return/\/ImageServer$/gi.test(a)},_updateFieldsSelectTitle:function(){this.fieldsSelect.domNode.title="";var a=this._getSelectedFilteringItem(this.fieldsSelect);a&&(this.fieldsSelect.domNode.title=a.displayName||a.alias||a.name)},_updateOperatorsSelectTitle:function(){this.operatorsSelect.domNode.title="";var a=this.operatorsSelect.get("value");a&&(a=this.operatorsSelect.getOptions(a),this.operatorsSelect.domNode.title=
a.label)},_updateDateTextBox1Title:function(){var a=this.dateTextBox1.get("displayedValue")||"";this.dateTextBox1.domNode.title=a},_updateDateTextBox2Title:function(){var a=this.dateTextBox2.get("displayedValue")||"";this.dateTextBox2.domNode.title=a},_showValidationErrorTip:function(a){try{!a.validate()&&a.domNode&&a.focusNode&&(a.focusNode.focus(),a.focusNode.blur())}catch(b){console.error(b)}},_focusValidationTextBox:function(a){try{a&&a.focusNode&&a.focusNode.focus()}catch(b){console.error(b)}},
_isFieldCoded:function(a){return(a=a.domain)&&"codedValue"===a.type&&a.codedValues&&0<a.codedValues.length},_getSelectedFilteringItem:function(a){if(a.validate()){var b=a.get("item");if(b)return b}this._showValidationErrorTip(a);return null},_getShortTypeByFieldType:function(a){return a===this.stringFieldType?"string":a===this.dateFieldType?"date":0<=this.numberFieldTypes.indexOf(a)?"number":null},_getOperatorsByShortType:function(a){var b=[];"string"===a?b=[this.OPERATORS.stringOperatorIs,this.OPERATORS.stringOperatorIsNot,
this.OPERATORS.stringOperatorStartsWith,this.OPERATORS.stringOperatorEndsWith,this.OPERATORS.stringOperatorContains,this.OPERATORS.stringOperatorDoesNotContain,this.OPERATORS.stringOperatorIsBlank,this.OPERATORS.stringOperatorIsNotBlank]:"number"===a?b=[this.OPERATORS.numberOperatorIs,this.OPERATORS.numberOperatorIsNot,this.OPERATORS.numberOperatorIsAtLeast,this.OPERATORS.numberOperatorIsLessThan,this.OPERATORS.numberOperatorIsAtMost,this.OPERATORS.numberOperatorIsGreaterThan,this.OPERATORS.numberOperatorIsBetween,
this.OPERATORS.numberOperatorIsNotBetween,this.OPERATORS.numberOperatorIsBlank,this.OPERATORS.numberOperatorIsNotBlank]:"date"===a&&(b=[this.OPERATORS.dateOperatorIsOn,this.OPERATORS.dateOperatorIsNotOn,this.OPERATORS.dateOperatorIsBefore,this.OPERATORS.dateOperatorIsAfter,this.OPERATORS.dateOperatorIsBetween,this.OPERATORS.dateOperatorIsNotBetween,this.OPERATORS.dateOperatorIsBlank,this.OPERATORS.dateOperatorIsNotBlank]);return b},_initFieldsSelect:function(a){a=l.map(a,e.hitch(this,function(a,b){var c=
e.mixin({},a);c.id=b;c.shortType=this._getShortTypeByFieldType(a.type);c.alias||(c.alias=c.name);var s="";"string"===c.shortType?s=this.nls.string:"number"===c.shortType?s=this.nls.number:"date"===c.shortType&&(s=this.nls.date);c.displayName=c.alias+" ("+s+")";return c}));if(0<a.length){var b=new h({data:a});this.fieldsSelect.set("store",b);this.fieldsSelect.set("value",a[0].id)}this.fieldsSelect.focusNode.focus();this.fieldsSelect.focusNode.blur();this._onFieldsSelectChange();this.part&&this._showPart(this.part)},
_showPart:function(a){if((this.part=a)&&this.part.fieldObj&&this.part.operator&&this.part.valueObj){a=this.part.fieldObj.name;var b=this.part.operator;this.part.caseSensitive=!!this.part.caseSensitive;a=this.fieldsSelect.store.query({name:a});if(0!==a.length&&(a=a[0]))this.fieldsSelect.set("value",a.id),setTimeout(e.hitch(this,function(){this.domNode&&(this._onFieldsSelectChange(),this.operatorsSelect.set("value",b),setTimeout(e.hitch(this,function(){this.domNode&&this._resetByFieldAndOperation(this.part)}),
50),setTimeout(e.hitch(this,function(){if(this.domNode){var a=this.part.interactiveObj;a&&(this.cbxAskValues.check(),this._updatePrompt(),this.promptTB.set("value",a.prompt||""),this.hintTB.set("value",a.hint||""),"unique"===this.part.valueObj.type&&a.cascade?this.cbxCascade.check():this.cbxCascade.uncheck())}}),100))}),0)}},_onFieldsSelectChange:function(){this._updateFieldsSelectTitle();this.operatorsSelect.removeOption(this.operatorsSelect.getOptions());this.operatorsSelect.addOption({value:"none",
label:this.nls.none});this.valueRadio.checked=!0;var a=this._getSelectedFilteringItem(this.fieldsSelect);a&&(this.operatorsSelect.shortType=a.shortType,a=this._getOperatorsByShortType(a.shortType),this.operatorsSelect.removeOption(this.operatorsSelect.getOptions()),l.forEach(a,e.hitch(this,function(a){this.operatorsSelect.addOption({value:a,label:this.nls[a]})})));this._onOperatorsSelectChange()},_onOperatorsSelectChange:function(){this._updateOperatorsSelectTitle();this.valueRadio.checked=!0;this._resetByFieldAndOperation()},
_onRangeNumberBlur:function(){if(this.numberTextBox1.validate()&&this.numberTextBox2.validate()){var a=this._getValueForNumberTextBox(this.numberTextBox1),b=this._getValueForNumberTextBox(this.numberTextBox2);g.isValidNumber(a)&&g.isValidNumber(b)&&a>b&&(this._setValueForNumberTextBox(this.numberTextBox1,b),this._setValueForNumberTextBox(this.numberTextBox2,a))}},_onRangeDateBlur:function(){if(this.dateTextBox1.validate()&&this.dateTextBox2.validate()){var a=this.dateTextBox1.get("value"),b=a.getTime(),
d=this.dateTextBox2.get("value"),c=d.getTime();b>c&&(this.dateTextBox1.set("value",d),this.dateTextBox2.set("value",a))}},_initRadios:function(){var a="radio_"+g.getRandomString();this.valueRadio.name=a;this.fieldRadio.name=a;g.combineRadioCheckBoxWithLabel(this.valueRadio,this.valueLabel);g.combineRadioCheckBoxWithLabel(this.fieldRadio,this.fieldLabel);this.own(b(this.valueRadio,"click",e.hitch(this,function(){this._resetByFieldAndOperation()})));this.own(b(this.fieldRadio,"click",e.hitch(this,function(){this._resetByFieldAndOperation()})));
this.uniqueRadio&&(this.uniqueRadio.name=a,g.combineRadioCheckBoxWithLabel(this.uniqueRadio,this.uniqueLabel),this.own(b(this.uniqueRadio,"click",e.hitch(this,function(){this._resetByFieldAndOperation()}))));this._resetByFieldAndOperation()},_updateValueTypeClass:function(){c.removeClass(this.domNode,"value-type");c.removeClass(this.domNode,"field-type");c.removeClass(this.domNode,"unique-type");this.valueRadio.checked?(c.addClass(this.domNode,"value-type"),this.cbxCascade.uncheck()):this.fieldRadio.checked?
(c.addClass(this.domNode,"field-type"),this.cbxCascade.uncheck()):(c.addClass(this.domNode,"unique-type"),this.cbxCascade.check())},_enableRadios:function(){this.valueRadio.disabled=!1;this.fieldRadio.disabled=!1;this.uniqueRadio&&(this.uniqueRadio.disabled=!1)},_disableRadios:function(){this.valueRadio.disabled=!0;this.fieldRadio.disabled=!0;this.uniqueRadio&&(this.uniqueRadio.disabled=!0)},_resetByFieldAndOperation:function(a){var b=a&&a.valueObj;c.setStyle(this.attributeValueContainer,"display",
"block");this._enableRadios();this._hideCaseSensitive();b&&("value"===b.type?this.valueRadio.checked=!0:"field"===b.type?this.fieldRadio.checked=!0:"unique"===b.type&&this.uniqueRadio&&(this.uniqueRadio.checked=!0));var d=this._getSelectedFilteringItem(this.fieldsSelect),e=d&&d.shortType,g=this.operatorsSelect.get("value");if(d)if("string"===e)switch(g){case this.OPERATORS.stringOperatorStartsWith:case this.OPERATORS.stringOperatorEndsWith:case this.OPERATORS.stringOperatorContains:case this.OPERATORS.stringOperatorDoesNotContain:this.valueRadio.checked=
!0,this._disableRadios(),this._showCaseSensitive(),a&&this.cbxCaseSensitive.setValue(a.caseSensitive)}else if("number"===e)switch(g){case this.OPERATORS.numberOperatorIsBetween:case this.OPERATORS.numberOperatorIsNotBetween:this.valueRadio.checked=!0,this._disableRadios()}else if("date"===e){switch(g){case this.OPERATORS.dateOperatorIsBetween:case this.OPERATORS.dateOperatorIsNotBetween:this.valueRadio.checked=!0,this._disableRadios()}this.uniqueRadio&&(this.uniqueRadio.disabled=!0,this.uniqueRadio.checked&&
(this.valueRadio.checked=!0))}this._updateUIOfAttrValueContainer(d,g,b);this._updateValueTypeClass()},_updateUIOfAttrValueContainer:function(a,b,d){this._updatePrompt();var p=a&&a.shortType;if("string"===p||"number"===p||"date"===p)if(c.setStyle(this.attributeValueContainer,"display","block"),this.valueRadio.checked)if(c.setStyle(this.fieldsSelect2.domNode,"display","none"),c.setStyle(this.uniqueValuesSelect.domNode,"display","none"),this._showAllValueBoxContainer(),this._resetValueTextBox(),"string"===
p)c.setStyle(this.stringTextBoxContainer,"display","block"),c.setStyle(this.numberTextBoxContainer,"display","none"),c.setStyle(this.dateTextBoxContainer,"display","none"),this._isFieldCoded(a)&&b===this.OPERATORS.stringOperatorIs?(c.setStyle(this.stringCodedValuesFS.domNode,"display","inline-block"),c.setStyle(this.stringTextBox.domNode,"display","none"),a=l.map(a.domain.codedValues,e.hitch(this,function(a,b){var d=e.mixin({},a);d.id=b;return d})),p=new h({data:a}),this.stringCodedValuesFS.set("store",
p),d?(p=l.filter(a,e.hitch(this,function(a){return a.code===d.value})),0<p.length?this.stringCodedValuesFS.set("value",p[0].id):this.stringCodedValuesFS.set("value",a[0].id)):this.stringCodedValuesFS.set("value",a[0].id)):(c.setStyle(this.stringTextBox.domNode,"display","inline-block"),c.setStyle(this.stringCodedValuesFS.domNode,"display","none"),d&&this._setValueForStringTextBox(this.stringTextBox,d.value)),(b===this.OPERATORS.stringOperatorIsBlank||b===this.OPERATORS.stringOperatorIsNotBlank)&&
c.setStyle(this.attributeValueContainer,"display","none");else if("number"===p){c.setStyle(this.stringTextBoxContainer,"display","none");c.setStyle(this.numberTextBoxContainer,"display","block");c.setStyle(this.dateTextBoxContainer,"display","none");if(b===this.OPERATORS.numberOperatorIsBetween||b===this.OPERATORS.numberOperatorIsNotBetween){if(c.setStyle(this.numberTextBox.domNode,"display","none"),c.setStyle(this.numberRangeTable,"display","table"),c.setStyle(this.numberCodedValuesFS.domNode,"display",
"none"),d){var f;a=g.isValidNumber(d.value1);p=g.isValidNumber(d.value2);a&&p?(p=parseFloat(d.value1),f=parseFloat(d.value2),a=Math.min(p,f),p=Math.max(p,f),this.numberTextBox1.set("value",a),this.numberTextBox2.set("value",p)):a&&!p?(p=parseFloat(d.value1),this.numberTextBox1.set("value",p)):!a&&p&&(f=parseFloat(d.value2),this.numberTextBox2.set("value",f))}}else if(c.setStyle(this.numberRangeTable,"display","none"),this._isFieldCoded(a)&&b===this.OPERATORS.numberOperatorIs)if(c.setStyle(this.numberTextBox.domNode,
"display","none"),c.setStyle(this.numberCodedValuesFS.domNode,"display","inline-block"),a=l.map(a.domain.codedValues,e.hitch(this,function(a,b){var d=e.mixin({},a);d.id=b;return d})),p=new h({data:a}),this.numberCodedValuesFS.set("store",p),d&&!isNaN(d.value)){var s=parseFloat(d.value),p=l.filter(a,e.hitch(this,function(a){return parseFloat(a.code)===s}));0<p.length?this.numberCodedValuesFS.set("value",p[0].id):this.numberCodedValuesFS.set("value",a[0].id)}else this.numberCodedValuesFS.set("value",
a[0].id);else c.setStyle(this.numberTextBox.domNode,"display","inline-block"),c.setStyle(this.numberCodedValuesFS.domNode,"display","none"),d&&this._setValueForNumberTextBox(this.numberTextBox,d.value);(b===this.OPERATORS.numberOperatorIsBlank||b===this.OPERATORS.numberOperatorIsNotBlank)&&c.setStyle(this.attributeValueContainer,"display","none")}else"date"===p&&(c.setStyle(this.stringTextBoxContainer,"display","none"),c.setStyle(this.numberTextBoxContainer,"display","none"),c.setStyle(this.dateTextBoxContainer,
"display","block"),b===this.OPERATORS.dateOperatorIsBetween||b===this.OPERATORS.dateOperatorIsNotBetween?(c.setStyle(this.dateTextBox.domNode,"display","none"),c.setStyle(this.dateRangeTable,"display","table"),d&&(d.value1&&d.value2)&&(this.dateTextBox1.set("value",new Date(d.value1)),this.dateTextBox2.set("value",new Date(d.value2)))):(c.setStyle(this.dateTextBox.domNode,"display","inline-block"),c.setStyle(this.dateRangeTable,"display","none"),d&&d.value&&this.dateTextBox.set("value",new Date(d.value))),
(b===this.OPERATORS.dateOperatorIsBlank||b===this.OPERATORS.dateOperatorIsNotBlank)&&c.setStyle(this.attributeValueContainer,"display","none"));else this.fieldRadio.checked?(this._hideAllValueBoxContainer(),c.setStyle(this.uniqueValuesSelect.domNode,"display","none"),c.setStyle(this.fieldsSelect2.domNode,"display","inline-block"),this._resetFieldsSelect2(),d&&d.value&&(b=this.fieldsSelect2.store.query({name:d.value}),0<b.length&&(b=b[0])&&this.fieldsSelect2.set("value",b.id))):this.uniqueRadio&&this.uniqueRadio.checked&&
(this._hideAllValueBoxContainer(),c.setStyle(this.fieldsSelect2.domNode,"display","none"),c.setStyle(this.uniqueValuesSelect.domNode,"display","inline-block"),this._resetUniqueValuesSelect(d));else c.setStyle(this.attributeValueContainer,"display","none")},_showAllValueBoxContainer:function(){c.setStyle(this.allValueBoxContainer,"display","block")},_hideAllValueBoxContainer:function(){c.setStyle(this.allValueBoxContainer,"display","none")},_resetValueTextBox:function(){this.stringTextBox.set("value",
"");this.numberTextBox.set("value","");this.dateTextBox.set("value",new Date)},_resetFieldsSelect2:function(){this.fieldsSelect2.set("displayedValue","");var a=new h({data:[]});this.fieldsSelect2.set("store",a);if(this.fieldsSelect.validate()){var b=this._getSelectedFilteringItem(this.fieldsSelect);if(b){var a=this.fieldsSelect.store.query({shortType:b.shortType}),d=l.filter(a,e.hitch(this,function(a){return a.id!==b.id})),a=new h({data:d});this.fieldsSelect2.set("store",a);0<d.length&&this.fieldsSelect2.set("value",
d[0].id)}}},_tryLocaleNumber:function(a){var b=g.localizeNumber(a);if(null===b||void 0===b)b=a;return b},_resetUniqueValuesSelect:function(a){this.uniqueValuesSelect.reset();this.uniqueValuesSelect.store.setData([]);if(this.layerInfo&&10.1<=parseFloat(this.layerInfo.currentVersion)){var b=this._getSelectedFilteringItem(this.fieldsSelect);b&&g.getUniqueValues(this.url,b.name,null).then(e.hitch(this,function(d){if(this.domNode){var c=this._getSelectedFilteringItem(this.fieldsSelect);if(d&&c&&b.id===
c.id){this.uniqueValuesSelect.store.setData([]);var g=-1,s=this._hasCodedValues(c);d=l.map(d,e.hitch(this,function(b,d){var e=b;"number"===c.shortType&&(b=parseFloat(b),e=this._tryLocaleNumber(b));s&&(e=this._getDisplayNameOfCodedValues(b,c));e={id:d,value:b,label:e};a&&a.value===b&&(g=e.id);return e}));this.uniqueValuesSelect.store.setData(d);0<d.length&&0<=g&&(d=this.uniqueValuesSelect.store.get(g))&&this.uniqueValuesSelect.set("item",d)}}}),e.hitch(this,function(a){console.error(a)}))}},_hasCodedValues:function(a){var b=
!1;a.domain&&(a=a.domain.codedValues)&&0<a.length&&(b=!0);return b},_getDisplayNameOfCodedValues:function(a,b){var d=a;l.some(b.domain.codedValues,function(b){return b.code===a?(d=b.name,!0):!1});return d},_onCbxAskValuesClicked:function(){this._updateRequiredProperty();this._updatePrompt()},_onCbxAskValuesStatusChanged:function(){this._updateRequiredProperty()},_isUseAskForValues:function(){return this.cbxAskValues.status&&this.cbxAskValues.checked},_isValueRequired:function(){return!this._isUseAskForValues()},
_updateRequiredProperty:function(){var a=this._isValueRequired();this.stringTextBox.set("required",a);this.stringCodedValuesFS.set("required",a);this.numberTextBox.set("required",a);this.numberTextBox1.set("required",a);this.numberTextBox2.set("required",a);this.numberCodedValuesFS.set("required",a);this.uniqueValuesSelect.set("required",a)},_updatePrompt:function(){this.promptTB.set("value","");this.hintTB.set("value","");this.cbxAskValues.setStatus(!0);c.setStyle(this.promptTable,"display","table");
var a=this.operatorsSelect.get("value"),b=this.nls[a];this.fieldRadio.checked&&this.cbxAskValues.setStatus(!1);a===this.OPERATORS.stringOperatorIsBlank&&this.cbxAskValues.setStatus(!1);a===this.OPERATORS.stringOperatorIsNotBlank&&this.cbxAskValues.setStatus(!1);a===this.OPERATORS.numberOperatorIsBlank&&this.cbxAskValues.setStatus(!1);a===this.OPERATORS.numberOperatorIsNotBlank&&this.cbxAskValues.setStatus(!1);a===this.OPERATORS.dateOperatorIsBlank&&this.cbxAskValues.setStatus(!1);a===this.OPERATORS.dateOperatorIsNotBlank&&
this.cbxAskValues.setStatus(!1);if(this.cbxAskValues.status&&this.cbxAskValues.checked){c.setStyle(this.promptTable,"display","table");var d=this._getSelectedFilteringItem(this.fieldsSelect);d&&"none"!==a&&this.promptTB.set("value",(d.alias||d.name)+" "+b)}else c.setStyle(this.promptTable,"display","none")},_destroySelf:function(){this.destroy()}})})},"dijit/form/FilteringSelect":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/when","./MappedTextBox","./ComboBoxMixin"],function(q,
f,n,r,m){return q("dijit.form.FilteringSelect",[r,m],{required:!0,_lastDisplayedValue:"",_isValidSubset:function(){return this._opened},isValid:function(){return!!this.item||!this.required&&""==this.get("displayedValue")},_refreshState:function(){this.searchTimer||this.inherited(arguments)},_callbackSetLabel:function(e,c,f,b){c&&c[this.searchAttr]!==this._lastQuery||!c&&e.length&&this.store.getIdentity(e[0])!=this._lastQuery||(e.length?this.set("item",e[0],b):this.set("value","",b||void 0===b&&!this.focused,
this.textbox.value,null))},_openResultList:function(e,c,f){c[this.searchAttr]===this._lastQuery&&(this.inherited(arguments),void 0===this.item&&this.validate(!0))},_getValueAttr:function(){return this.valueNode.value},_getValueField:function(){return"value"},_setValueAttr:function(e,c,l,b){this._onChangeActive||(c=null);if(void 0===b){if(null===e||""===e)if(e="",!f.isString(l)){this._setDisplayedValueAttr(l||"",c);return}var h=this;this._lastQuery=e;n(this.store.get(e),function(b){h._callbackSetLabel(b?
[b]:[],void 0,void 0,c)})}else this.valueNode.value=e,this.inherited(arguments,[e,c,l,b])},_setItemAttr:function(e,c,f){this.inherited(arguments);this._lastDisplayedValue=this.textbox.value},_getDisplayQueryString:function(e){return e.replace(/([\\\*\?])/g,"\\$1")},_setDisplayedValueAttr:function(e,c){null==e&&(e="");if(!this._created){if(!("displayedValue"in this.params))return;c=!1}if(this.store){this.closeDropDown();var l=f.clone(this.query),b=this._getDisplayQueryString(e),h;this.store._oldAPI?
h=b:(h=this._patternToRegExp(b),h.toString=function(){return b});this._lastQuery=l[this.searchAttr]=h;this._lastDisplayedValue=this.textbox.value=e;this._set("displayedValue",e);var g=this,a={queryOptions:{ignoreCase:this.ignoreCase,deep:!0}};f.mixin(a,this.fetchProperties);this._fetchHandle=this.store.query(l,a);n(this._fetchHandle,function(b){g._fetchHandle=null;g._callbackSetLabel(b||[],l,a,c)},function(a){g._fetchHandle=null;g._cancelingQuery||console.error("dijit.form.FilteringSelect: "+a.toString())})}},
undo:function(){this.set("displayedValue",this._lastDisplayedValue)}})})},"dijit/form/DateTextBox":function(){define(["dojo/_base/declare","../Calendar","./_DateTimeTextBox"],function(q,f,n){return q("dijit.form.DateTextBox",n,{baseClass:"dijitTextBox dijitComboBox dijitDateTextBox",popupClass:f,_selector:"date",maxHeight:Infinity,value:new Date("")})})},"dijit/Calendar":function(){define("dojo/_base/array dojo/date dojo/date/locale dojo/_base/declare dojo/dom-attr dojo/dom-class dojo/dom-construct dojo/_base/kernel dojo/keys dojo/_base/lang dojo/on dojo/sniff ./CalendarLite ./_Widget ./_CssStateMixin ./_TemplatedMixin ./form/DropDownButton".split(" "),
function(q,f,n,r,m,e,c,l,b,h,g,a,k,d,p,t,s){var u=r("dijit.Calendar",[k,d,p],{baseClass:"dijitCalendar",cssStateNodes:{decrementMonth:"dijitCalendarArrow",incrementMonth:"dijitCalendarArrow",previousYearLabelNode:"dijitCalendarPreviousYear",nextYearLabelNode:"dijitCalendarNextYear"},setValue:function(a){l.deprecated("dijit.Calendar:setValue() is deprecated.  Use set('value', ...) instead.","","2.0");this.set("value",a)},_createMonthWidget:function(){return new u._MonthDropDownButton({id:this.id+"_mddb",
tabIndex:-1,onMonthSelect:h.hitch(this,"_onMonthSelect"),lang:this.lang,dateLocaleModule:this.dateLocaleModule},this.monthNode)},postCreate:function(){this.inherited(arguments);this.own(g(this.domNode,"keydown",h.hitch(this,"_onKeyDown")),g(this.dateRowsNode,"mouseover",h.hitch(this,"_onDayMouseOver")),g(this.dateRowsNode,"mouseout",h.hitch(this,"_onDayMouseOut")),g(this.dateRowsNode,"mousedown",h.hitch(this,"_onDayMouseDown")),g(this.dateRowsNode,"mouseup",h.hitch(this,"_onDayMouseUp")))},_onMonthSelect:function(a){var b=
new this.dateClassObj(this.currentFocus);b.setDate(1);b.setMonth(a);a=this.dateModule.getDaysInMonth(b);var d=this.currentFocus.getDate();b.setDate(Math.min(d,a));this._setCurrentFocusAttr(b)},_onDayMouseOver:function(a){if((a=e.contains(a.target,"dijitCalendarDateLabel")?a.target.parentNode:a.target)&&(a.dijitDateValue&&!e.contains(a,"dijitCalendarDisabledDate")||a==this.previousYearLabelNode||a==this.nextYearLabelNode))e.add(a,"dijitCalendarHoveredDate"),this._currentNode=a},_onDayMouseOut:function(a){this._currentNode&&
!(a.relatedTarget&&a.relatedTarget.parentNode==this._currentNode)&&(a="dijitCalendarHoveredDate",e.contains(this._currentNode,"dijitCalendarActiveDate")&&(a+=" dijitCalendarActiveDate"),e.remove(this._currentNode,a),this._currentNode=null)},_onDayMouseDown:function(a){if((a=a.target.parentNode)&&a.dijitDateValue&&!e.contains(a,"dijitCalendarDisabledDate"))e.add(a,"dijitCalendarActiveDate"),this._currentNode=a},_onDayMouseUp:function(a){(a=a.target.parentNode)&&a.dijitDateValue&&e.remove(a,"dijitCalendarActiveDate")},
handleKey:function(a){var d=-1,c,s=this.currentFocus;switch(a.keyCode){case b.RIGHT_ARROW:d=1;case b.LEFT_ARROW:c="day";this.isLeftToRight()||(d*=-1);break;case b.DOWN_ARROW:d=1;case b.UP_ARROW:c="week";break;case b.PAGE_DOWN:d=1;case b.PAGE_UP:c=a.ctrlKey||a.altKey?"year":"month";break;case b.END:s=this.dateModule.add(s,"month",1),c="day";case b.HOME:s=new this.dateClassObj(s);s.setDate(1);break;default:return!0}c&&(s=this.dateModule.add(s,c,d));this._setCurrentFocusAttr(s);return!1},_onKeyDown:function(a){this.handleKey(a)||
(a.stopPropagation(),a.preventDefault())},onValueSelected:function(){},onChange:function(a){this.onValueSelected(a)},getClassForDate:function(){}});u._MonthDropDownButton=r("dijit.Calendar._MonthDropDownButton",s,{onMonthSelect:function(){},postCreate:function(){this.inherited(arguments);this.dropDown=new u._MonthDropDown({id:this.id+"_mdd",onChange:this.onMonthSelect})},_setMonthAttr:function(b){var d=this.dateLocaleModule.getNames("months","wide","standAlone",this.lang,b);this.dropDown.set("months",
d);this.containerNode.innerHTML=(6==a("ie")?"":"\x3cdiv class\x3d'dijitSpacer'\x3e"+this.dropDown.domNode.innerHTML+"\x3c/div\x3e")+"\x3cdiv class\x3d'dijitCalendarMonthLabel dijitCalendarCurrentMonthLabel'\x3e"+d[b.getMonth()]+"\x3c/div\x3e"}});u._MonthDropDown=r("dijit.Calendar._MonthDropDown",[d,t,p],{months:[],baseClass:"dijitCalendarMonthMenu dijitMenu",templateString:"\x3cdiv data-dojo-attach-event\x3d'ondijitclick:_onClick'\x3e\x3c/div\x3e",_setMonthsAttr:function(a){this.domNode.innerHTML=
"";q.forEach(a,function(a,b){c.create("div",{className:"dijitCalendarMonthLabel",month:b,innerHTML:a},this.domNode)._cssState="dijitCalendarMonthLabel"},this)},_onClick:function(a){this.onChange(m.get(a.target,"month"))},onChange:function(){}});return u})},"dijit/CalendarLite":function(){define("dojo/_base/array dojo/_base/declare dojo/cldr/supplemental dojo/date dojo/date/locale dojo/date/stamp dojo/dom dojo/dom-class dojo/_base/lang dojo/on dojo/sniff dojo/string ./_WidgetBase ./_TemplatedMixin dojo/text!./templates/Calendar.html ./a11yclick ./hccss".split(" "),
function(q,f,n,r,m,e,c,l,b,h,g,a,k,d,p){var t=f("dijit.CalendarLite",[k,d],{templateString:p,dowTemplateString:'\x3cth class\x3d"dijitReset dijitCalendarDayLabelTemplate" role\x3d"columnheader" scope\x3d"col"\x3e\x3cspan class\x3d"dijitCalendarDayLabel"\x3e${d}\x3c/span\x3e\x3c/th\x3e',dateTemplateString:'\x3ctd class\x3d"dijitReset" role\x3d"gridcell" data-dojo-attach-point\x3d"dateCells"\x3e\x3cspan class\x3d"dijitCalendarDateLabel" data-dojo-attach-point\x3d"dateLabels"\x3e\x3c/span\x3e\x3c/td\x3e',
weekTemplateString:'\x3ctr class\x3d"dijitReset dijitCalendarWeekTemplate" role\x3d"row"\x3e${d}${d}${d}${d}${d}${d}${d}\x3c/tr\x3e',value:new Date(""),datePackage:"",dayWidth:"narrow",tabIndex:"0",dayOffset:-1,currentFocus:new Date,_setSummaryAttr:"gridNode",baseClass:"dijitCalendar dijitCalendarLite",_isValidDate:function(a){return a&&!isNaN(a)&&"object"==typeof a&&a.toString()!=this.constructor.prototype.value.toString()},_getValueAttr:function(){var a=this._get("value");if(a&&!isNaN(a)){var b=
new this.dateClassObj(a);b.setHours(0,0,0,0);b.getDate()<a.getDate()&&(b=this.dateModule.add(b,"hour",1));return b}return null},_setValueAttr:function(a,b){"string"==typeof a&&(a=e.fromISOString(a));a=this._patchDate(a);if(this._isValidDate(a)&&!this.isDisabledDate(a,this.lang)){if(this._set("value",a),this.set("currentFocus",a),this._markSelectedDates([a]),this._created&&(b||"undefined"==typeof b))this.onChange(this.get("value"))}else this._set("value",null),this._markSelectedDates([])},_patchDate:function(a){a&&
(a=new this.dateClassObj(a),a.setHours(1,0,0,0));return a},_setText:function(a,b){for(;a.firstChild;)a.removeChild(a.firstChild);a.appendChild(a.ownerDocument.createTextNode(b))},_populateGrid:function(){var a=new this.dateClassObj(this.currentFocus);a.setDate(1);var a=this._patchDate(a),b=a.getDay(),d=this.dateModule.getDaysInMonth(a),c=this.dateModule.getDaysInMonth(this.dateModule.add(a,"month",-1)),e=new this.dateClassObj,g=0<=this.dayOffset?this.dayOffset:n.getFirstDayOfWeek(this.lang);g>b&&
(g-=7);if(!this.summary){var h=this.dateLocaleModule.getNames("months","wide","standAlone",this.lang,a);this.gridNode.setAttribute("summary",h[a.getMonth()])}this._date2cell={};q.forEach(this.dateCells,function(h,p){var f=p+g,l=new this.dateClassObj(a),k="dijitCalendar",m=0;f<b?(f=c-b+f+1,m=-1,k+="Previous"):f>=b+d?(f=f-b-d+1,m=1,k+="Next"):(f=f-b+1,k+="Current");m&&(l=this.dateModule.add(l,"month",m));l.setDate(f);this.dateModule.compare(l,e,"date")||(k="dijitCalendarCurrentDate "+k);this.isDisabledDate(l,
this.lang)?(k="dijitCalendarDisabledDate "+k,h.setAttribute("aria-disabled","true")):(k="dijitCalendarEnabledDate "+k,h.removeAttribute("aria-disabled"),h.setAttribute("aria-selected","false"));(m=this.getClassForDate(l,this.lang))&&(k=m+" "+k);h.className=k+"Month dijitCalendarDateTemplate";k=l.valueOf();this._date2cell[k]=h;h.dijitDateValue=k;this._setText(this.dateLabels[p],l.getDateLocalized?l.getDateLocalized(this.lang):l.getDate())},this)},_populateControls:function(){var a=new this.dateClassObj(this.currentFocus);
a.setDate(1);this.monthWidget.set("month",a);var b=a.getFullYear()-1,d=new this.dateClassObj;q.forEach(["previous","current","next"],function(a){d.setFullYear(b++);this._setText(this[a+"YearLabelNode"],this.dateLocaleModule.format(d,{selector:"year",locale:this.lang}))},this)},goToToday:function(){this.set("value",new this.dateClassObj)},constructor:function(a){this.dateModule=a.datePackage?b.getObject(a.datePackage,!1):r;this.dateClassObj=this.dateModule.Date||Date;this.dateLocaleModule=a.datePackage?
b.getObject(a.datePackage+".locale",!1):m},_createMonthWidget:function(){return t._MonthWidget({id:this.id+"_mddb",lang:this.lang,dateLocaleModule:this.dateLocaleModule},this.monthNode)},buildRendering:function(){var b=this.dowTemplateString,d=this.dateLocaleModule.getNames("days",this.dayWidth,"standAlone",this.lang),e=0<=this.dayOffset?this.dayOffset:n.getFirstDayOfWeek(this.lang);this.dayCellsHtml=a.substitute([b,b,b,b,b,b,b].join(""),{d:""},function(){return d[e++%7]});b=a.substitute(this.weekTemplateString,
{d:this.dateTemplateString});this.dateRowsHtml=[b,b,b,b,b,b].join("");this.dateCells=[];this.dateLabels=[];this.inherited(arguments);c.setSelectable(this.domNode,!1);b=new this.dateClassObj(this.currentFocus);this.monthWidget=this._createMonthWidget();this.set("currentFocus",b,!1)},postCreate:function(){this.inherited(arguments);this._connectControls()},_connectControls:function(){var a=b.hitch(this,function(a,d,c){this[a].dojoClick=!0;return h(this[a],"click",b.hitch(this,function(){this._setCurrentFocusAttr(this.dateModule.add(this.currentFocus,
d,c))}))});this.own(a("incrementMonth","month",1),a("decrementMonth","month",-1),a("nextYearLabelNode","year",1),a("previousYearLabelNode","year",-1))},_setCurrentFocusAttr:function(a,b){var d=this.currentFocus,c=this._getNodeByDate(d);a=this._patchDate(a);this._set("currentFocus",a);if(!this._date2cell||0!=this.dateModule.difference(d,a,"month"))this._populateGrid(),this._populateControls(),this._markSelectedDates([this.value]);d=this._getNodeByDate(a);d.setAttribute("tabIndex",this.tabIndex);(this.focused||
b)&&d.focus();c&&c!=d&&(g("webkit")?c.setAttribute("tabIndex","-1"):c.removeAttribute("tabIndex"))},focus:function(){this._setCurrentFocusAttr(this.currentFocus,!0)},_onDayClick:function(a){a.stopPropagation();a.preventDefault();for(a=a.target;a&&!a.dijitDateValue;a=a.parentNode);a&&!l.contains(a,"dijitCalendarDisabledDate")&&this.set("value",a.dijitDateValue)},_getNodeByDate:function(a){return(a=this._patchDate(a))&&this._date2cell?this._date2cell[a.valueOf()]:null},_markSelectedDates:function(a){function d(a,
b){l.toggle(b,"dijitCalendarSelectedDate",a);b.setAttribute("aria-selected",a?"true":"false")}q.forEach(this._selectedCells||[],b.partial(d,!1));this._selectedCells=q.filter(q.map(a,this._getNodeByDate,this),function(a){return a});q.forEach(this._selectedCells,b.partial(d,!0))},onChange:function(){},isDisabledDate:function(){},getClassForDate:function(){}});t._MonthWidget=f("dijit.CalendarLite._MonthWidget",k,{_setMonthAttr:function(a){var b=this.dateLocaleModule.getNames("months","wide","standAlone",
this.lang,a),d=6==g("ie")?"":"\x3cdiv class\x3d'dijitSpacer'\x3e"+q.map(b,function(a){return"\x3cdiv\x3e"+a+"\x3c/div\x3e"}).join("")+"\x3c/div\x3e";this.domNode.innerHTML=d+"\x3cdiv class\x3d'dijitCalendarMonthLabel dijitCalendarCurrentMonthLabel'\x3e"+b[a.getMonth()]+"\x3c/div\x3e"}});return t})},"dijit/form/_DateTimeTextBox":function(){define("dojo/date dojo/date/locale dojo/date/stamp dojo/_base/declare dojo/_base/lang ./RangeBoundTextBox ../_HasDropDown dojo/text!./templates/DropDownBox.html".split(" "),
function(q,f,n,r,m,e,c,l){new Date("X");return r("dijit.form._DateTimeTextBox",[e,c],{templateString:l,hasDownArrow:!0,cssStateNodes:{_buttonNode:"dijitDownArrowButton"},_unboundedConstraints:{},pattern:f.regexp,datePackage:"",postMixInProperties:function(){this.inherited(arguments);this._set("type","text")},compare:function(b,c){var e=this._isInvalidDate(b),a=this._isInvalidDate(c);if(e||a)return e&&a?0:!e?1:-1;var e=this.format(b,this._unboundedConstraints),a=this.format(c,this._unboundedConstraints),
f=this.parse(e,this._unboundedConstraints),d=this.parse(a,this._unboundedConstraints);return e==a?0:q.compare(f,d,this._selector)},autoWidth:!0,format:function(b,c){return!b?"":this.dateLocaleModule.format(b,c)},parse:function(b,c){return this.dateLocaleModule.parse(b,c)||(this._isEmpty(b)?null:void 0)},serialize:function(b,c){b.toGregorian&&(b=b.toGregorian());return n.toISOString(b,c)},dropDownDefaultValue:new Date,value:new Date(""),_blankValue:null,popupClass:"",_selector:"",constructor:function(b){b=
b||{};this.dateModule=b.datePackage?m.getObject(b.datePackage,!1):q;this.dateClassObj=this.dateModule.Date||Date;this.dateClassObj instanceof Date||(this.value=new this.dateClassObj(this.value));this.dateLocaleModule=b.datePackage?m.getObject(b.datePackage+".locale",!1):f;this._set("pattern",this.dateLocaleModule.regexp);this._invalidDate=this.constructor.prototype.value.toString()},buildRendering:function(){this.inherited(arguments);this.hasDownArrow||(this._buttonNode.style.display="none");this.hasDownArrow||
(this._buttonNode=this.domNode,this.baseClass+=" dijitComboBoxOpenOnClick")},_setConstraintsAttr:function(b){b.selector=this._selector;b.fullYear=!0;var c=n.fromISOString;"string"==typeof b.min&&(b.min=c(b.min),this.dateClassObj instanceof Date||(b.min=new this.dateClassObj(b.min)));"string"==typeof b.max&&(b.max=c(b.max),this.dateClassObj instanceof Date||(b.max=new this.dateClassObj(b.max)));this.inherited(arguments);this._unboundedConstraints=m.mixin({},this.constraints,{min:null,max:null})},_isInvalidDate:function(b){return!b||
isNaN(b)||"object"!=typeof b||b.toString()==this._invalidDate},_setValueAttr:function(b,c,e){void 0!==b&&("string"==typeof b&&(b=n.fromISOString(b)),this._isInvalidDate(b)&&(b=null),b instanceof Date&&!(this.dateClassObj instanceof Date)&&(b=new this.dateClassObj(b)));this.inherited(arguments,[b,c,e]);this.value instanceof Date&&(this.filterString="");!1!==c&&this.dropDown&&this.dropDown.set("value",b,!1)},_set:function(b,c){if("value"==b){c instanceof Date&&!(this.dateClassObj instanceof Date)&&
(c=new this.dateClassObj(c));var e=this._get("value");if(e instanceof this.dateClassObj&&0==this.compare(c,e))return}this.inherited(arguments)},_setDropDownDefaultValueAttr:function(b){this._isInvalidDate(b)&&(b=new this.dateClassObj);this._set("dropDownDefaultValue",b)},openDropDown:function(b){this.dropDown&&this.dropDown.destroy();var c=m.isString(this.popupClass)?m.getObject(this.popupClass,!1):this.popupClass,e=this,a=this.get("value");this.dropDown=new c({onChange:function(a){e.set("value",
a,!0)},id:this.id+"_popup",dir:e.dir,lang:e.lang,value:a,textDir:e.textDir,currentFocus:!this._isInvalidDate(a)?a:this.dropDownDefaultValue,constraints:e.constraints,filterString:e.filterString,datePackage:e.datePackage,isDisabledDate:function(a){return!e.rangeCheck(a,e.constraints)}});this.inherited(arguments)},_getDisplayedValueAttr:function(){return this.textbox.value},_setDisplayedValueAttr:function(b,c){this._setValueAttr(this.parse(b,this.constraints),c,b)}})})},"jimu/dijit/_FilterSet":function(){define("dojo/_base/declare dijit/_WidgetBase dijit/_TemplatedMixin dijit/_WidgetsInTemplateMixin dojo/text!./templates/_FilterSet.html dijit/registry dojo/_base/lang dojo/_base/html dojo/_base/array dojo/on dojo/aspect dojo/query ./_SingleFilter".split(" "),
function(q,f,n,r,m,e,c,l,b,h,g,a,k){return q([f,n,r],{templateString:m,baseClass:"jimu-filter-set",nls:null,url:null,layerInfo:null,stringFieldType:"",dateFieldType:"",numberFieldTypes:[],partsObj:null,OPERATORS:null,enableAskForValues:!1,isHosted:!1,postMixInProperties:function(){this.nls=window.jimuNls.filterBuilder;var a=this.nls.matchMsgSet.split("${any_or_all}");this.nls.strMatchMsgPart1=a[0]||"";this.nls.strMatchMsgPart2=a[1]||"";this.inherited(arguments)},postCreate:function(){this.inherited(arguments);
this._initSelf()},toJson:function(){var d=a(".jimu-single-filter",this.allExpsBox),d=b.map(d,c.hitch(this,function(a){return e.byNode(a).toJson()}));return b.every(d,c.hitch(this,function(a){return!!a}))&&0<d.length?{logicalOperator:this.allAnySelect.value,parts:d}:null},showDelteIcon:function(){l.setStyle(this.btnDelete,"display","block")},hideDeleteIcon:function(){l.setStyle(this.btnDelete,"display","none")},_initSelf:function(){this.own(h(this.btnAdd,"click",c.hitch(this,this._addSingleFilter)));
if(this.partsObj){this.allAnySelect.value=this.partsObj.logicalOperator;var a=this.partsObj.parts||[];0===a.length?(this._addSingleFilter(),this._addSingleFilter()):1===a.length?(this._addSingleFilter(a[0]),this._addSingleFilter()):b.forEach(a,c.hitch(this,function(a){this._addSingleFilter(a)}))}else this._addSingleFilter(),this._addSingleFilter()},_addSingleFilter:function(a){a=new k({url:this.url,layerInfo:this.layerInfo,stringFieldType:this.stringFieldType,dateFieldType:this.dateFieldType,numberFieldTypes:this.numberFieldTypes,
part:a,OPERATORS:this.OPERATORS,enableAskForValues:this.enableAskForValues,isHosted:this.isHosted,style:{margin:"15px auto 0 auto",border:0,background:"inherit"}});a.placeAt(this.allExpsBox);a.startup();this.own(g.after(a,"_destroySelf",c.hitch(this,this._checkFilterNumbers)));this._checkFilterNumbers()},_checkFilterNumbers:function(){var d=a(".jimu-single-filter",this.allExpsBox),f=2<d.length;b.forEach(d,c.hitch(this,function(a){a=e.byNode(a);f?a.showDelteIcon():a.hideDeleteIcon()}))},_destroySelf:function(){this.destroy()}})})},
"widgets/Stream/FilterUtil":function(){define(["dojo/json","jimu/dijit/Filter","dojo/dom-construct"],function(q,f,n){return{buildFilterInfoFromString:function(r,m,e){var c=new f,l=n.create("div"),b=q.parse(r._json);c.placeAt(l);c.startup();return c.buildByExpr(r.url,m,b).then(function(){return{inherited:!0,definitionExpression:m,name:e,filterInfo:c.toJson()}},function(){return null})}}})},"widgets/Stream/setting/_build-generate_module":function(){define(["dojo/text!./Setting.html","dojo/text!./css/style.css",
"dojo/i18n!./nls/strings"],function(){})},"url:widgets/Stream/setting/Setting.html":'\x3cdiv\x3e\r\n  \x3cdiv class\x3d"stream-list"\x3e\r\n    \x3cdiv class\x3d"stream-list-head" style\x3d"overflow:hidden;"\x3e\r\n      \x3cdiv class\x3d"jimu-float-leading jimu-widget-title"\x3e${nls.streamLayers}\x3c/div\x3e\r\n    \x3c/div\x3e\r\n    \x3cdiv class\x3d"stream-list-content"\x3e\r\n      \x3cdiv data-dojo-attach-point\x3d"streamList"\x3e\x3c/div\x3e\r\n    \x3c/div\x3e\r\n  \x3c/div\x3e\r\n  \x3cdiv class\x3d"single-stream-container" data-dojo-attach-point\x3d"singleStreamContainer"\x3e\r\n  \x3c/div\x3e\r\n  \x3cdiv data-dojo-attach-point\x3d"shelter" data-dojo-type\x3d"jimu/dijit/LoadingShelter" data-dojo-props\x3d\'hidden:true\'\x3e\x3c/div\x3e\r\n\x3c/div\x3e',
"url:widgets/Stream/setting/StreamSetting.html":'\x3cdiv\x3e\r\n  \x3cdiv data-dojo-attach-point\x3d"detailSection" class\x3d"detail"\x3e\r\n    \x3cdiv\x3e\r\n      \x3cdiv class\x3d"titleContainer"\x3e\r\n        \x3clabel class\x3d"jimu-widget-title"\x3e${nls.streamControls}\x3c/label\x3e\r\n      \x3c/div\x3e\r\n      \x3cdiv data-dojo-attach-point\x3d"startStopCheckBoxDiv" class\x3d"checkboxContainer jimu-widget-tooltip"\x3e\x3c/div\x3e\r\n      \x3cdiv data-dojo-attach-point\x3d"clearPreviousCheckBoxDiv" class\x3d"checkboxContainer jimu-widget-tooltip"\x3e\x3c/div\x3e\r\n      \x3cdiv data-dojo-attach-point\x3d"drawPreviousCheckBoxDiv" class\x3d"checkboxContainer jimu-widget-tooltip"\x3e\x3c/div\x3e\r\n    \x3c/div\x3e\r\n    \x3cdiv\x3e\r\n      \x3cdiv class\x3d"titleContainer"\x3e\r\n        \x3clabel class\x3d"jimu-widget-title"\x3e${nls.streamFilter}\x3c/label\x3e\r\n      \x3c/div\x3e\r\n      \x3cdiv data-dojo-attach-point\x3d"spatialFilterCheckBoxDiv" class\x3d"checkboxContainer jimu-widget-tooltip"\x3e\x3c/div\x3e\r\n      \x3cdiv data-dojo-attach-point\x3d"spatialChoices"\x3e\r\n        \x3cdiv data-dojo-attach-point\x3d"mapExtentCheckBoxDiv" class\x3d"subCheckboxContainer jimu-widget-tooltip"\x3e\x3c/div\x3e\r\n        \x3cdiv class\x3d"subCheckboxContainer"\x3e\r\n          \x3cdiv data-dojo-attach-point\x3d"drawExtentCheckBoxDiv" class\x3d"jimu-widget-tooltip" style\x3d"display:inline"\x3e\x3c/div\x3e\r\n          \x3cdiv data-dojo-attach-point\x3d"symbolPickerNode" style\x3d"display:none"\x3e\x3c/div\x3e\r\n        \x3c/div\x3e\r\n      \x3c/div\x3e\r\n      \x3cdiv\x3e\r\n        \x3cdiv data-dojo-attach-point\x3d"filterCheckBoxDiv" class\x3d"jimu-widget-tooltip"\r\n             class\x3d"checkboxContainer" style\x3d"display: inline-block"\x3e\x3c/div\x3e\r\n        \x3cdiv data-dojo-attach-point\x3d"filterIcon" class\x3d"filterIcon disabled jimu-leading-margin05"\r\n          data-dojo-attach-event\x3d"onClick: _showFilter"\x3e\x3c/div\x3e\r\n      \x3c/div\x3e\r\n    \x3c/div\x3e\r\n  \x3c/div\x3e\r\n  \x3cdiv data-dojo-attach-point\x3d"shelter" data-dojo-type\x3d"jimu/dijit/LoadingShelter" data-dojo-props\x3d\'hidden:true\'\x3e\x3c/div\x3e\r\n\x3c/div\x3e\r\n',
"url:widgets/Stream/setting/FilterConfig.html":'\x3cdiv\x3e\r\n  \x3cdiv class\x3d"stream-filter-head" style\x3d"overflow:hidden;"\x3e\r\n    \x3cdiv class\x3d"jimu-float-leading"\x3e\r\n      \x3cdiv class\x3d"add-with-icon" data-dojo-attach-event\x3d"onclick:_addFilter"\x3e\r\n        \x3cspan class\x3d"jimu-icon jimu-icon-add"\x3e\x3c/span\x3e\r\n        \x3cspan class\x3d"add-label jimu-widget-normal"\x3e${nls.addNew}\x3c/span\x3e\r\n      \x3c/div\x3e\r\n    \x3c/div\x3e\r\n  \x3c/div\x3e\r\n  \x3cdiv class\x3d"stream-filterList"\x3e\r\n    \x3cdiv class\x3d"stream-filterList-content"\x3e\r\n      \x3cdiv data-dojo-attach-point\x3d"filterList"\x3e\x3c/div\x3e\r\n    \x3c/div\x3e\r\n  \x3c/div\x3e\r\n  \x3cdiv class\x3d"single-filter-container" data-dojo-attach-point\x3d"singleFilterContainer"\x3e\r\n  \x3c/div\x3e\r\n  \x3cdiv data-dojo-attach-point\x3d"shelter" data-dojo-type\x3d"jimu/dijit/LoadingShelter" data-dojo-props\x3d\'hidden:true\'\x3e\x3c/div\x3e\r\n\x3c/div\x3e',
"url:widgets/Stream/setting/SingleFilter.html":'\x3cdiv\x3e\r\n  \x3cdiv class\x3d"single-filter-container"\x3e\r\n    \x3cdiv\x3e\r\n      \x3cspan class\x3d"jimu-widget-normal"\x3e${nls.filterName}\x3c/span\x3e\r\n      \x3cinput data-dojo-type\x3d"dijit/form/ValidationTextBox"\r\n        data-dojo-props\x3d"required:true"\r\n        data-dojo-attach-point\x3d"filterNameEditor"\x3e\r\n    \x3c/div\x3e\r\n    \x3cdiv style\x3d"position:relative;"\x3e\r\n      \x3cdiv data-dojo-attach-point\x3d"singleFilterContent"\x3e\x3c/div\x3e\r\n      \x3cdiv data-dojo-attach-point\x3d"filterMask" class\x3d"mask"\x3e\x3c/div\x3e\r\n      \x3cspan class\x3d"jimu-widget-normal mask-tip" data-dojo-attach-point\x3d"filterMaskTip"\x3e\r\n        ${nls.filterReadOnly}\r\n      \x3c/span\x3e\r\n    \x3c/div\x3e\r\n  \x3c/div\x3e\r\n  \x3cdiv data-dojo-attach-point\x3d"shelter" data-dojo-type\x3d"jimu/dijit/LoadingShelter"\r\n       data-dojo-props\x3d\'hidden:true\'\x3e\x3c/div\x3e\r\n\x3c/div\x3e',
"url:jimu/dijit/templates/Filter.html":'\x3cdiv\x3e\r\n\t\x3cdiv data-dojo-attach-point\x3d"contentSection" class\x3d"content-section"\x3e\r\n\t\t\x3cdiv class\x3d"add-btn-section"\x3e\r\n\t\t\t\x3cdiv data-dojo-attach-point\x3d"btnAddExp" data-dojo-attach-event\x3d"click:_onBtnAddExpClick"\r\n\t\t\t class\x3d"add-with-icon jimu-state-disabled add-expression jimu-float-leading"\x3e\r\n\t\t\t\t\x3cspan data-dojo-attach-point\x3d"iconAddExp" class\x3d"jimu-icon jimu-icon-add jimu-state-disabled"\x3e\x3c/span\x3e\r\n\t\t\t\t\x3cspan class\x3d"add-label"\x3e${nls.addAnotherExpression}\x3c/span\x3e\r\n\t\t\t\x3c/div\x3e\r\n\t\t\t\x3cdiv data-dojo-attach-point\x3d"btnAddSet" data-dojo-attach-event\x3d"click:_onBtnAddSetClick"\r\n\t\t\t class\x3d"add-with-icon jimu-state-disabled add-set jimu-float-leading"\x3e\r\n\t\t\t\t\x3cspan data-dojo-attach-point\x3d"iconAddSet" class\x3d"jimu-icon jimu-icon-add jimu-state-disabled"\x3e\x3c/span\x3e\r\n\t\t\t\t\x3cspan class\x3d"add-label"\x3e${nls.addSet}\x3c/span\x3e\r\n\t\t\t\x3c/div\x3e\r\n\t\t\x3c/div\x3e\r\n\t\t\x3cspan data-dojo-attach-point\x3d"matchMsg" style\x3d"margin-top:11px;margin-bottom:11px;display:none;"\x3e\r\n\t\t\t\x3cspan\x3e${nls.strMatchMsgPart1}\x3c/span\x3e\r\n\t\t\t\x3cselect data-dojo-attach-point\x3d"allAnySelect"\x3e\r\n\t\t\t\t\x3coption value\x3d"AND" selected\x3e${nls.all}\x3c/option\x3e\r\n\t\t\t\t\x3coption value\x3d"OR"\x3e${nls.any}\x3c/option\x3e\r\n\t\t\t\x3c/select\x3e\r\n\t\t\t\x3cspan\x3e${nls.strMatchMsgPart2}\x3c/span\x3e\r\n\t\t\x3c/span\x3e\r\n\t\t\x3cdiv class\x3d"allExpsBox" data-dojo-attach-point\x3d"allExpsBox"\x3e\r\n\t\t\x3c/div\x3e\r\n\t\x3c/div\x3e\r\n\t\x3cdiv data-dojo-attach-point\x3d"errorSection" style\x3d"display:none;"\x3e\r\n\t\t\x3cspan class\x3d"jimu-icon jimu-icon-error"\x3e\x3c/span\x3e\r\n\t\t\x3cspan data-dojo-attach-point\x3d"errorTip" class\x3d"error-tip"\x3e\x3c/span\x3e\r\n\t\x3c/div\x3e\r\n\t\x3cdiv data-dojo-attach-point\x3d"noFilterTipSection" class\x3d"no-filter-tip" style\x3d"display:none;"\x3e\x3c/div\x3e\r\n\t\x3cdiv data-dojo-attach-point\x3d"loading" data-dojo-type\x3d"jimu/dijit/LoadingIndicator" data-dojo-props\x3d"hidden:true"\x3e\x3c/div\x3e\r\n\x3c/div\x3e',
"url:jimu/dijit/templates/_SingleFilter.html":'\x3cdiv\x3e\r\n\t\x3ctable class\x3d"setting-table" cellpadding\x3d"0" cellspacing\x3d"0" cellpadding\x3d"10px" style\x3d"table-layout:fixed;"\x3e\r\n\t\t\x3ctbody\x3e\r\n\t\t\t\x3ctr\x3e\r\n\t\t\t\t\x3ctd class\x3d"fields-td" nowrap\x3e\r\n\t\t\t\t\t\x3cdiv data-dojo-attach-point\x3d"fieldsSelect" data-dojo-type\x3d"dijit/form/FilteringSelect" data-dojo-attach-event\x3d"change:_onFieldsSelectChange"  data-dojo-props\x3d\'searchAttr:"displayName",required:true,intermediateChanges:true\' class\x3d"dijit-form-FilteringSelect" style\x3d"width:100%;"\x3e\x3c/div\x3e\r\n\t\t\t\t\x3c/td\x3e\r\n\t\t\t\t\x3ctd class\x3d"operators-td" nowrap\x3e\r\n\t\t\t\t\t\x3cselect data-dojo-attach-point\x3d"operatorsSelect" data-dojo-type\x3d"dijit/form/Select" data-dojo-attach-event\x3d"change:_onOperatorsSelectChange" style\x3d"width:100%;" class\x3d"dijit-form-Select restrict-select-width"\x3e\r\n\t\t\t\t\t\t\x3coption value\x3d"none"\x3e${nls.none}\x3c/option\x3e\r\n\t\t\t\t\t\x3c/select\x3e\r\n\t\t\t\t\x3c/td\x3e\r\n\t\t\t\t\x3ctd class\x3d"value-td" nowrap\x3e\r\n\t\t\t\t\t\x3cdiv data-dojo-attach-point\x3d"attributeValueContainer" class\x3d"value-container"\x3e\r\n\t\t\t\t\t\t\x3cdiv\x3e\r\n\t\t\t\t\t\t\t\x3cdiv data-dojo-attach-point\x3d"allValueBoxContainer" style\x3d"width:100%;"\x3e\r\n\t\t\t\t\t\t\t\t\x3cdiv data-dojo-attach-point\x3d"stringTextBoxContainer" style\x3d"width:100%;"\x3e\r\n\t\t\t\t\t\t\t\t\t\x3cinput data-dojo-attach-point\x3d"stringTextBox" data-dojo-type\x3d"dijit/form/ValidationTextBox" data-dojo-props\x3d"required:true,trim:true" style\x3d"width:100%;" class\x3d"dijit-form-ValidationTextBox" /\x3e\r\n\r\n\t\t\t\t\t\t\t\t\t\x3cdiv data-dojo-attach-point\x3d"stringCodedValuesFS" data-dojo-type\x3d"dijit/form/FilteringSelect" data-dojo-props\x3d\'searchAttr:"name",required:true,intermediateChanges:true\' class\x3d"dijit-form-FilteringSelect" style\x3d"display:none;width:100%;"\x3e\x3c/div\x3e\r\n\t\t\t\t\t\t\t\t\x3c/div\x3e\r\n\r\n\t\t\t\t\t\t\t\t\x3cdiv data-dojo-attach-point\x3d"numberTextBoxContainer" style\x3d"display:none;"\x3e\r\n\t\t\t\t\t\t\t\t\t\x3cinput data-dojo-attach-point\x3d"numberTextBox" data-dojo-type\x3d"dijit/form/NumberTextBox" data-dojo-props\x3d\'"required":true,intermediateChanges:true,constraints: {pattern: "#####0.##########"}\' class\x3d"dijit-form-NumberTextBox" style\x3d"width:100%;" /\x3e\r\n\r\n\t\t\t\t\t\t\t\t\t\x3ctable data-dojo-attach-point\x3d"numberRangeTable" style\x3d"display:none;width:100%;border-collapse:collapse;table-layout:fixed;" cellpadding\x3d"0" cellspacing\x3d"0"\x3e\r\n\t\t\t\t\t\t\t\t\t\t\x3ctbody\x3e\r\n\t\t\t\t\t\t\t\t\t\t\t\x3ctr\x3e\r\n\t\t\t\t\t\t\t\t\t\t\t\t\x3ctd style\x3d"width:40%;"\x3e\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\x3cinput data-dojo-attach-point\x3d"numberTextBox1" data-dojo-type\x3d"dijit/form/NumberTextBox" data-dojo-attach-event\x3d"blur:_onRangeNumberBlur" data-dojo-props\x3d\'"required":true,intermediateChanges:true,constraints: {pattern: "#####0.##########"}\' class\x3d"dijit-form-NumberTextBox" style\x3d"width:100%;" /\x3e\r\n\t\t\t\t\t\t\t\t\t\t\t\t\x3c/td\x3e\r\n\t\t\t\t\t\t\t\t\t\t\t\t\x3ctd style\x3d"width:20%;text-align:center;"\x3e\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\x3cspan\x3e${nls.and}\x3c/span\x3e\r\n\t\t\t\t\t\t\t\t\t\t\t\t\x3c/td\x3e\r\n\t\t\t\t\t\t\t\t\t\t\t\t\x3ctd style\x3d"width:40%;"\x3e\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\x3cinput data-dojo-attach-point\x3d"numberTextBox2" data-dojo-type\x3d"dijit/form/NumberTextBox" data-dojo-attach-event\x3d"blur:_onRangeNumberBlur" data-dojo-props\x3d\'"required":true,intermediateChanges:true,constraints: {pattern: "#####0.##########"}\' class\x3d"dijit-form-NumberTextBox" style\x3d"width:100%;" /\x3e\r\n\t\t\t\t\t\t\t\t\t\t\t\t\x3c/td\x3e\r\n\t\t\t\t\t\t\t\t\t\t\t\x3c/tr\x3e\r\n\t\t\t\t\t\t\t\t\t\t\x3c/tbody\x3e\r\n\t\t\t\t\t\t\t\t\t\x3c/table\x3e\r\n\r\n\t\t\t\t\t\t\t\t\t\x3cdiv data-dojo-attach-point\x3d"numberCodedValuesFS" data-dojo-type\x3d"dijit/form/FilteringSelect" data-dojo-props\x3d\'searchAttr:"name",required:true,intermediateChanges:true\' class\x3d"dijit-form-FilteringSelect" style\x3d"display:none;width:100%;"\x3e\x3c/div\x3e\r\n\t\t\t\t\t\t\t\t\x3c/div\x3e\r\n\r\n\t\t\t\t\t\t\t\t\x3cdiv data-dojo-attach-point\x3d"dateTextBoxContainer" style\x3d"display:none;"\x3e\r\n\t\t\t\t\t\t\t\t\t\x3cinput data-dojo-attach-point\x3d"dateTextBox" data-dojo-type\x3d"dijit/form/DateTextBox" data-dojo-props\x3d\'value:new Date(),required:true,trim:true\' class\x3d"dijit-form-DateTextBox" style\x3d"width:100%;" /\x3e\r\n\t\t\t\t\t\t\t\t\t\x3ctable data-dojo-attach-point\x3d"dateRangeTable" style\x3d"display:none;width:100%;border-collapse:collapse;table-layout:fixed;" cellpadding\x3d"0" cellspacing\x3d"0"\x3e\r\n\t\t\t\t\t\t\t\t\t\t\x3ctbody\x3e\r\n\t\t\t\t\t\t\t\t\t\t\t\x3ctr\x3e\r\n\t\t\t\t\t\t\t\t\t\t\t\t\x3ctd style\x3d"width:40%;"\x3e\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\x3cinput data-dojo-attach-point\x3d"dateTextBox1" data-dojo-type\x3d"dijit/form/DateTextBox" data-dojo-attach-event\x3d"change:_onRangeDateBlur" data-dojo-props\x3d\'value:new Date(),required:true,trim:true\' class\x3d"dijit-form-DateTextBox" style\x3d"width:100%;" /\x3e\r\n\t\t\t\t\t\t\t\t\t\t\t\t\x3c/td\x3e\r\n\t\t\t\t\t\t\t\t\t\t\t\t\x3ctd style\x3d"width:20%;text-align:center;"\x3e\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\x3cspan\x3e${nls.and}\x3c/span\x3e\r\n\t\t\t\t\t\t\t\t\t\t\t\t\x3c/td\x3e\r\n\t\t\t\t\t\t\t\t\t\t\t\t\x3ctd\x3e\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\x3cinput data-dojo-attach-point\x3d"dateTextBox2" data-dojo-type\x3d"dijit/form/DateTextBox" data-dojo-attach-event\x3d"change:_onRangeDateBlur" data-dojo-props\x3d\'value:new Date(),required:true,trim:true\' class\x3d"dijit-form-DateTextBox" style\x3d"width:100%;" /\x3e\r\n\t\t\t\t\t\t\t\t\t\t\t\t\x3c/td\x3e\r\n\t\t\t\t\t\t\t\t\t\t\t\x3c/tr\x3e\r\n\t\t\t\t\t\t\t\t\t\t\x3c/tbody\x3e\r\n\t\t\t\t\t\t\t\t\t\x3c/table\x3e\r\n\t\t\t\t\t\t\t\t\x3c/div\x3e\r\n\t\t\t\t\t\t\t\x3c/div\x3e\r\n\r\n\t\t\t\t\t\t\t\x3cdiv data-dojo-attach-point\x3d"fieldsSelect2" data-dojo-type\x3d"dijit/form/FilteringSelect" data-dojo-props\x3d\'searchAttr:"name"\' class\x3d"dijit-form-FilteringSelect" style\x3d"display:none;width:100%;"\x3e\r\n\t\t\t\t\t\t\t\x3c/div\x3e\r\n\r\n\t\t\t\t\t\t\t\x3cdiv data-dojo-attach-point\x3d"uniqueValuesSelect" data-dojo-type\x3d"dijit/form/FilteringSelect"  data-dojo-props\x3d\'searchAttr:"label"\' class\x3d"dijit-form-FilteringSelect" style\x3d"display:none;width:100%;"\x3e\r\n\t\t\t\t\t\t\t\x3c/div\x3e\r\n\t\t\t\t\t\t\x3c/div\x3e\r\n\r\n\t\t\t\t\t\t\x3cdiv class\x3d"radio-table-container"\x3e\r\n\t\t\t\t\t\t\t\x3ctable class\x3d"radio-table" cellpadding\x3d"0" cellspacing\x3d"0"\x3e\r\n\t\t\t\t\t\t\t\t\x3ctbody\x3e\r\n\t\t\t\t\t\t\t\t\t\x3ctr\x3e\r\n\t\t\t\t\t\t\t\t\t\t\x3ctd\x3e\r\n\t\t\t\t\t\t\t\t\t\t\t\x3cinput type\x3d"radio" data-dojo-attach-point\x3d"valueRadio" checked\x3d"true" disabled  title\x3d"${nls.valueTooltip}" /\x3e\r\n\t\t\t\t\t\t\t\t\t\t\t\x3clabel data-dojo-attach-point\x3d"valueLabel" title\x3d"${nls.valueTooltip}"\x3e${nls.value}\x3c/label\x3e\r\n\t\t\t\t\t\t\t\t\t\t\x3c/td\x3e\r\n\t\t\t\t\t\t\t\t\t\t\x3ctd\x3e\r\n\t\t\t\t\t\t\t\t\t\t\t\x3cinput type\x3d"radio" data-dojo-attach-point\x3d"fieldRadio" disabled title\x3d"${nls.fieldTooltip}" /\x3e\r\n\t\t\t\t\t\t\t\t\t\t\t\x3clabel data-dojo-attach-point\x3d"fieldLabel" title\x3d"${nls.fieldTooltip}"\x3e${nls.field}\x3c/label\x3e\r\n\t\t\t\t\t\t\t\t\t\t\x3c/td\x3e\r\n\t\t\t\t\t\t\t\t\t\t\x3ctd data-dojo-attach-point\x3d"uniqueTd"\x3e\r\n\t\t\t\t\t\t\t\t\t\t\t\x3cinput type\x3d"radio" data-dojo-attach-point\x3d"uniqueRadio" disabled title\x3d"${nls.uniqueValueTooltip}" /\x3e\r\n\t\t\t\t\t\t\t\t\t\t\t\x3clabel data-dojo-attach-point\x3d"uniqueLabel" title\x3d"${nls.uniqueValueTooltip}"\x3e${nls.unique}\x3c/label\x3e\r\n\t\t\t\t\t\t\t\t\t\t\x3c/td\x3e\r\n\t\t\t\t\t\t\t\t\t\x3c/tr\x3e\r\n\t\t\t\t\t\t\t\t\x3c/tbody\x3e\r\n\t\t\t\t\t\t\t\x3c/table\x3e\r\n\t\t\t\t\t\t\x3c/div\x3e\r\n\t\t\t\t\t\x3c/div\x3e\r\n\t\t\t\t\x3c/td\x3e\r\n\t\t\t\t\x3ctd class\x3d"delete-td" nowrap\x3e\r\n\t\t\t\t\t\x3cdiv class\x3d"jimu-icon jimu-icon-delete" data-dojo-attach-point\x3d"btnDelete"\r\n\t\t\t\t\t data-dojo-attach-event\x3d"click:_destroySelf"\x3e\x3c/div\x3e\r\n\t\t\t\t\x3c/td\x3e\r\n\t\t\t\x3c/tr\x3e\r\n\t\t\x3c/tbody\x3e\r\n\t\x3c/table\x3e\r\n\t\x3cdiv class\x3d"askvalues"\x3e\r\n\t\t\x3cdiv data-dojo-type\x3d"jimu/dijit/CheckBox" data-dojo-attach-point\x3d"cbxAskValues" label\x3d"${nls.askForValues}" class\x3d"jimu-trailing-margin6"\x3e\x3c/div\x3e\r\n\t\t\x3cdiv data-dojo-type\x3d"jimu/dijit/CheckBox" data-dojo-attach-point\x3d"cbxCaseSensitive" label\x3d"${nls.caseSensitive}" style\x3d"display:none;"\x3e\x3c/div\x3e\r\n\t\x3c/div\x3e\r\n\t\x3cdiv data-dojo-attach-point\x3d"promptSection" class\x3d"prompt"\x3e\r\n\t\t\x3ctable data-dojo-attach-point\x3d"promptTable" cellpadding\x3d"0" cellspacing\x3d"0" class\x3d"prompt-table" style\x3d"width:100%;"\x3e\r\n\t\t\t\x3ctbody\x3e\r\n\t\t\t\t\x3ctr\x3e\r\n\t\t\t\t\t\x3ctd class\x3d"first-td"\x3e\r\n\t\t\t\t\t\t\x3cspan\x3e${nls.prompt}\x3c/span\x3e\r\n\t\t\t\t\t\x3c/td\x3e\r\n\t\t\t\t\t\x3ctd class\x3d"second-td"\x3e\r\n\t\t\t\t\t\t\x3cdiv data-dojo-attach-point\x3d"promptTB" data-dojo-type\x3d"dijit/form/ValidationTextBox" data-dojo-props\x3d"required:true,trim:true" style\x3d"width:257px;" class\x3d"dijit-form-ValidationTextBox" \x3e\x3c/div\x3e\r\n\t\t\t\t\t\x3c/td\x3e\r\n\t\t\t\t\x3c/tr\x3e\r\n\t\t\t\t\x3ctr\x3e\r\n\t\t\t\t\t\x3ctd class\x3d"first-td"\x3e\r\n\t\t\t\t\t\t\x3cspan\x3e${nls.hint}\x3c/span\x3e\r\n\t\t\t\t\t\x3c/td\x3e\r\n\t\t\t\t\t\x3ctd class\x3d"second-td"\x3e\r\n\t\t\t\t\t\t\x3cdiv data-dojo-attach-point\x3d"hintTB" data-dojo-type\x3d"dijit/form/ValidationTextBox" data-dojo-props\x3d"trim:true" style\x3d"width:257px;" class\x3d"dijit-form-ValidationTextBox" \x3e\x3c/div\x3e\r\n\t\t\t\t\t\x3c/td\x3e\r\n\t\t\t\t\x3c/tr\x3e\r\n\t\t\t\t\x3ctr data-dojo-attach-point\x3d"cascadeTr" class\x3d"cascade-tr"\x3e\r\n\t\t\t\t\t\x3ctd class\x3d"first-td" colspan\x3d"2"\x3e\r\n\t\t\t\t\t\t\x3cdiv data-dojo-attach-point\x3d"cbxCascade" data-dojo-type\x3d"jimu/dijit/CheckBox"\x3e\x3c/div\x3e\r\n\t\t\t\t\t\x3c/td\x3e\r\n\t\t\t\t\x3c/tr\x3e\r\n\t\t\t\x3c/tbody\x3e\r\n\t\t\x3c/table\x3e\r\n\t\x3c/div\x3e\r\n\x3c/div\x3e',
"url:dijit/templates/Calendar.html":'\x3cdiv class\x3d"dijitCalendarContainer dijitInline" role\x3d"presentation" aria-labelledby\x3d"${id}_mddb ${id}_year"\x3e\r\n\t\x3cdiv class\x3d"dijitReset dijitCalendarMonthContainer" role\x3d"presentation"\x3e\r\n\t\t\x3cdiv class\x3d\'dijitReset dijitCalendarArrow dijitCalendarDecrementArrow\' data-dojo-attach-point\x3d"decrementMonth"\x3e\r\n\t\t\t\x3cimg src\x3d"${_blankGif}" alt\x3d"" class\x3d"dijitCalendarIncrementControl dijitCalendarDecrease" role\x3d"presentation"/\x3e\r\n\t\t\t\x3cspan data-dojo-attach-point\x3d"decreaseArrowNode" class\x3d"dijitA11ySideArrow"\x3e-\x3c/span\x3e\r\n\t\t\x3c/div\x3e\r\n\t\t\x3cdiv class\x3d\'dijitReset dijitCalendarArrow dijitCalendarIncrementArrow\' data-dojo-attach-point\x3d"incrementMonth"\x3e\r\n\t\t\t\x3cimg src\x3d"${_blankGif}" alt\x3d"" class\x3d"dijitCalendarIncrementControl dijitCalendarIncrease" role\x3d"presentation"/\x3e\r\n\t\t\t\x3cspan data-dojo-attach-point\x3d"increaseArrowNode" class\x3d"dijitA11ySideArrow"\x3e+\x3c/span\x3e\r\n\t\t\x3c/div\x3e\r\n\t\t\x3cdiv data-dojo-attach-point\x3d"monthNode" class\x3d"dijitInline"\x3e\x3c/div\x3e\r\n\t\x3c/div\x3e\r\n\t\x3ctable cellspacing\x3d"0" cellpadding\x3d"0" role\x3d"grid" data-dojo-attach-point\x3d"gridNode"\x3e\r\n\t\t\x3cthead\x3e\r\n\t\t\t\x3ctr role\x3d"row"\x3e\r\n\t\t\t\t${!dayCellsHtml}\r\n\t\t\t\x3c/tr\x3e\r\n\t\t\x3c/thead\x3e\r\n\t\t\x3ctbody data-dojo-attach-point\x3d"dateRowsNode" data-dojo-attach-event\x3d"ondijitclick: _onDayClick" class\x3d"dijitReset dijitCalendarBodyContainer"\x3e\r\n\t\t\t\t${!dateRowsHtml}\r\n\t\t\x3c/tbody\x3e\r\n\t\x3c/table\x3e\r\n\t\x3cdiv class\x3d"dijitReset dijitCalendarYearContainer" role\x3d"presentation"\x3e\r\n\t\t\x3cdiv class\x3d"dijitCalendarYearLabel"\x3e\r\n\t\t\t\x3cspan data-dojo-attach-point\x3d"previousYearLabelNode" class\x3d"dijitInline dijitCalendarPreviousYear" role\x3d"button"\x3e\x3c/span\x3e\r\n\t\t\t\x3cspan data-dojo-attach-point\x3d"currentYearLabelNode" class\x3d"dijitInline dijitCalendarSelectedYear" role\x3d"button" id\x3d"${id}_year"\x3e\x3c/span\x3e\r\n\t\t\t\x3cspan data-dojo-attach-point\x3d"nextYearLabelNode" class\x3d"dijitInline dijitCalendarNextYear" role\x3d"button"\x3e\x3c/span\x3e\r\n\t\t\x3c/div\x3e\r\n\t\x3c/div\x3e\r\n\x3c/div\x3e\r\n',
"url:jimu/dijit/templates/_FilterSet.html":'\x3cdiv\x3e\r\n\t\x3ctable class\x3d"header-table" cellspacing\x3d"0" cellpadding\x3d"0"\x3e\r\n\t\t\x3ctbody\x3e\r\n\t\t\t\x3ctr\x3e\r\n\t\t\t\t\x3ctd\x3e\r\n\t\t\t\t\t\x3cdiv\x3e\r\n\t\t\t\t\t\t\x3cspan\x3e${nls.strMatchMsgPart1}\x3c/span\x3e\r\n\t\t\t\t\t\t\x3cselect data-dojo-attach-point\x3d"allAnySelect"\x3e\r\n\t\t\t\t\t\t\t\x3coption value\x3d"AND" selected\x3e${nls.all}\x3c/option\x3e\r\n\t\t\t\t\t\t\t\x3coption value\x3d"OR"\x3e${nls.any}\x3c/option\x3e\r\n\t\t\t\t\t\t\x3c/select\x3e\r\n\t\t\t\t\t\t\x3cspan\x3e${nls.strMatchMsgPart2}\x3c/span\x3e\r\n\t\t\t\t\t\x3c/div\x3e\r\n\t\t\t\t\x3c/td\x3e\r\n\t\t\t\t\x3ctd style\x3d"width:15px;padding-right:10px;"\x3e\r\n\t\t\t\t\t\x3cdiv data-dojo-attach-point\x3d"btnDelete" data-dojo-attach-event\x3d"onclick:_destroySelf"\r\n\t\t\t\t\t class\x3d"jimu-icon jimu-icon-delete"\x3e\x3c/div\x3e\r\n\t\t\t\t\x3c/td\x3e\r\n\t\t\t\t\x3ctd style\x3d"width:15px;padding-right:14px;"\x3e\r\n\t\t\t\t\t\x3cdiv data-dojo-attach-point\x3d"btnAdd" class\x3d"jimu-icon jimu-icon-add"\x3e\x3c/div\x3e\r\n\t\t\t\t\x3c/td\x3e\r\n\t\t\t\x3c/tr\x3e\r\n\t\t\x3c/tbody\x3e\r\n\t\x3c/table\x3e\r\n\t\x3cdiv data-dojo-attach-point\x3d"allExpsBox"\x3e\r\n\t\x3c/div\x3e\r\n\x3c/div\x3e',
"url:widgets/Stream/setting/css/style.css":".jimu-widget-stream-setting{height: 90%; margin-top: 20px;}.jimu-widget-stream-setting .titleContainer{margin-bottom: 12px;}.jimu-widget-stream-setting .checkboxContainer{margin-bottom: 15px;}.jimu-widget-stream-setting .subCheckboxContainer{margin-bottom: 15px; margin-left: 30px;}.jimu-rtl .jimu-widget-stream-setting .subCheckboxContainer{margin-right: 30px; margin-left: auto;}.jimu-widget-stream-setting .filterIcon{background-image: url(images/edit_icon02.png); width: 16px; height: 16px; cursor: pointer; background-repeat: no-repeat; display: inline-block;}.jimu-widget-stream-setting .filterIcon.disabled{background-image: url(images/edit_icon01.png); cursor: default;}.jimu-widget-stream-setting .stream-list{position: absolute; top: 0; left: 0; width: 235px; height: 100%;}.jimu-rtl .jimu-widget-stream-setting .stream-list{left: auto; right: 0;}.jimu-widget-stream-setting .stream-list-content{position: absolute; width: 100%; top: 30px; bottom: 5px; overflow-y: auto;}.jimu-widget-stream-setting .single-stream-container{position: absolute; left: 265px; right: 0; height: 100%; overflow-y: auto;}.jimu-rtl .jimu-widget-stream-setting .single-stream-container{right: 265px; left: 0;}.stream-filter-head{width: 100%; height: 30px;}.stream-filterList{width: 100%; height: 100%;}.stream-filterList-content{position: absolute; width: 250px; top: 40px; bottom: 5px; overflow-y: auto;}.single-filter-container{margin-left: 140px; margin-top: 5px; overflow-y: auto;}.jimu-rtl .single-filter-container{margin-right: 140px; margin-left: auto;}.jimu-widget-stream-filter .mask{position: absolute; top: 0; left: 0; right: 0; bottom: 0; background-color: #FFFFFF; opacity: 0;}.jimu-widget-stream-filter .mask-tip{color: #FF0000;}",
"*now":function(q){q(['dojo/i18n!*preload*widgets/Stream/setting/nls/Setting*["ar","cs","da","de","en","el","es","et","fi","fr","he","hr","it","ja","ko","lt","lv","nb","nl","pl","pt-br","pt-pt","ro","ru","sr","sv","th","tr","zh-cn","vi","zh-hk","zh-tw","ROOT"]'])}}});
define("dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/on dojo/dom-style dojo/dom-class dijit/_TemplatedMixin dijit/_WidgetsInTemplateMixin dojo/text!./Setting.html jimu/BaseWidgetSetting ./utils ./StreamSetting jimu/dijit/SimpleTable jimu/dijit/LoadingShelter".split(" "),function(q,f,n,r,m,e,c,l,b,h,g,a,k){return q([h,c,l],{baseClass:"jimu-widget-stream-setting",templateString:b,postMixInProperties:function(){this.inherited(arguments);f.mixin(this.nls,window.jimuNls.common)},postCreate:function(){this.inherited(arguments);
this.streamList=new k({autoHeight:!1,selectable:!0,fields:[{name:"name",title:this.nls.name,width:"auto",type:"text",editable:!1}]},this.streamList);e.add(this.streamList.domNode,"stream-list-table");m.set(this.streamList.domNode,"height","100%");this.own(r(this.streamList,"row-select",f.hitch(this,this._onStreamLayerSelected)));this.streamList.startup();this.layerList=g.getStreamLayers(this.map);n.forEach(this.layerList,f.hitch(this,function(a,b){var c,e,h=null;c=this.streamList.addRow({name:g.getStreamLayerName(a.url)});
c.success&&(e=c.tr,this.config&&(this.config.streamLayers&&0<this.config.streamLayers.length)&&n.some(this.config.streamLayers,f.hitch(this,function(b){if(b.layerId===a.id)return h=b,!0})),this._createSingleStreamSetting(e,a,h));0===b&&this.streamList.selectRow(e)}))},getConfig:function(){var a,b={streamLayers:[]};n.forEach(this.streamList.getRows(),function(c){a=c.streamLayerSetting;b.streamLayers.push(a.getConfig())});return b},_onStreamLayerSelected:function(a){var b;this.currentTR?this.currentTR!==
a&&((b=this.currentTR.streamLayerSetting)&&m.set(b.domNode,"display","none"),this.currentTR=a,(b=this.currentTR.streamLayerSetting)&&m.set(b.domNode,"display","block")):(this.currentTR=a,(b=this.currentTR.streamLayerSetting)&&m.set(b.domNode,"display","block"))},_createSingleStreamSetting:function(b,c,e){var f=this.streamList.getRowData(b);c=new a({map:this.map,nls:this.nls,config:e,layerName:f?f.name:"",streamLayer:c});c.placeAt(this.singleStreamContainer);b.streamLayerSetting=c;m.set(c.domNode,
"display","none")}})});