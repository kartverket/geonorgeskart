// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See http://@sbaseurl@/jsapi/jsapi/esri/copyright.txt and http://www.arcgis.com/apps/webappbuilder/copyright.txt for details.
//>>built
require({cache:{"jimu/dijit/FilterParameters":function(){define("dojo/on dojo/Evented dojo/Deferred dojo/promise/all dojo/_base/declare dijit/_WidgetBase dijit/_TemplatedMixin dijit/_WidgetsInTemplateMixin dojo/_base/lang dojo/_base/html dojo/_base/array dojo/query dijit/registry jimu/filterUtils jimu/utils ./_SingleFilterParameter ./_filter/ValueProviderFactory".split(" "),function(m,p,g,l,k,h,e,s,a,c,d,t,n,f,q,r,b){return k([h,e,s,p],{baseClass:"jimu-filter-parameters",templateString:'\x3cdiv\x3e\x3ctable style\x3d"width:100%;border-collapse:collapse;"\x3e\x3ctbody data-dojo-attach-point\x3d"tbody"\x3e\x3c/tbody\x3e\x3c/table\x3e\x3c/div\x3e',
_filterUtils:null,_spObj:null,nls:null,partsObj:null,layerInfo:null,OPERATORS:null,url:null,featureLayerId:null,postMixInProperties:function(){this.nls=window.jimuNls.filterBuilder;this._filterUtils=new f;this.OPERATORS=a.clone(this._filterUtils.OPERATORS);this._spObj={}},destroy:function(){this.clear();this._filterUtils=null;this.inherited(arguments)},getFilterExpr:function(){var b=this._getNewValidPartsObj(this.partsObj,!0);return b?this._getFilterExprByPartsObj(b):null},getValueProviders:function(){for(var b=
[],a=this._getAllInteractiveSinglePartArray(this.partsObj),f=0;f<a.length;f++){var c=a[f].spId;c&&(c=this._getSingleFilterParameterBySpId(c),b.push(c))}return b},_getNewValidPartsObj:function(b,f){b=a.clone(b);for(var c={logicalOperator:b.logicalOperator,parts:[]},q=a.hitch(this,function(b){if(b.spId){var a=this._getSingleFilterParameterBySpId(b.spId);b.valueObj=a.getValueObject();return a.getStatus()}return b.valueObj?1:-1}),g=a.hitch(this,function(b){var a=q(b);0<a&&c.parts.push(b);return a}),r=
a.hitch(this,function(b){var f=[];b.parts=d.filter(b.parts,a.hitch(this,function(b){b=q(b);f.push(b);return 0<b}));1===b.parts.length?c.parts.push(b.parts[0]):2<=b.parts.length&&c.parts.push(b);return Math.min.apply(f,f)}),h=0;h<b.parts.length;h++){var e=b.parts[h];if(e.parts){if(0>r(e)&&f)return null}else if(0>g(e)&&f)return null}return c},_getFilterExprByPartsObj:function(b){this._filterUtils.isHosted=q.isHostedService(this.url);return this._filterUtils.getExprByFilterObj(b)},_getSingleFilterParameterBySpId:function(b){var a=
null;return a=this._spObj[b]},_getCascadeFilterExpr:function(b){for(var f="1\x3d1",c={logicalOperator:this.partsObj.logicalOperator,parts:[]},q=a.clone(this.partsObj),g=0;g<q.parts.length;g++){var r=q.parts[g];r.majorCascadeIndex<b.majorCascadeIndex?c.parts.push(r):r.parts&&r.majorCascadeIndex===b.majorCascadeIndex&&(r=a.clone(r),r.parts=d.filter(r.parts,a.hitch(this,function(a){return a.minorCascadeIndex<b.minorCascadeIndex})),c.parts.push(r))}(c=this._getNewValidPartsObj(c,!1))&&(f=this._getFilterExprByPartsObj(c));
f||(f="1\x3d1");return f},clear:function(){this.featureLayerId=this.url=null;var b=t(".jimu-widget-query-single-parameter",this.tbody);d.forEach(b,a.hitch(this,function(b){n.byNode(b).destroy()}));c.empty(this.tbody);this.layerInfo=this.partsObj=null},build:function(f,v,q,h){var e=new g;this.clear();this.url=f;this.layerInfo=v;this.partsObj=a.clone(q);this.featureLayerId=h;this._setCascadeIndexForPartsObj(this.partsObj);f=this._getAllInteractiveSinglePartArray(this.partsObj);if(0<f.length){var n=
new b({nls:this.nls,url:this.url,layerDefinition:v,featureLayerId:this.featureLayerId});f=d.map(f,a.hitch(this,function(b){var f=c.create("tr",{innerHTML:"\x3ctd\x3e\x3c/td\x3e"},this.tbody),f=t("td",f)[0],d=this._getFieldInfo(b.fieldObj.name,this.layerInfo),d=new r({nls:this.nls,url:this.url,layerDefinition:v,fieldInfo:d,part:b,valueProviderFactory:n});this.own(m(d,"change",a.hitch(this,this._onSingleFilterParameterChanged)));d.placeAt(f);d.startup();b.spId=d.id;return this._spObj[d.id]=d}));d.forEach(f,
a.hitch(this,function(b){b.valueProvider.getCascadeFilterExpr=a.hitch(this,this._getCascadeFilterExpr,b.part)}));f=d.map(f,a.hitch(this,function(b){return b.init()}));l(f).then(a.hitch(this,function(){e.resolve()}),a.hitch(this,function(){e.reject()}))}else e.resolve();return e},_setCascadeIndexForPartsObj:function(b){for(var a=0;a<b.parts.length;a++){var f=b.parts[a];f.majorCascadeIndex="AND"===b.logicalOperator?a:0;f.minorCascadeIndex=0;f.cascadeIndex=f.majorCascadeIndex;if(f.parts)for(var c=0;c<
f.parts.length;c++){var d=f.parts[c];d.majorCascadeIndex=f.majorCascadeIndex;d.minorCascadeIndex="AND"===f.logicalOperator?c:0;d.cascadeIndex=parseFloat(d.majorCascadeIndex+"."+d.minorCascadeIndex)}}},_getFieldInfo:function(b,f){for(var a=f.fields,c=0;c<a.length;c++){var d=a[c];if(b===d.name)return d}return null},_getAllInteractiveSinglePartArray:function(b){for(var f=[],a=0;a<b.parts.length;a++){var c=b.parts[a];if(c.parts)for(var d=0;d<c.parts.length;d++){var q=c.parts[d];q.interactiveObj&&f.push(q)}else c.interactiveObj&&
f.push(c)}return f},_onSingleFilterParameterChanged:function(){this.emit("change",this.getFilterExpr(!1))}})})},"jimu/dijit/_SingleFilterParameter":function(){define("dojo/on dojo/Evented dojo/Deferred dojo/_base/declare dijit/_WidgetBase dijit/_TemplatedMixin dijit/_WidgetsInTemplateMixin dojo/text!./templates/_SingleFilterParameter.html dojo/_base/lang".split(" "),function(m,p,g,l,k,h,e,s,a){return l([k,h,e,p],{baseClass:"jimu-single-filter-parameter",templateString:s,valueProvider:null,nls:null,
url:null,layerDefinition:null,fieldInfo:null,part:null,valueProviderFactory:null,postCreate:function(){this.inherited(arguments);this.valueProvider=this.valueProviderFactory.getValueProvider(this.part);this.valueProvider.placeAt(this.valueProviderTd);this.own(m(this.valueProvider,"change",a.hitch(this,this._onValueProviderChanged)));this.valueProvider.bindChangeEvents()},getValueObject:function(){return this.valueProvider.getValueObject()},init:function(){return this.build(this.fieldInfo,this.part)},
build:function(a,d){var e=null;this.fieldInfo=a;this.part=d;if(e=d.interactiveObj)this.promptNode.innerHTML=e.prompt||"",this.hintNode.innerHTML=e.hint||"";e=this.valueProvider.setValueObject(this.part.valueObj);e&&"function"===typeof e.then||(e=new g,e.resolve());return e},disable:function(){this.valueProvider.disable()},enable:function(){this.valueProvider.enable()},isEnabled:function(){return this.valueProvider.isEnabled()},getStatus:function(){return this.valueProvider.getStatus()},_showValidationErrorTip:function(a){!a.validate()&&
a.domNode&&a.focusNode&&(a.focusNode.focus(),a.focusNode.blur())},_onValueProviderChanged:function(){this.emit("change")}})})},"jimu/dijit/_filter/ValueProviderFactory":function(){define("dojo/_base/lang dojo/_base/declare ./SimpleValueProvider ./TwoNumbersValueProvider ./TwoDatesValueProvider ./ListValueProvider jimu/LayerInfos/LayerInfos".split(" "),function(m,p,g,l,k,h,e){var s={stringOperatorIs:{value:{normal:"SIMPLE_VALUE_PROVIDER",codedValue:"LIST_VALUE_PROVIDER"},unique:{normal:"LIST_VALUE_PROVIDER"}},
stringOperatorIsNot:{value:{normal:"SIMPLE_VALUE_PROVIDER"},unique:{normal:"LIST_VALUE_PROVIDER"}},stringOperatorStartsWith:{value:{normal:"SIMPLE_VALUE_PROVIDER"}},stringOperatorEndsWith:{value:{normal:"SIMPLE_VALUE_PROVIDER"}},stringOperatorContains:{value:{normal:"SIMPLE_VALUE_PROVIDER"}},stringOperatorDoesNotContain:{value:{normal:"SIMPLE_VALUE_PROVIDER"}},stringOperatorIsBlank:null,stringOperatorIsNotBlank:null,numberOperatorIs:{value:{normal:"SIMPLE_VALUE_PROVIDER",codedValue:"LIST_VALUE_PROVIDER"},
unique:{normal:"LIST_VALUE_PROVIDER"}},numberOperatorIsNot:{value:{normal:"SIMPLE_VALUE_PROVIDER"},unique:{normal:"LIST_VALUE_PROVIDER"}},numberOperatorIsAtLeast:{value:{normal:"SIMPLE_VALUE_PROVIDER"},unique:{normal:"LIST_VALUE_PROVIDER"}},numberOperatorIsLessThan:{value:{normal:"SIMPLE_VALUE_PROVIDER"},unique:{normal:"LIST_VALUE_PROVIDER"}},numberOperatorIsAtMost:{value:{normal:"SIMPLE_VALUE_PROVIDER"},unique:{normal:"LIST_VALUE_PROVIDER"}},numberOperatorIsGreaterThan:{value:{normal:"SIMPLE_VALUE_PROVIDER"},
unique:{normal:"LIST_VALUE_PROVIDER"}},numberOperatorIsBetween:{value:{normal:"TWO_NUMBERS_VALUE_PROVIDER"}},numberOperatorIsNotBetween:{value:{normal:"TWO_NUMBERS_VALUE_PROVIDER"}},numberOperatorIsBlank:null,numberOperatorIsNotBlank:null,dateOperatorIsOn:{value:{normal:"SIMPLE_VALUE_PROVIDER"}},dateOperatorIsNotOn:{value:{normal:"SIMPLE_VALUE_PROVIDER"}},dateOperatorIsBefore:{value:{normal:"SIMPLE_VALUE_PROVIDER"}},dateOperatorIsAfter:{value:{normal:"SIMPLE_VALUE_PROVIDER"}},dateOperatorIsBetween:{value:{normal:"TWO_DATES_VALUE_PROVIDER"}},
dateOperatorIsNotBetween:{value:{normal:"TWO_DATES_VALUE_PROVIDER"}},dateOperatorIsBlank:null,dateOperatorIsNotBlank:null};return p([],{nls:null,url:null,layerDefinition:null,layerInfo:null,featureLayerId:null,constructor:function(a){m.mixin(this,a);a=e.getInstanceSync();this.featureLayerId&&(this.layerInfo=a.getLayerOrTableInfoById(this.featureLayerId))},getValueProvider:function(a){var c=null,d=a.operator,e=s[d];if(e){var n=a.valueObj.type,f=this._getFieldInfo(this.layerDefinition,a.fieldObj.name),
q=this._getCodedValues(f),n=e[n],e=n.normal;q&&n.codedValue&&(e=n.codedValue);a={nls:this.nls,url:this.url,layerDefinition:this.layerDefinition,partObj:a,fieldInfo:f,codedValues:q,layerInfo:this.layerInfo};"SIMPLE_VALUE_PROVIDER"===e?c=new g(a):"TWO_NUMBERS_VALUE_PROVIDER"===e?c=new l(a):"TWO_DATES_VALUE_PROVIDER"===e?c=new k(a):"LIST_VALUE_PROVIDER"===e&&(a.showNullValues="stringOperatorIs"===d||"stringOperatorIsNot"===d||"numberOperatorIs"===d||"numberOperatorIsNot"===d?!0:!1,c=new h(a))}else console.error("Invalid operator: "+
d);return c},_getFieldInfo:function(a,c){for(var d=a.fields,e=0;e<d.length;e++){var g=d[e];if(c===g.name)return g}return null},_getCodedValues:function(a){var c=null;if((a=a.domain)&&"codedValue"===a.type&&a.codedValues&&0<a.codedValues.length)c=a.codedValues;return c}})})},"jimu/dijit/_filter/SimpleValueProvider":function(){define("dojo/_base/html dojo/_base/declare ./ValueProvider dijit/form/ValidationTextBox dijit/form/DateTextBox dijit/form/NumberTextBox".split(" "),function(m,p,g,l,k,h){return p([g],
{templateString:"\x3cdiv\x3e\x3c/div\x3e",_dijit:null,postCreate:function(){this.inherited(arguments);m.addClass(this.domNode,"jimu-filter-simple-value-provider");this._dijit="string"===this.shortType?new l({required:!1,trim:!0}):"number"===this.shortType?new h({required:!1,intermediateChanges:!0,constraints:{pattern:"#####0.##########"}}):new k({required:!1,trim:!0,value:new Date});m.setStyle(this._dijit.domNode,"width","100%");this._dijit.placeAt(this.domNode)},getDijits:function(){return[this._dijit]},
setValueObject:function(e){"date"===this.shortType?this._dijit.set("value",new Date(e.value)):this._dijit.set("value",e.value)},getValueObject:function(){if(this.isValidValue()){var e=this._dijit.get("value");"date"===this.shortType?e=e.toDateString():"number"===this.shortType&&(e=parseFloat(e));return{isValid:!0,type:this.partObj.valueObj.type,value:e}}return null}})})},"jimu/dijit/_filter/ValueProvider":function(){define("dojo/on dojo/Evented dojo/_base/lang dojo/_base/html dojo/_base/array dojo/_base/declare dijit/_WidgetBase dijit/_TemplatedMixin jimu/utils".split(" "),
function(m,p,g,l,k,h,e,s,a){return h([e,s,p],{baseClass:"jimu-filter-value-provider",codedValues:null,fieldName:null,shortType:null,_enabled:!1,cascade:!1,nls:null,url:null,layerDefinition:null,fieldInfo:null,partObj:null,layerInfo:null,postMixInProperties:function(){this.inherited(arguments);this.shortType=this.partObj.fieldObj.shortType;this.fieldName=this.partObj.fieldObj.name;this.cascade=this.partObj.interactiveObj&&this.partObj.interactiveObj.cascade},getDijits:function(){return[]},bindChangeEvents:function(){var a=
this.getDijits();k.forEach(a,g.hitch(this,function(a){a.declaredClass&&0===a.declaredClass.indexOf("dijit.")&&l.addClass(a.domNode,a.declaredClass.replace(/\./g,"-"));this.own(m(a,"change",g.hitch(this,this._onChanged)))}))},_onChanged:function(){this.emit("change")},tryLocaleNumber:function(c){var d=a.localizeNumber(c);if(null===d||void 0===d)d=c;return d},getPartObject:function(){var a=this.getValueObject();if(!a)return null;var d=g.clone(this.partObj);d.valueObj=a;return d},setValueObject:function(){},
getValueObject:function(){},getStatus:function(){var a=1,d=this.getDijits();0<d.length&&(a=k.map(d,g.hitch(this,function(a){return this.getStatusForDijit(a)})),a=Math.min.apply(a,a));return a},getStatusForDijit:function(a){return a.validate()?a.get("DisplayedValue")?1:0:-1},isInvalidValue:function(){return 0>this.getStatus()},isEmptyValue:function(){return 0===this.getStatus()},isValidValue:function(){return 0<this.getStatus()},getFilterExpr:function(){var a="1\x3d1",a=this.getLayerFilterExpr();if(this.cascade)var d=
this.getCascadeFilterExpr(),a="("+a+") AND ("+d+")";return a},getLayerFilterExpr:function(){var a="1\x3d1";this.layerInfo&&(a=this.layerInfo.getFilter());a||(a="1\x3d1");return a},getCascadeFilterExpr:function(){return"1\x3d1"},disable:function(){this._enabled=!1},enable:function(){this._enabled=!0},isEnabled:function(){return this._enabled}})})},"dijit/form/DateTextBox":function(){define(["dojo/_base/declare","../Calendar","./_DateTimeTextBox"],function(m,p,g){return m("dijit.form.DateTextBox",g,
{baseClass:"dijitTextBox dijitComboBox dijitDateTextBox",popupClass:p,_selector:"date",maxHeight:Infinity,value:new Date("")})})},"dijit/Calendar":function(){define("dojo/_base/array dojo/date dojo/date/locale dojo/_base/declare dojo/dom-attr dojo/dom-class dojo/dom-construct dojo/_base/kernel dojo/keys dojo/_base/lang dojo/on dojo/sniff ./CalendarLite ./_Widget ./_CssStateMixin ./_TemplatedMixin ./form/DropDownButton".split(" "),function(m,p,g,l,k,h,e,s,a,c,d,t,n,f,q,r,b){var u=l("dijit.Calendar",
[n,f,q],{baseClass:"dijitCalendar",cssStateNodes:{decrementMonth:"dijitCalendarArrow",incrementMonth:"dijitCalendarArrow",previousYearLabelNode:"dijitCalendarPreviousYear",nextYearLabelNode:"dijitCalendarNextYear"},setValue:function(b){s.deprecated("dijit.Calendar:setValue() is deprecated.  Use set('value', ...) instead.","","2.0");this.set("value",b)},_createMonthWidget:function(){return new u._MonthDropDownButton({id:this.id+"_mddb",tabIndex:-1,onMonthSelect:c.hitch(this,"_onMonthSelect"),lang:this.lang,
dateLocaleModule:this.dateLocaleModule},this.monthNode)},postCreate:function(){this.inherited(arguments);this.own(d(this.domNode,"keydown",c.hitch(this,"_onKeyDown")),d(this.dateRowsNode,"mouseover",c.hitch(this,"_onDayMouseOver")),d(this.dateRowsNode,"mouseout",c.hitch(this,"_onDayMouseOut")),d(this.dateRowsNode,"mousedown",c.hitch(this,"_onDayMouseDown")),d(this.dateRowsNode,"mouseup",c.hitch(this,"_onDayMouseUp")))},_onMonthSelect:function(b){var a=new this.dateClassObj(this.currentFocus);a.setDate(1);
a.setMonth(b);b=this.dateModule.getDaysInMonth(a);var f=this.currentFocus.getDate();a.setDate(Math.min(f,b));this._setCurrentFocusAttr(a)},_onDayMouseOver:function(b){if((b=h.contains(b.target,"dijitCalendarDateLabel")?b.target.parentNode:b.target)&&(b.dijitDateValue&&!h.contains(b,"dijitCalendarDisabledDate")||b==this.previousYearLabelNode||b==this.nextYearLabelNode))h.add(b,"dijitCalendarHoveredDate"),this._currentNode=b},_onDayMouseOut:function(b){this._currentNode&&!(b.relatedTarget&&b.relatedTarget.parentNode==
this._currentNode)&&(b="dijitCalendarHoveredDate",h.contains(this._currentNode,"dijitCalendarActiveDate")&&(b+=" dijitCalendarActiveDate"),h.remove(this._currentNode,b),this._currentNode=null)},_onDayMouseDown:function(b){if((b=b.target.parentNode)&&b.dijitDateValue&&!h.contains(b,"dijitCalendarDisabledDate"))h.add(b,"dijitCalendarActiveDate"),this._currentNode=b},_onDayMouseUp:function(b){(b=b.target.parentNode)&&b.dijitDateValue&&h.remove(b,"dijitCalendarActiveDate")},handleKey:function(b){var f=
-1,d,c=this.currentFocus;switch(b.keyCode){case a.RIGHT_ARROW:f=1;case a.LEFT_ARROW:d="day";this.isLeftToRight()||(f*=-1);break;case a.DOWN_ARROW:f=1;case a.UP_ARROW:d="week";break;case a.PAGE_DOWN:f=1;case a.PAGE_UP:d=b.ctrlKey||b.altKey?"year":"month";break;case a.END:c=this.dateModule.add(c,"month",1),d="day";case a.HOME:c=new this.dateClassObj(c);c.setDate(1);break;default:return!0}d&&(c=this.dateModule.add(c,d,f));this._setCurrentFocusAttr(c);return!1},_onKeyDown:function(b){this.handleKey(b)||
(b.stopPropagation(),b.preventDefault())},onValueSelected:function(){},onChange:function(b){this.onValueSelected(b)},getClassForDate:function(){}});u._MonthDropDownButton=l("dijit.Calendar._MonthDropDownButton",b,{onMonthSelect:function(){},postCreate:function(){this.inherited(arguments);this.dropDown=new u._MonthDropDown({id:this.id+"_mdd",onChange:this.onMonthSelect})},_setMonthAttr:function(b){var a=this.dateLocaleModule.getNames("months","wide","standAlone",this.lang,b);this.dropDown.set("months",
a);this.containerNode.innerHTML=(6==t("ie")?"":"\x3cdiv class\x3d'dijitSpacer'\x3e"+this.dropDown.domNode.innerHTML+"\x3c/div\x3e")+"\x3cdiv class\x3d'dijitCalendarMonthLabel dijitCalendarCurrentMonthLabel'\x3e"+a[b.getMonth()]+"\x3c/div\x3e"}});u._MonthDropDown=l("dijit.Calendar._MonthDropDown",[f,r,q],{months:[],baseClass:"dijitCalendarMonthMenu dijitMenu",templateString:"\x3cdiv data-dojo-attach-event\x3d'ondijitclick:_onClick'\x3e\x3c/div\x3e",_setMonthsAttr:function(b){this.domNode.innerHTML=
"";m.forEach(b,function(b,a){e.create("div",{className:"dijitCalendarMonthLabel",month:a,innerHTML:b},this.domNode)._cssState="dijitCalendarMonthLabel"},this)},_onClick:function(b){this.onChange(k.get(b.target,"month"))},onChange:function(){}});return u})},"dijit/CalendarLite":function(){define("dojo/_base/array dojo/_base/declare dojo/cldr/supplemental dojo/date dojo/date/locale dojo/date/stamp dojo/dom dojo/dom-class dojo/_base/lang dojo/on dojo/sniff dojo/string ./_WidgetBase ./_TemplatedMixin dojo/text!./templates/Calendar.html ./a11yclick ./hccss".split(" "),
function(m,p,g,l,k,h,e,s,a,c,d,t,n,f,q){var r=p("dijit.CalendarLite",[n,f],{templateString:q,dowTemplateString:'\x3cth class\x3d"dijitReset dijitCalendarDayLabelTemplate" role\x3d"columnheader" scope\x3d"col"\x3e\x3cspan class\x3d"dijitCalendarDayLabel"\x3e${d}\x3c/span\x3e\x3c/th\x3e',dateTemplateString:'\x3ctd class\x3d"dijitReset" role\x3d"gridcell" data-dojo-attach-point\x3d"dateCells"\x3e\x3cspan class\x3d"dijitCalendarDateLabel" data-dojo-attach-point\x3d"dateLabels"\x3e\x3c/span\x3e\x3c/td\x3e',
weekTemplateString:'\x3ctr class\x3d"dijitReset dijitCalendarWeekTemplate" role\x3d"row"\x3e${d}${d}${d}${d}${d}${d}${d}\x3c/tr\x3e',value:new Date(""),datePackage:"",dayWidth:"narrow",tabIndex:"0",dayOffset:-1,currentFocus:new Date,_setSummaryAttr:"gridNode",baseClass:"dijitCalendar dijitCalendarLite",_isValidDate:function(b){return b&&!isNaN(b)&&"object"==typeof b&&b.toString()!=this.constructor.prototype.value.toString()},_getValueAttr:function(){var b=this._get("value");if(b&&!isNaN(b)){var a=
new this.dateClassObj(b);a.setHours(0,0,0,0);a.getDate()<b.getDate()&&(a=this.dateModule.add(a,"hour",1));return a}return null},_setValueAttr:function(b,a){"string"==typeof b&&(b=h.fromISOString(b));b=this._patchDate(b);if(this._isValidDate(b)&&!this.isDisabledDate(b,this.lang)){if(this._set("value",b),this.set("currentFocus",b),this._markSelectedDates([b]),this._created&&(a||"undefined"==typeof a))this.onChange(this.get("value"))}else this._set("value",null),this._markSelectedDates([])},_patchDate:function(b){b&&
(b=new this.dateClassObj(b),b.setHours(1,0,0,0));return b},_setText:function(b,a){for(;b.firstChild;)b.removeChild(b.firstChild);b.appendChild(b.ownerDocument.createTextNode(a))},_populateGrid:function(){var b=new this.dateClassObj(this.currentFocus);b.setDate(1);var b=this._patchDate(b),a=b.getDay(),f=this.dateModule.getDaysInMonth(b),d=this.dateModule.getDaysInMonth(this.dateModule.add(b,"month",-1)),c=new this.dateClassObj,e=0<=this.dayOffset?this.dayOffset:g.getFirstDayOfWeek(this.lang);e>a&&
(e-=7);if(!this.summary){var q=this.dateLocaleModule.getNames("months","wide","standAlone",this.lang,b);this.gridNode.setAttribute("summary",q[b.getMonth()])}this._date2cell={};m.forEach(this.dateCells,function(q,r){var g=r+e,h=new this.dateClassObj(b),n="dijitCalendar",k=0;g<a?(g=d-a+g+1,k=-1,n+="Previous"):g>=a+f?(g=g-a-f+1,k=1,n+="Next"):(g=g-a+1,n+="Current");k&&(h=this.dateModule.add(h,"month",k));h.setDate(g);this.dateModule.compare(h,c,"date")||(n="dijitCalendarCurrentDate "+n);this.isDisabledDate(h,
this.lang)?(n="dijitCalendarDisabledDate "+n,q.setAttribute("aria-disabled","true")):(n="dijitCalendarEnabledDate "+n,q.removeAttribute("aria-disabled"),q.setAttribute("aria-selected","false"));(k=this.getClassForDate(h,this.lang))&&(n=k+" "+n);q.className=n+"Month dijitCalendarDateTemplate";n=h.valueOf();this._date2cell[n]=q;q.dijitDateValue=n;this._setText(this.dateLabels[r],h.getDateLocalized?h.getDateLocalized(this.lang):h.getDate())},this)},_populateControls:function(){var b=new this.dateClassObj(this.currentFocus);
b.setDate(1);this.monthWidget.set("month",b);var a=b.getFullYear()-1,f=new this.dateClassObj;m.forEach(["previous","current","next"],function(b){f.setFullYear(a++);this._setText(this[b+"YearLabelNode"],this.dateLocaleModule.format(f,{selector:"year",locale:this.lang}))},this)},goToToday:function(){this.set("value",new this.dateClassObj)},constructor:function(b){this.dateModule=b.datePackage?a.getObject(b.datePackage,!1):l;this.dateClassObj=this.dateModule.Date||Date;this.dateLocaleModule=b.datePackage?
a.getObject(b.datePackage+".locale",!1):k},_createMonthWidget:function(){return r._MonthWidget({id:this.id+"_mddb",lang:this.lang,dateLocaleModule:this.dateLocaleModule},this.monthNode)},buildRendering:function(){var b=this.dowTemplateString,a=this.dateLocaleModule.getNames("days",this.dayWidth,"standAlone",this.lang),f=0<=this.dayOffset?this.dayOffset:g.getFirstDayOfWeek(this.lang);this.dayCellsHtml=t.substitute([b,b,b,b,b,b,b].join(""),{d:""},function(){return a[f++%7]});b=t.substitute(this.weekTemplateString,
{d:this.dateTemplateString});this.dateRowsHtml=[b,b,b,b,b,b].join("");this.dateCells=[];this.dateLabels=[];this.inherited(arguments);e.setSelectable(this.domNode,!1);b=new this.dateClassObj(this.currentFocus);this.monthWidget=this._createMonthWidget();this.set("currentFocus",b,!1)},postCreate:function(){this.inherited(arguments);this._connectControls()},_connectControls:function(){var b=a.hitch(this,function(b,f,d){this[b].dojoClick=!0;return c(this[b],"click",a.hitch(this,function(){this._setCurrentFocusAttr(this.dateModule.add(this.currentFocus,
f,d))}))});this.own(b("incrementMonth","month",1),b("decrementMonth","month",-1),b("nextYearLabelNode","year",1),b("previousYearLabelNode","year",-1))},_setCurrentFocusAttr:function(b,a){var f=this.currentFocus,c=this._getNodeByDate(f);b=this._patchDate(b);this._set("currentFocus",b);if(!this._date2cell||0!=this.dateModule.difference(f,b,"month"))this._populateGrid(),this._populateControls(),this._markSelectedDates([this.value]);f=this._getNodeByDate(b);f.setAttribute("tabIndex",this.tabIndex);(this.focused||
a)&&f.focus();c&&c!=f&&(d("webkit")?c.setAttribute("tabIndex","-1"):c.removeAttribute("tabIndex"))},focus:function(){this._setCurrentFocusAttr(this.currentFocus,!0)},_onDayClick:function(b){b.stopPropagation();b.preventDefault();for(b=b.target;b&&!b.dijitDateValue;b=b.parentNode);b&&!s.contains(b,"dijitCalendarDisabledDate")&&this.set("value",b.dijitDateValue)},_getNodeByDate:function(b){return(b=this._patchDate(b))&&this._date2cell?this._date2cell[b.valueOf()]:null},_markSelectedDates:function(b){function f(b,
a){s.toggle(a,"dijitCalendarSelectedDate",b);a.setAttribute("aria-selected",b?"true":"false")}m.forEach(this._selectedCells||[],a.partial(f,!1));this._selectedCells=m.filter(m.map(b,this._getNodeByDate,this),function(b){return b});m.forEach(this._selectedCells,a.partial(f,!0))},onChange:function(){},isDisabledDate:function(){},getClassForDate:function(){}});r._MonthWidget=p("dijit.CalendarLite._MonthWidget",n,{_setMonthAttr:function(b){var a=this.dateLocaleModule.getNames("months","wide","standAlone",
this.lang,b),f=6==d("ie")?"":"\x3cdiv class\x3d'dijitSpacer'\x3e"+m.map(a,function(b){return"\x3cdiv\x3e"+b+"\x3c/div\x3e"}).join("")+"\x3c/div\x3e";this.domNode.innerHTML=f+"\x3cdiv class\x3d'dijitCalendarMonthLabel dijitCalendarCurrentMonthLabel'\x3e"+a[b.getMonth()]+"\x3c/div\x3e"}});return r})},"dijit/form/_DateTimeTextBox":function(){define("dojo/date dojo/date/locale dojo/date/stamp dojo/_base/declare dojo/_base/lang ./RangeBoundTextBox ../_HasDropDown dojo/text!./templates/DropDownBox.html".split(" "),
function(m,p,g,l,k,h,e,s){new Date("X");return l("dijit.form._DateTimeTextBox",[h,e],{templateString:s,hasDownArrow:!0,cssStateNodes:{_buttonNode:"dijitDownArrowButton"},_unboundedConstraints:{},pattern:p.regexp,datePackage:"",postMixInProperties:function(){this.inherited(arguments);this._set("type","text")},compare:function(a,c){var d=this._isInvalidDate(a),e=this._isInvalidDate(c);if(d||e)return d&&e?0:!d?1:-1;var d=this.format(a,this._unboundedConstraints),e=this.format(c,this._unboundedConstraints),
g=this.parse(d,this._unboundedConstraints),f=this.parse(e,this._unboundedConstraints);return d==e?0:m.compare(g,f,this._selector)},autoWidth:!0,format:function(a,c){return!a?"":this.dateLocaleModule.format(a,c)},parse:function(a,c){return this.dateLocaleModule.parse(a,c)||(this._isEmpty(a)?null:void 0)},serialize:function(a,c){a.toGregorian&&(a=a.toGregorian());return g.toISOString(a,c)},dropDownDefaultValue:new Date,value:new Date(""),_blankValue:null,popupClass:"",_selector:"",constructor:function(a){a=
a||{};this.dateModule=a.datePackage?k.getObject(a.datePackage,!1):m;this.dateClassObj=this.dateModule.Date||Date;this.dateClassObj instanceof Date||(this.value=new this.dateClassObj(this.value));this.dateLocaleModule=a.datePackage?k.getObject(a.datePackage+".locale",!1):p;this._set("pattern",this.dateLocaleModule.regexp);this._invalidDate=this.constructor.prototype.value.toString()},buildRendering:function(){this.inherited(arguments);this.hasDownArrow||(this._buttonNode.style.display="none");this.hasDownArrow||
(this._buttonNode=this.domNode,this.baseClass+=" dijitComboBoxOpenOnClick")},_setConstraintsAttr:function(a){a.selector=this._selector;a.fullYear=!0;var c=g.fromISOString;"string"==typeof a.min&&(a.min=c(a.min),this.dateClassObj instanceof Date||(a.min=new this.dateClassObj(a.min)));"string"==typeof a.max&&(a.max=c(a.max),this.dateClassObj instanceof Date||(a.max=new this.dateClassObj(a.max)));this.inherited(arguments);this._unboundedConstraints=k.mixin({},this.constraints,{min:null,max:null})},_isInvalidDate:function(a){return!a||
isNaN(a)||"object"!=typeof a||a.toString()==this._invalidDate},_setValueAttr:function(a,c,d){void 0!==a&&("string"==typeof a&&(a=g.fromISOString(a)),this._isInvalidDate(a)&&(a=null),a instanceof Date&&!(this.dateClassObj instanceof Date)&&(a=new this.dateClassObj(a)));this.inherited(arguments,[a,c,d]);this.value instanceof Date&&(this.filterString="");!1!==c&&this.dropDown&&this.dropDown.set("value",a,!1)},_set:function(a,c){if("value"==a){c instanceof Date&&!(this.dateClassObj instanceof Date)&&
(c=new this.dateClassObj(c));var d=this._get("value");if(d instanceof this.dateClassObj&&0==this.compare(c,d))return}this.inherited(arguments)},_setDropDownDefaultValueAttr:function(a){this._isInvalidDate(a)&&(a=new this.dateClassObj);this._set("dropDownDefaultValue",a)},openDropDown:function(a){this.dropDown&&this.dropDown.destroy();var c=k.isString(this.popupClass)?k.getObject(this.popupClass,!1):this.popupClass,d=this,e=this.get("value");this.dropDown=new c({onChange:function(a){d.set("value",
a,!0)},id:this.id+"_popup",dir:d.dir,lang:d.lang,value:e,textDir:d.textDir,currentFocus:!this._isInvalidDate(e)?e:this.dropDownDefaultValue,constraints:d.constraints,filterString:d.filterString,datePackage:d.datePackage,isDisabledDate:function(a){return!d.rangeCheck(a,d.constraints)}});this.inherited(arguments)},_getDisplayedValueAttr:function(){return this.textbox.value},_setDisplayedValueAttr:function(a,c){this._setValueAttr(this.parse(a,this.constraints),c,a)}})})},"jimu/dijit/_filter/TwoNumbersValueProvider":function(){define("dojo/_base/html dojo/_base/declare ./ValueProvider dijit/_TemplatedMixin dijit/_WidgetsInTemplateMixin dojo/text!./TwoNumbersValueProvider.html dijit/form/NumberTextBox".split(" "),
function(m,p,g,l,k,h){return p([g,l,k],{templateString:h,postCreate:function(){this.inherited(arguments);m.addClass(this.domNode,"jimu-two-numbers-filter-value-provider")},_onRangeNumberBlur:function(){if(this._dijit1.validate()&&this._dijit2.validate()){var e=parseFloat(this._dijit1.get("value")),g=parseFloat(this._dijit2.get("value"));e>g&&(this._dijit1.set("value",g),this._dijit2.set("value",e))}},getDijits:function(){return[this._dijit1,this._dijit2]},setValueObject:function(e){this._dijit1.set("value",
e.value1);this._dijit2.set("value",e.value2)},getValueObject:function(){return this.isValidValue()?{isValid:!0,type:this.partObj.valueObj.type,value1:parseFloat(this._dijit1.get("value")),value2:parseFloat(this._dijit2.get("value"))}:null}})})},"jimu/dijit/_filter/TwoDatesValueProvider":function(){define("dojo/_base/html dojo/_base/declare ./ValueProvider dijit/_TemplatedMixin dijit/_WidgetsInTemplateMixin dojo/text!./TwoDatesValueProvider.html dijit/form/DateTextBox".split(" "),function(m,p,g,l,
k,h){return p([g,l,k],{templateString:h,postCreate:function(){this.inherited(arguments);m.addClass(this.domNode,"jimu-two-dates-filter-value-provider")},_onRangeDateBlur:function(){if(this._dijit1.validate()&&this._dijit2.validate()){var e=this._dijit1.get("value"),g=e.getTime(),a=this._dijit2.get("value"),c=a.getTime();g>c&&(this._dijit1.set("value",a),this._dijit2.set("value",e))}},getDijits:function(){return[this._dijit1,this._dijit2]},setValueObject:function(e){this._dijit1.set("value",new Date(e.value1));
this._dijit2.set("value",new Date(e.value2))},getValueObject:function(){return this.isValidValue()?{isValid:!0,type:this.partObj.valueObj.type,value1:this._dijit1.get("value").toDateString(),value2:this._dijit2.get("value").toDateString()}:null}})})},"jimu/dijit/_filter/ListValueProvider":function(){define("dojo/aspect dojo/Deferred dojo/_base/lang dojo/_base/html dojo/_base/array dojo/_base/declare ./ValueProvider dijit/_TemplatedMixin dijit/_WidgetsInTemplateMixin dojo/text!./ListValueProvider.html dojo/store/Memory jimu/utils dijit/form/FilteringSelect".split(" "),
function(m,p,g,l,k,h,e,s,a,c,d,t){return h([e,s,a],{templateString:c,codedValues:null,showNullValues:!1,postCreate:function(){this.inherited(arguments);l.addClass(this.domNode,"jimu-filter-list-value-provider");this._uniqueValueCache={};var a=new d({idProperty:"id",data:[]});this.valuesSelect.set("store",a);!this.codedValues&&"function"===typeof this.valuesSelect._onDropDownMouseDown&&this.own(m.before(this.valuesSelect,"_onDropDownMouseDown",g.hitch(this,this._onBeforeDropDownMouseDown)))},_onBeforeDropDownMouseDown:function(){this._tryUpdatingUniqueValues(void 0,
!0);return arguments},getDijits:function(){return[this.valuesSelect]},setValueObject:function(a){return this.codedValues?this._setValueForCodedValues(a.value):this._tryUpdatingUniqueValues(a.value,!1)},getValueObject:function(){return this.isValidValue()?{isValid:!0,type:"unique",value:this.valuesSelect.get("item").value}:null},_setValueForCodedValues:function(a){var f=null,c=-1,f=null;this.codedValues&&(f=k.map(this.codedValues,g.hitch(this,function(f,b){var d={id:b,value:f.code,label:f.name};d.value===
a&&(c=b);return d})),this.valuesSelect.store.setData(f),0<=c&&(f=this.valuesSelect.store.get(c))&&this.valuesSelect.set("item",f))},_uniqueValueLoadingDef:null,_uniqueValueLoadingExpr:"",_uniqueValueCache:null,_tryUpdatingUniqueValues:function(a,f){var c=new p;if(this.valuesSelect._opened)c.resolve();else{var d=this.getFilterExpr();d!==this._uniqueValueLoadingExpr?(this.valuesSelect.readOnly=!0,this._uniqueValueLoadingDef&&(this._uniqueValueLoadingDef.reject(),this._uniqueValueLoadingDef=null),this._uniqueValueLoadingExpr=
d,this._uniqueValueLoadingDef=this._getUniqueValues(d),this._uniqueValueLoadingDef.then(g.hitch(this,function(b){this.domNode&&(this._uniqueValueLoadingDef=null,this.valuesSelect.readOnly=!1,this._setValueForUniqueValues(a,b),this._hideLoadingIcon(),f&&this.valuesSelect.toggleDropDown(),c.resolve())}),g.hitch(this,function(b){this.domNode&&(this._uniqueValueLoadingDef=null,this.valuesSelect.readOnly=!1,this._hideLoadingIcon(),c.reject(b))}))):c.resolve()}return c},_setValueForUniqueValues:function(a,
f){this.showNullValues||(f=k.filter(f,g.hitch(this,function(b){return"\x3cNull\x3e"!==b&&null!==b})));if(void 0===a){var c=this.getValueObject();c&&(a=c.value)}var d=-1,c=null,b=k.map(f,g.hitch(this,function(b,f){var c=b;"number"===this.shortType&&"\x3cNull\x3e"!==b&&(b=parseFloat(b),c=this.tryLocaleNumber(b));c={id:f,value:b,label:c};b===a&&(d=f);return c}));this.valuesSelect.store.setData(b);0<=d&&(c=this.valuesSelect.store.get(d));this.valuesSelect.set("item",c)},_showLoadingIcon:function(){l.addClass(this.valuesSelect.domNode,
"loading")},_hideLoadingIcon:function(){l.removeClass(this.valuesSelect.domNode,"loading")},_getUniqueValues:function(a){var f=new p;this._uniqueValueCache[a]?f.resolve(this._uniqueValueCache[a]):(this._showLoadingIcon(),t.getUniqueValues(this.url,this.fieldName,a).then(g.hitch(this,function(c){this.domNode&&(this._uniqueValueCache[a]=c,f.resolve(c),this._hideLoadingIcon())}),g.hitch(this,function(a){this.domNode&&(f.reject(a),this._hideLoadingIcon())})));return f}})})},"dijit/form/FilteringSelect":function(){define(["dojo/_base/declare",
"dojo/_base/lang","dojo/when","./MappedTextBox","./ComboBoxMixin"],function(m,p,g,l,k){return m("dijit.form.FilteringSelect",[l,k],{required:!0,_lastDisplayedValue:"",_isValidSubset:function(){return this._opened},isValid:function(){return!!this.item||!this.required&&""==this.get("displayedValue")},_refreshState:function(){this.searchTimer||this.inherited(arguments)},_callbackSetLabel:function(g,e,k,a){e&&e[this.searchAttr]!==this._lastQuery||!e&&g.length&&this.store.getIdentity(g[0])!=this._lastQuery||
(g.length?this.set("item",g[0],a):this.set("value","",a||void 0===a&&!this.focused,this.textbox.value,null))},_openResultList:function(g,e,k){e[this.searchAttr]===this._lastQuery&&(this.inherited(arguments),void 0===this.item&&this.validate(!0))},_getValueAttr:function(){return this.valueNode.value},_getValueField:function(){return"value"},_setValueAttr:function(h,e,k,a){this._onChangeActive||(e=null);if(void 0===a){if(null===h||""===h)if(h="",!p.isString(k)){this._setDisplayedValueAttr(k||"",e);
return}var c=this;this._lastQuery=h;g(this.store.get(h),function(a){c._callbackSetLabel(a?[a]:[],void 0,void 0,e)})}else this.valueNode.value=h,this.inherited(arguments,[h,e,k,a])},_setItemAttr:function(g,e,k){this.inherited(arguments);this._lastDisplayedValue=this.textbox.value},_getDisplayQueryString:function(g){return g.replace(/([\\\*\?])/g,"\\$1")},_setDisplayedValueAttr:function(h,e){null==h&&(h="");if(!this._created){if(!("displayedValue"in this.params))return;e=!1}if(this.store){this.closeDropDown();
var k=p.clone(this.query),a=this._getDisplayQueryString(h),c;this.store._oldAPI?c=a:(c=this._patternToRegExp(a),c.toString=function(){return a});this._lastQuery=k[this.searchAttr]=c;this._lastDisplayedValue=this.textbox.value=h;this._set("displayedValue",h);var d=this,l={queryOptions:{ignoreCase:this.ignoreCase,deep:!0}};p.mixin(l,this.fetchProperties);this._fetchHandle=this.store.query(k,l);g(this._fetchHandle,function(a){d._fetchHandle=null;d._callbackSetLabel(a||[],k,l,e)},function(a){d._fetchHandle=
null;d._cancelingQuery||console.error("dijit.form.FilteringSelect: "+a.toString())})}},undo:function(){this.set("displayedValue",this._lastDisplayedValue)}})})},"dojo/NodeList":function(){define(["./query"],function(m){return m.NodeList})},"widgets/Filter/_build-generate_module":function(){define(["dojo/text!./Widget.html","dojo/text!./css/style.css","dojo/i18n!./nls/strings"],function(){})},"url:jimu/dijit/templates/_SingleFilterParameter.html":'\x3cdiv\x3e\r\n  \x3ctable style\x3d"width:100%;"\x3e\r\n    \x3ctbody\x3e\r\n      \x3ctr class\x3d"first-tr"\x3e\r\n        \x3ctd\x3e\r\n          \x3cdiv class\x3d"prompt" data-dojo-attach-point\x3d"promptNode"\x3e\x3c/div\x3e\r\n        \x3c/td\x3e\r\n      \x3c/tr\x3e\r\n      \x3ctr class\x3d"second-tr"\x3e\r\n        \x3ctd data-dojo-attach-point\x3d"valueProviderTd"\x3e\r\n        \x3c/td\x3e\r\n      \x3c/tr\x3e\r\n      \x3ctr class\x3d"third-tr"\x3e\r\n        \x3ctd\x3e\r\n          \x3cdiv class\x3d"hint" data-dojo-attach-point\x3d"hintNode"\x3e\x3c/div\x3e\r\n        \x3c/td\x3e\r\n      \x3c/tr\x3e\r\n    \x3c/tbody\x3e\r\n  \x3c/table\x3e\r\n\x3c/div\x3e',
"url:dijit/templates/Calendar.html":'\x3cdiv class\x3d"dijitCalendarContainer dijitInline" role\x3d"presentation" aria-labelledby\x3d"${id}_mddb ${id}_year"\x3e\r\n\t\x3cdiv class\x3d"dijitReset dijitCalendarMonthContainer" role\x3d"presentation"\x3e\r\n\t\t\x3cdiv class\x3d\'dijitReset dijitCalendarArrow dijitCalendarDecrementArrow\' data-dojo-attach-point\x3d"decrementMonth"\x3e\r\n\t\t\t\x3cimg src\x3d"${_blankGif}" alt\x3d"" class\x3d"dijitCalendarIncrementControl dijitCalendarDecrease" role\x3d"presentation"/\x3e\r\n\t\t\t\x3cspan data-dojo-attach-point\x3d"decreaseArrowNode" class\x3d"dijitA11ySideArrow"\x3e-\x3c/span\x3e\r\n\t\t\x3c/div\x3e\r\n\t\t\x3cdiv class\x3d\'dijitReset dijitCalendarArrow dijitCalendarIncrementArrow\' data-dojo-attach-point\x3d"incrementMonth"\x3e\r\n\t\t\t\x3cimg src\x3d"${_blankGif}" alt\x3d"" class\x3d"dijitCalendarIncrementControl dijitCalendarIncrease" role\x3d"presentation"/\x3e\r\n\t\t\t\x3cspan data-dojo-attach-point\x3d"increaseArrowNode" class\x3d"dijitA11ySideArrow"\x3e+\x3c/span\x3e\r\n\t\t\x3c/div\x3e\r\n\t\t\x3cdiv data-dojo-attach-point\x3d"monthNode" class\x3d"dijitInline"\x3e\x3c/div\x3e\r\n\t\x3c/div\x3e\r\n\t\x3ctable cellspacing\x3d"0" cellpadding\x3d"0" role\x3d"grid" data-dojo-attach-point\x3d"gridNode"\x3e\r\n\t\t\x3cthead\x3e\r\n\t\t\t\x3ctr role\x3d"row"\x3e\r\n\t\t\t\t${!dayCellsHtml}\r\n\t\t\t\x3c/tr\x3e\r\n\t\t\x3c/thead\x3e\r\n\t\t\x3ctbody data-dojo-attach-point\x3d"dateRowsNode" data-dojo-attach-event\x3d"ondijitclick: _onDayClick" class\x3d"dijitReset dijitCalendarBodyContainer"\x3e\r\n\t\t\t\t${!dateRowsHtml}\r\n\t\t\x3c/tbody\x3e\r\n\t\x3c/table\x3e\r\n\t\x3cdiv class\x3d"dijitReset dijitCalendarYearContainer" role\x3d"presentation"\x3e\r\n\t\t\x3cdiv class\x3d"dijitCalendarYearLabel"\x3e\r\n\t\t\t\x3cspan data-dojo-attach-point\x3d"previousYearLabelNode" class\x3d"dijitInline dijitCalendarPreviousYear" role\x3d"button"\x3e\x3c/span\x3e\r\n\t\t\t\x3cspan data-dojo-attach-point\x3d"currentYearLabelNode" class\x3d"dijitInline dijitCalendarSelectedYear" role\x3d"button" id\x3d"${id}_year"\x3e\x3c/span\x3e\r\n\t\t\t\x3cspan data-dojo-attach-point\x3d"nextYearLabelNode" class\x3d"dijitInline dijitCalendarNextYear" role\x3d"button"\x3e\x3c/span\x3e\r\n\t\t\x3c/div\x3e\r\n\t\x3c/div\x3e\r\n\x3c/div\x3e\r\n',
"url:jimu/dijit/_filter/TwoNumbersValueProvider.html":'\x3cdiv\x3e\r\n\t\x3ctable data-dojo-attach-point\x3d"numberRangeTable" style\x3d"width:100%;border-collapse:collapse;" cellpadding\x3d"0" cellspacing\x3d"0"\x3e\r\n\t\t\x3ctbody\x3e\r\n\t\t\t\x3ctr\x3e\r\n\t\t\t\t\x3ctd style\x3d"width:40%;"\x3e\r\n\t\t\t\t\t\x3cinput data-dojo-attach-point\x3d"_dijit1" data-dojo-type\x3d"dijit/form/NumberTextBox" data-dojo-attach-event\x3d"blur:_onRangeNumberBlur" data-dojo-props\x3d\'"required":false,intermediateChanges:true,constraints: {pattern: "#####0.##########"}\' style\x3d"width:100%;" /\x3e\r\n\t\t\t\t\x3c/td\x3e\r\n\t\t\t\t\x3ctd style\x3d"width:20%;text-align:center;"\x3e\r\n\t\t\t\t\t\x3cspan\x3e${nls.and}\x3c/span\x3e\r\n\t\t\t\t\x3c/td\x3e\r\n\t\t\t\t\x3ctd style\x3d"width:40%;"\x3e\r\n\t\t\t\t\t\x3cinput data-dojo-attach-point\x3d"_dijit2" data-dojo-type\x3d"dijit/form/NumberTextBox" data-dojo-attach-event\x3d"blur:_onRangeNumberBlur" data-dojo-props\x3d\'"required":false,intermediateChanges:true,constraints: {pattern: "#####0.##########"}\' style\x3d"width:100%;" /\x3e\r\n\t\t\t\t\x3c/td\x3e\r\n\t\t\t\x3c/tr\x3e\r\n\t\t\x3c/tbody\x3e\r\n\t\x3c/table\x3e\r\n\x3c/div\x3e',
"url:jimu/dijit/_filter/TwoDatesValueProvider.html":'\x3cdiv\x3e\r\n\t\x3ctable data-dojo-attach-point\x3d"dateRangeTable" style\x3d"width:100%;border-collapse:collapse;" cellpadding\x3d"0" cellspacing\x3d"0"\x3e\r\n\t\t\x3ctbody\x3e\r\n\t\t\t\x3ctr\x3e\r\n\t\t\t\t\x3ctd style\x3d"width:40%;"\x3e\r\n\t\t\t\t\t\x3cinput data-dojo-attach-point\x3d"_dijit1" data-dojo-type\x3d"dijit/form/DateTextBox" data-dojo-attach-event\x3d"change:_onRangeDateBlur" data-dojo-props\x3d\'value:new Date(),required:false,trim:true\' style\x3d"width:100%;" /\x3e\r\n\t\t\t\t\x3c/td\x3e\r\n\t\t\t\t\x3ctd style\x3d"width:20%;text-align:center;"\x3e\r\n\t\t\t\t\t\x3cspan\x3e${nls.and}\x3c/span\x3e\r\n\t\t\t\t\x3c/td\x3e\r\n\t\t\t\t\x3ctd\x3e\r\n\t\t\t\t\t\x3cinput data-dojo-attach-point\x3d"_dijit2" data-dojo-type\x3d"dijit/form/DateTextBox" data-dojo-attach-event\x3d"change:_onRangeDateBlur" data-dojo-props\x3d\'value:new Date(),required:false,trim:true\' style\x3d"width:100%;" /\x3e\r\n\t\t\t\t\x3c/td\x3e\r\n\t\t\t\x3c/tr\x3e\r\n\t\t\x3c/tbody\x3e\r\n\t\x3c/table\x3e\r\n\x3c/div\x3e',
"url:jimu/dijit/_filter/ListValueProvider.html":'\x3cdiv\x3e\r\n  \x3cdiv data-dojo-attach-point\x3d"valuesSelect" data-dojo-type\x3d"dijit/form/FilteringSelect" data-dojo-props\x3d\'searchAttr:"label",required:false,intermediateChanges:true\' style\x3d"width:100%;"\x3e\x3c/div\x3e\r\n\x3c/div\x3e',"url:widgets/Filter/Widget.html":'\x3cdiv\x3e\r\n  \x3cul class\x3d"filter-list" data-dojo-attach-point\x3d"filterList"\x3e\x3c/ul\x3e\r\n\x3c/div\x3e',"url:widgets/Filter/css/style.css":".jimu-widget-filter {width: 100%; height: 100%; position: relative;}.jimu-widget-filter .filter-list,.jimu-widget-filter .filter-list li {margin: 0; padding: 0;}.jimu-widget-filter .filter-list li {list-style: none;}.jimu-widget-filter .filter-list .filter-item{border-bottom: 1px solid #d7d7d7; font-size: 12px; color: #000; overflow: hidden;}.jimu-widget-filter .filter-list .filter-item .header{vertical-align: middle; padding-top: 12px; padding-bottom: 12px; min-height: 40px; cursor: pointer; position: relative;}.jimu-widget-filter .filter-list .filter-item .header:hover{background-color: #eee;}.jimu-widget-filter .filter-list .filter-item.config-parameters .header .item-title{font-family: 'Avenir Medium', Verdana, Geneva, sans-serif;}.jimu-widget-filter .filter-list .filter-item .body{display: none;}.jimu-widget-filter .filter-list .filter-item.config-parameters .body{display: block;}.jimu-widget-filter .filter-list .filter-item .header\x3e*{display: inline-block; vertical-align: middle; word-break: break-word;}.jimu-widget-filter .filter-list .filter-item .header\x3e.icon{vertical-align: top;}.jimu-widget-filter .filter-list .filter-item .header:after{content: \"\"; height: 100%; min-height: 16px; vertical-align: top; display: inline-block;}.jimu-widget-filter .filter-list .filter-item .header .icon{width: 16px; height: 16px;}.jimu-widget-filter .filter-list .filter-item .header .icon img{width: 100%; height: 100%;}.jimu-widget-filter .filter-list .filter-item .header .setting,.jimu-widget-filter .filter-list .filter-item .header .done{width: 16px; min-height: 16px; display: none; position: absolute; top: 12px;}.jimu-widget-filter .filter-list .filter-item .header .done{right: 0px;}.jimu-rtl .jimu-widget-filter .filter-list .filter-item .header .done{right: auto; left: 0px;}.jimu-widget-filter .filter-list .filter-item .header .setting{background: url('./images/setting_normal.svg') no-repeat center; z-index: 10; right: 22px;}.jimu-widget-filter .filter-list .filter-item .header .setting:hover{background: url('./images/setting_hover.svg') no-repeat center;}.jimu-rtl .jimu-widget-filter .filter-list .filter-item .header .setting{right: auto; left: 22px;}.jimu-widget-filter .filter-list .filter-item .header:hover .setting,.jimu-widget-filter .filter-list .filter-item.config-parameters .setting{display: block;}.jimu-widget-filter .filter-list .filter-item .header:hover .setting{background-color: #eee;}.jimu-widget-filter .filter-list .filter-item .header .done,.jimu-widget-filter .filter-list .filter-item .header .setting{-webkit-animation: none; -moz-animation: none; -ms-animation: none; -o-animation: none; animation: none; -webkit-transform: none; -moz-transform: none; -ms-transform: none; -o-transform: none; transform: none;}.jimu-widget-filter .filter-list .filter-item .header .done{background: url('./images/done.svg') no-repeat center;}@-webkit-keyframes load8 {0% {-webkit-transform: rotate(0deg); transform: rotate(0deg);} 100% {-webkit-transform: rotate(360deg); transform: rotate(360deg);}}@-moz-keyframes load8 {0% {-moz-transform: rotate(0deg); transform: rotate(0deg);} 100% {-moz-transform: rotate(360deg); transform: rotate(360deg);}}@-ms-keyframes load8 {0% {-ms-transform: rotate(0deg); transform: rotate(0deg);} 100% {-ms-transform: rotate(360deg); transform: rotate(360deg);}}@keyframes load8 {0% {-webkit-transform: rotate(0deg); -ms-transform: rotate(0deg); -moz-transform: rotate(0deg); transform: rotate(0deg);} 100% {-webkit-transform: rotate(360deg); -ms-transform: rotate(360deg); -moz-transform: rotate(360deg); transform: rotate(360deg);}}.jimu-widget-filter .filter-list .filter-item.applying .header .done,.jimu-widget-filter .filter-list .filter-item.requesting .header .setting{content: ''; border-radius: 50%; position: absolute; width: 16px; height: 16px; top: 12px; text-indent: -9999em; background: none; border-top: 2.2px solid #d6d6d6; border-right: 2.2px solid #d6d6d6; border-bottom: 2.2px solid #d6d6d6; border-left: 2.2px solid #4A4A4A; -webkit-animation: load8 1.1s infinite linear; -moz-animation: load8 1.1s infinite linear; -ms-animation: load8 1.1s infinite linear; -o-animation: load8 1.1s infinite linear; animation: load8 1.1s infinite linear; -webkit-transform: translateZ(0); -moz-transform: translateZ(0); -ms-transform: translateZ(0); -o-transform: translateZ(0); transform: translateZ(0);}.jimu-widget-filter .filter-list .filter-item.applying .header .done,.jimu-widget-filter .filter-list .filter-item.applied .header .done,.jimu-widget-filter .filter-list .filter-item.requesting .header .setting{display: block;}.jimu-widget-filter .filter-list .filter-item .body .parameters{margin: 0 30px;}.jimu-widget-filter .filter-list .filter-item .body .jimu-btn{background: #fff; border-radius: 0; width: 82px; border: 1px solid #c7c7c7; color: #000; font-size: 12px; margin-bottom: 15px;}.jimu-widget-filter .filter-list .filter-item .body .jimu-btn:hover{border: 1px solid #000;}.jimu-widget-filter .jimu-loading-shelter .loading-container{width: auto;}",
"*now":function(m){m(['dojo/i18n!*preload*widgets/Filter/nls/Widget*["ar","cs","da","de","en","el","es","et","fi","fr","he","hr","it","ja","ko","lt","lv","nb","nl","pl","pt-br","pt-pt","ro","ru","sr","sv","th","tr","zh-cn","vi","zh-hk","zh-tw","ROOT"]'])}}});
define("dojo/_base/declare dojo/_base/array dojo/_base/html dojo/_base/lang dojo/query dojo/on dijit/_WidgetsInTemplateMixin jimu/BaseWidget jimu/filterUtils jimu/dijit/FilterParameters jimu/LayerInfos/LayerInfos jimu/FilterManager esri/request dojo/NodeList dojo/NodeList-dom".split(" "),function(m,p,g,l,k,h,e,s,a,c,d,t,n){return m([s,e],{name:"Filter",baseClass:"jimu-widget-filter",_itemTemplate:'\x3cli class\x3d"filter-item" data-index\x3d"${index}"\x3e\x3cdiv class\x3d"header jimu-leading-padding1" \x3e\x3cspan class\x3d"icon jimu-trailing-margin05"\x3e\x3cimg src\x3d"${icon}" /\x3e\x3c/span\x3e\x3cspan class\x3d"item-title"\x3e${title}\x3c/span\x3e\x3cspan class\x3d"done jimu-float-trailing jimu-leading-margin1"\x3e\x3c/span\x3e\x3cspan class\x3d"setting jimu-float-trailing" title\x3d"${toggleTip}" style\x3d"display:${hasValue}"\x3e\x3c/span\x3e\x3c/div\x3e\x3cdiv class\x3d"body"\x3e\x3cdiv class\x3d"parameters"\x3e\x3c/div\x3e\x3cspan class\x3d"jimu-btn apply jimu-float-trailing jimu-trailing-margin25"\x3e${apply}\x3c/span\x3e\x3c/div\x3e\x3c/li\x3e',
_store:null,postCreate:function(){this.inherited(arguments);this._store={};this.layerInfosObj=d.getInstanceSync();this.filterUtils=new a;this.filterManager=t.getInstance();p.forEach(this.config.filters,function(a,c){var d=this.filterUtils.isAskForValues(a.filter),d={icon:a.icon?a.icon:this.folderUrl+"/css/images/default_task_icon.png",index:c,title:a.name,toggleTip:this.nls.toggleTip,hasValue:d?window.appInfo.isRunInMobile?"block !important":"":"none",isAskForValue:d,apply:l.getObject("jimuNls.common.apply",
!1,window)||"Apply"};this._store[a.layerId]||(this._store[a.layerId]={mapFilterControls:{}});var b=l.replace(this._itemTemplate,d,/\$\{([^\}]+)\}/ig),b=g.toDom(b);g.place(b,this.filterList);this.own(k(".header",b).on("click",l.hitch(this,"enableFilter",b,a,d)));"none"!==d.hasValue&&(this.own(k(".setting",b).on("click",l.hitch(this,"configFilter",b,a))),this.own(k(".apply",b).on("click",l.hitch(this,"applyFilterValues",b,a))),g.addClass(b,"requesting"),this.configFilter(b,a))},this)},startup:function(){this.inherited(arguments);
this.resize()},_getPriorityOfMapFilter:function(a){a=l.getObject(a+".mapFilterControls",!1,this._store);var c=0,d;for(d in a){var b=a[d];b.priority>c&&(c=b.priority)}return c},_getMapFilterControl:function(a){a=l.getObject(a+".mapFilterControls",!1,this._store);var c=!0,d;for(d in a){var b=a[d];0<b.priority&&(c=!!b.enable)}return c},_setItemFilter:function(a,c,d,b){this._store[a]["filter_item_"+c]=d;d=this._getPriorityOfMapFilter(a);l.setObject(a+".mapFilterControls.filter_item_"+c,{enable:b,priority:d+
1},this._store)},_removeItemFilter:function(a,c){delete this._store[a]["filter_item_"+c];delete this._store[a].mapFilterControls["filter_item_"+c]},_getExpr:function(a){if(!this._store[a])return null;var c=[];a=this._store[a];for(var d in a){var b=a[d];b&&"mapFilterControls"!==d&&c.push("("+b+")")}return c.join(" AND ")},_bindMapUpdateEvents:function(a,c){h.once(this.map,"update-start",l.hitch(this,function(){g.addClass(a,"applying")}));h.once(this.map,"update-end",l.hitch(this,function(){c?g.addClass(a,
"applied"):g.removeClass(a,"applied");g.removeClass(a,"applying")}))},enableFilter:function(a,c,d){if(!g.hasClass(a,"config-parameters")||a.filterParams&&a.filterParams.getFilterExpr())if(d.isAskForValue&&(!a.filterParams||!a.filterParams.getFilterExpr()))this.configFilter(a,c);else{d=c.layerId;var b=g.getAttr(a,"data-index"),e=null,h=this.layerInfosObj.getLayerInfoById(d),e=g.hasClass(a,"applied");h.isShowInMap()&&h.isInScale()?this._bindMapUpdateEvents(a,!e?!0:!1):e?g.removeClass(a,"applied"):g.addClass(a,
"applied");h=null;e?this._removeItemFilter(d,b):this._setItemFilter(d,b,a.filterParams?a.filterParams.getFilterExpr():c.filter.expr,c.enableMapFilter);e=this._getExpr(d);h=this._getMapFilterControl(d);this.filterManager.applyWidgetFilter(d,this.id,e,h)}},configFilter:function(a,d,e){a.filterParams?g.hasClass(a,"config-parameters")?(g.removeClass(a,"config-parameters"),this._changeItemTitleWidth(a,window.appInfo.isRunInMobile?60:45)):(g.addClass(a,"config-parameters"),this._changeItemTitleWidth(a,
60)):n({url:d.url,content:{f:"json"},handleAs:"json",callbackPrams:"callback"}).then(l.hitch(this,function(b){g.addClass(a,"config-parameters");g.removeClass(a,"requesting");var e=k(".parameters",a)[0];a.handles=[];a.filterParams=new c;var m=l.clone(d.filter);a.filterParams.build(d.url,b,m);this.own(h(a.filterParams,"change",l.hitch(this,function(b){b?(k(".apply",a).removeClass("disable-apply"),a.expr=b):(delete a.expr,k(".apply",a).addClass("disable-apply"))})));a.expr=a.filterParams.getFilterExpr();
a.expr?k(".apply",a).removeClass("disable-apply"):(delete a.expr,k(".apply",a).addClass("disable-apply"));a.filterParams.placeAt(e);this._changeItemTitleWidth(a,60)}));e&&e.target&&e.stopPropagation()},applyFilterValues:function(a,c,d){var b=a.filterParams&&(a.expr||a.filterParams.getFilterExpr());if(b){a.expr=b;var b=c.layerId,e=g.getAttr(a,"data-index"),h=this.layerInfosObj.getLayerInfoById(b);h.isShowInMap()&&h.isInScale()?this._bindMapUpdateEvents(a,!0):g.addClass(a,"applied");this._setItemFilter(b,
e,a.expr,c.enableMapFilter);a=this._getExpr(b);c=this._getMapFilterControl(b);this.filterManager.applyWidgetFilter(b,this.id,a,c)}d.stopPropagation()},resize:function(){this.inherited(arguments);this._changeItemTitleWidth(this.domNode,window.appInfo.isRunInMobile?60:45)},_changeItemTitleWidth:function(a,c){var d=k(".header",a)[0];d&&(d=g.getContentBox(d).w-c,0<d&&k(".header .item-title",a).style({maxWidth:d+"px"}))},destroy:function(){k(".filter-item",this.filterList).forEach(function(a){delete a.filterParams;
delete a.expr});if(this._store)for(var a in this._store)a&&this.filterManager.applyWidgetFilter(a,this.id,"",null);this.inherited(arguments)}})});