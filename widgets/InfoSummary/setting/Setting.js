// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See http://@sbaseurl@/jsapi/jsapi/esri/copyright.txt and http://www.arcgis.com/apps/webappbuilder/copyright.txt for details.
//>>built
require({cache:{"widgets/InfoSummary/setting/MySymbolPicker":function(){define("dojo/_base/declare dijit/_WidgetsInTemplateMixin dijit/form/Select dijit/form/ValidationTextBox dojo/_base/lang dojo/_base/html dojo/dom-style dojo/dom-construct dojo/on dojo/dom dojox/gfx dojo/query dojo/_base/Color dijit/registry esri/symbols/jsonUtils esri/request esri/Color jimu/dijit/SymbolPicker jimu/BaseWidget jimu/dijit/TabContainer3 jimu/utils jimu/dijit/SimpleTable jimu/dijit/Message jimu/dijit/ColorPicker dojo/_base/array esri/symbols/SimpleMarkerSymbol esri/symbols/SimpleLineSymbol esri/symbols/PictureMarkerSymbol dojo/text!./MySymbolPicker.html dojo/Evented".split(" "),
function(k,u,v,y,n,e,r,p,s,z,w,x,A,B,m,H,C,E,l,F,q,t,h,G,D,a,c,f,d,g){return k([l,u,g],{templateString:d,baseClass:"jimu-widget-InfoSummary-setting",nls:null,row:null,layerInfo:null,clusteringEnabled:null,symbolInfo:null,symbolType:"",map:null,supportsDynamic:!0,tabContainer:null,field_options:[],groupFeaturesEnabled:!1,lyrSymbolSet:[],_highLightColor:"#ffffff",panelHTML:null,svg:null,constructor:function(b){this.nls=b.nls;this.row=b.callerRow;this.layerInfo=b.layerInfo;this.renderer=b.layerInfo.renderer;
this.geometryType=b.layerInfo.geometryType;this.symbolInfo=b.symbolInfo;this.map=b.map;this.ac=b.ac;this.layerId=b.value;this.supportsDynamic=b.layerInfo.supportsDynamic;this.fields=b.layerInfo.fields;this.hidePanel=b.hidePanel},postMixInProperties:function(){this.inherited(arguments);this.nls.common=window.jimuNls.common},postCreate:function(){this.inherited(arguments);this._setFields(this.fields);this._initTabControl();this._initSymbolPickerTab(this.geometryType);this._initFeatureOptionsTab();this.hidePanel?
(e.removeClass(this.btnAddField,"btn-add-section"),e.addClass(this.btnAddField,"btn-add-section-disabled"),e.addClass(this.iconOptionsTextLabel,"text-disabled"),e.addClass(this.featureOptionsTextLabel,"text-disabled"),e.addClass(this.groupOptionsTextLabel,"text-disabled"),e.addClass(this.chkGroupLabel,"text-disabled"),e.addClass(this.rdoLayerIconLabel,"text-disabled"),e.addClass(this.rdoCustomIconLabel,"text-disabled")):(this.own(s(this.btnAddField,"click",n.hitch(this,this._addFieldRow,this.fieldOptionsTable,
"loSelect"))),e.removeClass(this.btnAddField,"btn-add-section-disabled"),e.addClass(this.btnAddField,"btn-add-section"),e.removeClass(this.iconOptionsTextLabel,"text-disabled"),e.removeClass(this.featureOptionsTextLabel,"text-disabled"),e.removeClass(this.groupOptionsTextLabel,"text-disabled"),e.removeClass(this.chkGroupLabel,"text-disabled"),e.removeClass(this.rdoLayerIconLabel,"text-disabled"),e.removeClass(this.rdoCustomIconLabel,"text-disabled"));this.chkGroup.set("disabled",this.hidePanel);this.rdoLayerIcon.set("disabled",
this.hidePanel);this.rdoCustomIcon.set("disabled",this.hidePanel)},_setFields:function(b){if(b){this.field_options=[];for(var a=[""," ",void 0,null],d=0;d<b.length;d++)this.field_options.push({value:b[d].name,label:-1===a.indexOf(b[d].alias)?b[d].alias:b[d].name})}},_initTabControl:function(){this.tabContainer=new F({tabs:[{title:this.nls.symbolOptions,content:this.symbolPickerContainer},{title:this.nls.panelFeatureDisplay,content:this.panelFeatureDisplayContainer}],isNested:!0},this.tabParent);this.tabContainer.startup()},
_initSymbolPickerTab:function(b){b=q.getTypeByGeometryType(b);this._loadLayerSymbol();this.supportsDynamic&&this._initSymbolPicker(b);this._initClusterSymbolPicker(b);this._addEventHandlers(b);this._initUI()},_initFeatureOptionsTab:function(){this.isInitalLoad=!0;this.fieldLoadCount=0;this.fieldOptionsTable=new t({fields:[{name:"field",title:this.nls.selectField,"class":"label",type:"empty",width:"100px"},{name:"label","class":"label",title:this.nls.fieldLabel,type:"empty",width:"100px"},{name:"actions",
"class":"label",title:this.nls.actions,type:"actions",actions:["up","down","delete"],width:"50px"}],selectable:!1,autoHeight:!0});this.fieldOptionsTable.placeAt(this.fieldOptions);this.fieldOptionsTable.startup();this.fieldOptionsTable.on("row-delete",n.hitch(this,this._rowDeleted));this.groupOptionsTable=new t({fields:[{name:"field",title:this.nls.selectField,"class":"label",type:"empty",width:"160px"},{name:"label","class":"label",title:this.nls.fieldLabel,type:"empty",width:"160px"}],selectable:!1,
autoHeight:!0});this.groupOptionsTable.placeAt(this.groupFieldOptions);this.groupOptionsTable.startup();if(this.symbolInfo&&this.symbolInfo.featureDisplayOptions&&this.symbolInfo.featureDisplayOptions.fields){var b=this.symbolInfo.featureDisplayOptions;this.groupFeaturesEnabled=b.groupEnabled;this.chkGroup.set("checked",this.groupFeaturesEnabled);for(var a=0;a<b.fields.length;a++)this._populateLayerRow(this.fieldOptionsTable,b.fields[a],"loSelect");this._populateLayerRow(this.groupOptionsTable,b.groupField,
"goSelect")}else this._addFieldRow(this.groupOptionsTable,"goSelect");this.isInitalLoad=!1},_rowDeleted:function(b){3>this.fieldOptionsTable.getRows().length&&(e.removeClass(this.btnAddField,"btn-add-section-disabled"),e.addClass(this.btnAddField,"btn-add-section"))},_populateLayerRow:function(b,a,d){this.fieldLoadCount+=1;b=b.addRow({});b.success&&b.tr&&(b=b.tr,this._addFieldsOption(b,d),this._addLabelOption(b),b.selectFields.set("value",a.name),b.labelText.set("value",a.label))},_addFieldRow:function(b,
a){if(b===this.fieldOptionsTable&&3<=b.getRows().length)e.removeClass(this.btnAddField,"btn-add-section"),e.addClass(this.btnAddField,"btn-add-section-disabled"),new h({message:this.nls.max_records});else{this.isInitalLoad=!1;var d=b.addRow({});d.success&&d.tr&&(d=d.tr,this._addFieldsOption(d,a),this._addLabelOption(d))}},_addFieldsOption:function(b,a){var d=n.clone(this.field_options),c=x(".simple-table-cell",b)[0];c&&(e.setStyle(c,"verticalAlign","middle"),e.setStyle(c,"line-height","inherit"),
d=new v({style:{width:"100%",height:"28px"},"class":a,options:d}),d.placeAt(c),d.startup(),b.selectFields=d,this.own(s(d,"change",n.hitch(this,function(){this.fieldLoadCount&&0<this.fieldLoadCount?this.fieldLoadCount-=1:b.labelText.set("value","");b.cells[0].title=b.cells[0].innerText}))),b.cells[0].title=b.cells[0].innerText)},_addLabelOption:function(b){var a=x(".simple-table-cell",b)[1];e.setStyle(a,"verticalAlign","middle");e.setStyle(a,"line-height","inherit");var d=new y({style:{width:"100%",
height:"28px"}});d.placeAt(a);d.startup();b.labelText=d},_initUI:function(){if("undefined"!==typeof this.symbolInfo){this.symbolType=this.symbolInfo.symbolType;this.clusterType=this.symbolInfo.clusterType;this.iconType=this.symbolInfo.iconType;this.displayFeatureCount=this.symbolInfo.displayFeatureCount;this.clusteringEnabled=this.symbolInfo.clusteringEnabled;this.userDefinedSymbol=this.symbolInfo.userDefinedSymbol;this._highLightColor=this.symbolInfo._highLightColor;switch(this.symbolInfo.symbolType){case "LayerSymbol":this.symbolInfo.symbolOverride?
(this.userDefinedSymbol=!0,this.rdoEsriSym.set("checked",!0),this._rdoLayerSymChanged(!1),this._rdoCustomSymChanged(!1),this.symbolPicker.showBySymbol(m.fromJson(this.symbolInfo.symbol))):(this.rdoLayerSym.set("checked",!0),this._rdoEsriSymChanged(!1),this._rdoCustomSymChanged(!1));break;case "EsriSymbol":this.userDefinedSymbol=!0;this.rdoEsriSym.set("checked",!0);this._rdoLayerSymChanged(!1);this._rdoCustomSymChanged(!1);this.symbolPicker.showBySymbol(m.fromJson(this.symbolInfo.symbol));break;case "CustomSymbol":this.userDefinedSymbol=
!0,this.rdoCustomSym.set("checked",!0),this._rdoEsriSymChanged(!1),this._rdoLayerSymChanged(!1),this._createImageDataDiv(this.symbolInfo.symbol,!0,this.customSymbolPlaceholder)}switch(this.symbolInfo.clusterType){case "ThemeCluster":this.userDefinedSymbol=!0;this.clusterType="ThemeCluster";break;case "CustomCluster":this.userDefinedSymbol=!0,this.clusterType="CustomCluster",this.chkClusterCnt.set("checked",this.displayFeatureCount),this.colorPicker.setColor(new A(this._highLightColor))}switch(this.symbolInfo.iconType){case "LayerIcon":this.rdoLayerIcon.set("checked",
!0);break;case "CustomIcon":if(this.userDefinedSymbol=!0,this.rdoCustomIcon.set("checked",!0),this.symbolInfo.icon){this.updateImg();var b=m.fromJson(this.symbolInfo.icon);this._createImageDataDiv(b,!0,this.customIconPlaceholder)}}"undefined"!==typeof this.symbolInfo.clusterType&&("CustomCluster"===this.symbolInfo.clusterType&&this.symbolInfo.clusterSymbol&&this.clusterPicker.showBySymbol(m.fromJson(this.symbolInfo.clusterSymbol)),this.userDefinedSymbol=!0);this.chkClusterSym.set("checked",this.symbolInfo.clusteringEnabled);
this._chkClusterChanged(this.symbolInfo.clusteringEnabled)}else this.rdoLayerSym.set("checked",!0),this._rdoEsriSymChanged(!1),this._rdoCustomSymChanged(!1),this.chkClusterSym.set("checked",!1),this.chkClusterCnt.set("checked",!1),this.rdoLayerIcon.set("checked",!0),this._rdoCustomIconChanged(!1),this.symbolType="LayerSymbol",this.iconType="LayerIcon",this.userDefinedSymbol=this.clusteringEnabled=!1;if("esriGeometryPoint"!==this.geometryType||!this.supportsDynamic)r.set(this.parent_div_uploadCustomSymbol,
"display","none"),this.supportsDynamic||r.set(this.div_rdoEsriSym,"display","none")},updateImg:function(){if(-1<this.symbolInfo.icon.toString().indexOf("\x3cimg")){var b=document.createElement("div");b.innerHTML=this.symbolInfo.icon;var a=new f(b.children[0].src,26,26);this.symbolInfo.icon=a.toJson();b.remove()}},_addEventHandlers:function(b){"point"===b&&this.own(s(this.uploadCustomSymbol,"click",n.hitch(this,function(){this._editIcon("Symbol")})));this.own(s(this.uploadCustomIcon,"click",n.hitch(this,
function(){this._editIcon("Icon")})));this.btnOk.innerText=this.nls.common.ok;this.own(s(this.btnOk,"click",n.hitch(this,function(){this._setSymbol();this.emit("ok",this.symbolInfo)})));this.btnCancel.innerText=this.nls.common.cancel;this.own(s(this.btnCancel,"click",n.hitch(this,function(){this.emit("cancel")})))},_setSymbol:function(){var b;switch(this.symbolType){case "LayerSymbol":b=this.symbol;break;case "EsriSymbol":this.userDefinedSymbol=!0;b=this.symbolPicker.getSymbol();break;case "CustomSymbol":this.userDefinedSymbol=
!0,0<this.customSymbolPlaceholder.children.length&&(b="undefined"!==typeof this.customSymbolPlaceholder.children[0].src?new f(this.customSymbolPlaceholder.children[0].src,26,26):m.fromJson(this.symbolInfo.symbol))}var a;"LayerIcon"===this.iconType?a=b:0<this.customIconPlaceholder.children.length&&("undefined"!==typeof this.customIconPlaceholder.children[0].src?(e.removeClass(this.customIconPlaceholder.firstChild,"customPlaceholder"),e.addClass(this.customIconPlaceholder.firstChild,"customPlaceholderSettings"),
a=new f(this.customIconPlaceholder.children[0].src,26,26)):a=m.fromJson(this.symbolInfo.icon));this.clusteringEnabled&&"esriGeometryPoint"===this.geometryType?(this.clusterSymbol="ThemeCluster"===this.clusterType?"custom":this.clusterPicker.getSymbol().toJson(),this.userDefinedSymbol=!0):(this.clusterSymbol=void 0,this.clusteringEnabled=!1);b&&"undefined"!==typeof b.toJson&&(b=b.toJson());var d;d=0<this.customIconPlaceholder.children.length?this.customIconPlaceholder.children[0].src:0<this.layerSym.children.length?
this.layerSym.children[0].innerHTML:this.customIconPlaceholder.outerHTML;if("undefined"!==typeof a){var c="LayerIcon"!==this.iconType||"CustomSymbol"===this.symbolType;this._createImageDataDiv2(a,44,44,!0,c);this._createImageDataDiv2(a,28,28,!1,c)}this.symbolInfo={symbolType:this.symbolType,symbol:b,clusterSymbol:this.clusterSymbol,clusteringEnabled:this.clusteringEnabled,displayFeatureCount:this.displayFeatureCount,_highLightColor:this.colorPicker.color.toHex(),icon:a&&a.toJson?a.toJson():a,clusterType:this.clusterType,
iconType:this.iconType,renderer:this.renderer,s:d,svg:this.svg,panelHTML:this.panelHTML,userDefinedSymbol:this.userDefinedSymbol?this.userDefinedSymbol:!1,layerId:this.layerId,selectedId:this.selectedID,featureDisplayOptions:{groupEnabled:this.groupFeaturesEnabled,fields:this.fieldOptionsTable?this._getFields(this.fieldOptionsTable):null,groupField:this.groupOptionsTable?this._getFields(this.groupOptionsTable)[0]:null}}},_getFields:function(b){b=b.getRows();var a=[];D.forEach(b,function(b){b.selectFields&&
a.push({name:b.selectFields.value,label:b.labelText.value})});return a},_rdoLayerSymChanged:function(b){b&&(this.symbolType="LayerSymbol",this.selectedID&&this.setLayerSymbol(z.byId(this.selectedID)));e.setStyle(this.layerSym,"display",b?"block":"none")},_rdoEsriSymChanged:function(b){b&&(this.symbolType="EsriSymbol");e.setStyle(this.symbolPicker.domNode,"display",b?"block":"none")},_rdoCustomSymChanged:function(b){b&&(this.symbolType="CustomSymbol");e.setStyle(this.customSymbolDIV,"display",b?"block":
"none")},_chkClusterChanged:function(b){this.clusteringEnabled=b;e.setStyle(this.grpClusterOptions,"display",b?"block":"none");e.setStyle(this.featureFont,"display",b?"block":"none");e.setStyle(this.clusterPickerContainer,"display",b?"block":"none");b&&"undefined"===typeof this.clusterType&&(this.clusterType="CustomCluster")},_chkClusterCntChanged:function(b){this.displayFeatureCount=b;e.setStyle(this.featureFont,"display",b?"block":"none")},_rdoLayerIconChanged:function(b){b&&(this.iconType="LayerIcon");
e.setStyle(this.uploadCustomIcon,"display",!b?"block":"none");e.setStyle(this.customIconPlaceholder,"display",!b?"block":"none")},_rdoCustomIconChanged:function(b){b&&(this.iconType="CustomIcon");e.setStyle(this.uploadCustomIcon,"display",b?"block":"none");e.setStyle(this.customIconPlaceholder,"display",b?"block":"none")},_initSymbolPicker:function(b){var a="";"point"===b?a="marker":"polyline"===b?a="line":"polygon"===b&&(a="fill");this.symbolPicker.showByType(a)},_initClusterSymbolPicker:function(b){"point"===
b&&this.clusterPicker.showByType("fill");r.set(this.parent_div_clusterOptions,"display","point"===b?"block":"none")},_loadLayerSymbol:function(){if("undefined"!==typeof this.renderer){var b=this.renderer,d;if("undefined"!==typeof b.symbol)this._createImageDataDiv(b.symbol,!0,this.layerSym);else if("undefined"!==typeof b.infos)d=b.infos;else if("undefined"!==typeof b.uniqueValueInfos)d=b.uniqueValueInfos;else if("undefined"!==typeof b.classBreakInfos)d=b.classBreakInfos;else if(b.type&&"heatmap"===
b.type&&b.colorStops){var b=b.colorStops,f=[];if(b&&1<=b.length){var g=b[0].color,g=C.fromArray([g.r,g.g,g.b]);f.push({symbol:new a(a.STYLE_CIRCLE,10,new c(c.STYLE_SOLID,g),g)});2<b.length&&(g=b[b.length-1].color,g=C.fromArray([g.r,g.g,g.b]),f.push({symbol:new a(a.STYLE_CIRCLE,10,new c(c.STYLE_SOLID,g),g)}))}0<f.length?this.layerSym.appendChild(this._createCombinedImageDataDiv(f)):(this._createImageDataDiv2(void 0,44,44,!0,!1),this._createImageDataDiv2(void 0,28,28,!1,!1))}else this.rdoEsriSym.set("checked",
!0),this.symbolType="EsriSymbol",this.iconType="LayerIcon",this._initSymbolPicker(q.getTypeByGeometryType(this.geometryType)),this._setFields(this.fields),this._setSymbol(),this.symbolInfo.symbolType="LayerSymbol",this.symbolInfo.symbolOverride=!0;d&&(this.layerSym.innerHTML="\x3cdiv\x3e\x3c/div\x3e",this.layerSym.appendChild(this._createCombinedImageDataDiv(d)),e.setStyle(this.layerSym,"cursor","pointer"))}},_createImageDataDiv2:function(b,a,d,c,g){var f;if("string"===typeof b)f=p.create("div",{"class":"imageDataGFX",
innerHTML:b}),c?this.panelHTML=f.innerHTML:this.svg=f;else if("undefined"===typeof b)f=p.create("div",{"class":"imageDataGFX"}),f.innerHTML="\x3cdiv\x3e\x3c/div\x3e",c?this.panelHTML=f.innerHTML:this.svg=f;else{var e=m.fromJson(b);e||(e=b);e?(b=d,d=a,e.height&&e.width&&(f=e.width/e.height,e.height>e.width?d=a*f:e.width>e.height&&(b=d/f)),"undefined"!==typeof e.setWidth?"undefined"!==typeof e.setHeight?(e.setWidth(g?d-0.25*d:d),e.setHeight(g?b-0.25*b:b)):e.setWidth(2):"undefined"!==typeof e.size&&
20<e.size&&e.setSize(20),f=p.create("div",{"class":"imageDataGFX"}),a=w.createSurface(f,d,b),e=m.getShapeDescriptors(e),a.createShape(e.defaultShape).setFill(e.fill).setStroke(e.stroke).applyTransform({dx:d/2,dy:b/2}),c?this.panelHTML=f.innerHTML:this.svg=f):"undefined"!==typeof b.url&&(f=p.create("div",{"class":"imageDataGFX"}),r.set(f,"background-image","url("+b.url+")"),r.set(f,"background-repeat","no-repeat"),c?this.panelHTML=f.innerHTML:this.svg=f)}return f},_createImageDataDiv:function(b,a,
d){d=p.create("div",{"class":"imageDataGFX-display"},d);(a=a?m.fromJson(b):b)||(a=b);this.symbol=a;var c=b=26;a.height&&a.width&&a.height>a.width&&(c=a.width/a.height,b=26,c*=26);var f=w.createSurface(d,c,b);a=m.getShapeDescriptors(this.setSym(a,c,b));f.createShape(a.defaultShape).setFill(a.fill).setStroke(a.stroke).applyTransform({dx:c/2,dy:b/2});this.svg=d.firstChild;return d},_createCombinedImageDataDiv:function(b){var a=p.create("div",{"class":"imageDataGFXMulti"},this.customSymbolPlaceholder);
this.lyrSymbolSet=[];for(var d=this.symbolInfo&&this.symbolInfo.selectedId?!1:!0,c=0;c<b.length;c++){var f=b[c].symbol,g=m.fromJson(f);g||(g=f);"undefined"===typeof this.symbol&&(this.symbol=g);this.lyrSymbolSet.push(g);var h=f=26;g.height&&g.width&&g.height>g.width&&(h=g.width/g.height,f=26,h*=26);var l=p.create("div",{"class":"imageDataGFX imageDataGFX2",id:"imageGFX_"+c,onclick:n.hitch(this,this.layerSymbolClick)},a),k=w.createSurface(l,h,f),g=m.getShapeDescriptors(this.setSym(g,h,f));k.createShape(g.defaultShape).setFill(g.fill).setStroke(g.stroke).applyTransform({dx:h/
2,dy:f/2});a.insertBefore(l,a.firstChild);a.appendChild(l);if(d||this.symbolInfo&&l.id===this.symbolInfo.selectedId)this.setLayerSymbol(l),d=!1;k.rawNode&&(e.setStyle(k.rawNode,"display","block"),e.setStyle(k.rawNode,"margin","auto"))}return a},layerSymbolClick:function(b){this.setLayerSymbol(b.currentTarget)},setLayerSymbol:function(b){for(var a,d=0;d<b.parentElement.children.length;d++){var c=b.parentElement.children[d];e.removeClass(c,"lyrSymbolSelected");c.id===b.id&&(a=d)}e.addClass(b,"lyrSymbolSelected");
this.selectedID=b.id;this.svg=b;this.panelHTML=b.innerHTML;this.symbol=this.lyrSymbolSet[a]},setSym:function(b,a,d){"undefined"!==typeof b.setWidth?("esriGeometryPoint"===this.geometryType&&b.setWidth(a),"undefined"!==typeof b.setHeight&&b.setHeight(d)):("undefined"!==typeof b.size&&20<b.size&&b.setSize(20),"undefined"!==typeof b.width&&(b.width=a),"undefined"!==typeof b.height&&(b.height=d));return b},_editIcon:function(b){this.fileInput.value=null;var a=new FileReader;a.onload=n.hitch(this,function(){var d,
c;"Symbol"===b?(d=this.customSymbolPlaceholder,c=this.nls.editCustomSymbol):(d=this.customIconPlaceholder,c=this.nls.editCustomIcon);d.innerHTML="\x3cdiv\x3e\x3c/div\x3e";c=p.create("div",{"class":"customPlaceholder",innerHTML:['\x3cimg class\x3d"customPlaceholder" src\x3d"',a.result,'"/\x3e'].join(""),title:c});d.innerHTML=c.innerHTML});this.fileInput.onchange=n.hitch(this,function(){a.readAsDataURL(this.fileInput.files[0])});this.fileInput.click()},_chkGroupChanged:function(b){this.groupFeaturesEnabled=
b;e.setStyle(this.groupFieldOptions,"display",b?"inline-block":"none")},destroy:function(){this.symbolInfo=null;this.tabContainer.destroyRecursive()}})})},"jimu/dijit/SymbolPicker":function(){define("dojo/_base/declare dijit/_WidgetBase dijit/_TemplatedMixin dojo/Evented dojo/_base/lang dojo/_base/html dojo/_base/array dojo/on dojo/query dijit/TooltipDialog dijit/popup dijit/registry jimu/dijit/SymbolChooser jimu/symbolUtils".split(" "),function(k,u,v,y,n,e,r,p,s,z,w,x,A,B){return k([u,v,y],{baseClass:"jimu-symbol-picker",
declaredClass:"jimu.dijit.SymbolPicker",templateString:'\x3cdiv\x3e\x3cdiv data-dojo-attach-point\x3d"symbolNode" class\x3d"symbol-node jimu-float-leading"\x3e\x3c/div\x3e\x3cdiv class\x3d"separator jimu-float-leading"\x3e\x3c/div\x3e\x3cdiv class\x3d"jimu-icon jimu-icon-down-arrow-8 jimu-float-leading"\x3e\x3c/div\x3e\x3c/div\x3e',tooltipDialog:null,_isTooltipDialogOpened:!1,symbol:null,type:null,postCreate:function(){this.inherited(arguments);this._createTooltipDialog();this._hideTooltipDialog();
var e=this.symbolChooser.getSymbol();e&&this._drawSymbol(e)},destroy:function(){this._hideTooltipDialog();this.symbolChooser&&this.symbolChooser.destroy();this.symbolChooser=null;this.inherited(arguments)},_createTooltipDialog:function(){var m=e.create("div");this.tooltipDialog=new z({content:m});this.symbolChooser=new A({symbol:this.symbol,type:this.type});this.symbolChooser.placeAt(m);this.symbolChooser.startup();this.own(p(this.symbolChooser,"change",n.hitch(this,function(e){this._drawSymbol(e);
this.emit("change",e)})));this.own(p(this.domNode,"click",n.hitch(this,function(e){e.stopPropagation();e.preventDefault();this._isTooltipDialogOpened?this._hideTooltipDialog():this._showTooltipDialog()})));this.own(p(document.body,"click",n.hitch(this,function(m){var k=m.target||m.srcElement;m=this._getColorPickers();0<m.length&&r.some(m,function(e){return e.isPartOfPopup(k)})||(m=this.tooltipDialog.domNode,k===m||e.isDescendant(k,m)||this._hideTooltipDialog())})));this.own(p(this.symbolChooser,"resize",
n.hitch(this,function(){this._isTooltipDialogOpened&&(this._hideTooltipDialog(),this._showTooltipDialog())})))},_getColorPickers:function(){var e=s(".jimu-color-picker",this.symbolChooser.domNode);return r.map(e,n.hitch(this,function(e){return x.byNode(e)}))},reset:function(){this.symbol=this.type=null;e.empty(this.symbolNode);this.symbolChooser.reset()},showBySymbol:function(e){this.reset();e&&(this._drawSymbol(e),this.symbolChooser.showBySymbol(e))},showByType:function(e){this.reset();this.symbolChooser.showByType(e);
(e=this.symbolChooser.getSymbol())&&this._drawSymbol(e)},getSymbol:function(){return this.symbolChooser.getSymbol()},_drawSymbol:function(m){e.empty(this.symbolNode);m&&(m=B.createSymbolNode(m,{width:16,height:16}))&&e.place(m,this.symbolNode)},_showTooltipDialog:function(){this.tooltipDialog&&(w.open({parent:this.getParent(),popup:this.tooltipDialog,around:this.domNode}),this._isTooltipDialogOpened=!0)},_hideTooltipDialog:function(){this.tooltipDialog&&(w.close(this.tooltipDialog),this._isTooltipDialogOpened=
!1)}})})},"widgets/InfoSummary/setting/_build-generate_module":function(){define(["dojo/text!./Setting.html","dojo/text!./css/style.css","dojo/i18n!./nls/strings"],function(){})},"url:widgets/InfoSummary/setting/MySymbolPicker.html":'\x3cdiv style\x3d"width: 100%;"\x3e\r\n  \x3cdiv data-dojo-attach-point\x3d"tabParent"\x3e\r\n    \x3cdiv data-dojo-attach-point\x3d"symbolPickerContainer" class\x3d"symbolPickerContainer"\x3e\r\n      \x3cdiv data-dojo-attach-point\x3d"div_symbolOptionsContainer" class\x3d"symbolOptionsContainer"\x3e\r\n        \x3cdiv class\x3d"label iconOptionsText"\x3e\r\n          ${nls.symbolOptionsText}\r\n        \x3c/div\x3e\r\n        \x3chr /\x3e\r\n        \x3cdiv data-dojo-attach-point\x3d"div_symbolOptions" class\x3d"symbolOptions"\x3e\r\n          \x3c!--Symbol Options--\x3e\r\n          \x3cdiv class\x3d"jimu-r-row padTop10"\r\n               data-dojo-attach-point\x3d"grpSymbolOptions"\x3e\r\n            \x3cdiv data-dojo-attach-point\x3d"div_rdoLayerSym" class\x3d"height30"\x3e\r\n              \x3cinput name\x3d"a" data-dojo-type\x3d"dijit/form/RadioButton"\r\n                     data-dojo-attach-point\x3d"rdoLayerSym"\r\n                     data-dojo-attach-event\x3d"onChange:_rdoLayerSymChanged"\r\n                     title\x3d"${nls.rdoLayer}" /\x3e\r\n              \x3cspan class\x3d"label"\x3e${nls.rdoLayer}\x3c/span\x3e\r\n            \x3c/div\x3e\r\n          \x3c/div\x3e\r\n          \x3cdiv class\x3d"jimu-r-row symPick marginLR20" data-dojo-attach-point\x3d"layerSym"\x3e \x3c/div\x3e\r\n          \x3cdiv class\x3d"jimu-r-row padTop10" data-dojo-attach-point\x3d"grpSymbolOptions"\x3e\r\n            \x3cdiv data-dojo-attach-point\x3d"div_rdoEsriSym" class\x3d"height30"\x3e\r\n              \x3cinput name\x3d"a" data-dojo-type\x3d"dijit/form/RadioButton" data-dojo-attach-point\x3d"rdoEsriSym" data-dojo-attach-event\x3d"onChange:_rdoEsriSymChanged" title\x3d"${nls.rdoEsri}" /\x3e\r\n              \x3cspan class\x3d"label"\x3e${nls.rdoEsri}\x3c/span\x3e\r\n            \x3c/div\x3e\r\n          \x3c/div\x3e\r\n          \x3cdiv data-dojo-attach-point\x3d"symbolPicker" data-dojo-type\x3d"jimu/dijit/SymbolPicker" class\x3d"jimu-r-row symPick marginLR20"\x3e\x3c/div\x3e\r\n          \x3cdiv data-dojo-attach-point\x3d"parent_div_uploadCustomSymbol"\x3e\r\n            \x3cdiv class\x3d"jimu-r-row padTop10" data-dojo-attach-point\x3d"grpSymbolOptions"\x3e\r\n              \x3cdiv data-dojo-attach-point\x3d"div_rdoCustomSym" class\x3d"rdoCustomSym"\x3e\r\n                \x3cinput name\x3d"a" data-dojo-type\x3d"dijit/form/RadioButton" data-dojo-attach-point\x3d"rdoCustomSym" data-dojo-attach-event\x3d"onChange:_rdoCustomSymChanged" title\x3d"${nls.rdoCustom}" /\x3e\r\n                \x3cspan class\x3d"label"\x3e${nls.rdoCustom}\x3c/span\x3e\r\n              \x3c/div\x3e\r\n            \x3c/div\x3e\r\n            \x3cdiv data-dojo-attach-point\x3d"customSymbolDIV" class\x3d"jimu-r-row padTop10 sHeight marginLR20"\x3e\r\n              \x3cdiv data-dojo-attach-point\x3d"uploadCustomSymbol" class\x3d"uploadCustom"\x3e\x3c/div\x3e\r\n              \x3cdiv data-dojo-attach-point\x3d"customSymbolPlaceholder" class\x3d"customPlaceholder"\x3e\x3c/div\x3e\r\n            \x3c/div\x3e\r\n          \x3c/div\x3e\r\n\r\n          \x3c!--Clustering Options--\x3e\r\n          \x3cdiv data-dojo-attach-point\x3d"parent_div_clusterOptions" class\x3d"clusterOptions"\x3e\r\n            \x3chr class\x3d"w" /\x3e\r\n            \x3cdiv class\x3d"jimu-r-row padTop10" data-dojo-attach-point\x3d"grpClusterOptions"\x3e\r\n              \x3cdiv data-dojo-attach-point\x3d"div_chkCluster" class\x3d"padTop20"\x3e\r\n                \x3cinput data-dojo-type\x3d"dijit/form/CheckBox" data-dojo-attach-point\x3d"chkClusterSym" title\x3d"${nls.chkCluster}" data-dojo-attach-event\x3d"onChange:_chkClusterChanged" /\x3e\r\n                \x3cspan class\x3d"label"\x3e${nls.chkCluster}\x3c/span\x3e\r\n              \x3c/div\x3e\r\n            \x3c/div\x3e\r\n\r\n            \x3cdiv data-dojo-attach-point\x3d"clusterPickerContainer" class\x3d"jimu-r-row marginLR22 grpClusterOptions"\x3e\r\n              \x3cdiv class\x3d"jimu-float-leading"\x3e${nls.defineClusterSymbol}:\x3c/div\x3e\r\n              \x3cdiv data-dojo-attach-point\x3d"clusterPicker" data-dojo-type\x3d"jimu/dijit/SymbolPicker" class\x3d"jimu-float-trailing colorPick"\x3e\x3c/div\x3e\r\n            \x3c/div\x3e\r\n\r\n            \x3cdiv class\x3d"jimu-r-row grpClusterOptions marginLR22" data-dojo-attach-point\x3d"grpClusterOptions"\x3e\r\n              \x3cinput data-dojo-type\x3d"dijit/form/CheckBox" data-dojo-attach-point\x3d"chkClusterCnt" title\x3d"${nls.displayClusterCnt}" data-dojo-attach-event\x3d"onChange:_chkClusterCntChanged" /\x3e\r\n              \x3cspan class\x3d"label"\x3e${nls.displayClusterCnt}\x3c/span\x3e\r\n            \x3c/div\x3e\r\n            \x3cdiv class\x3d"jimu-r-row grpClusterOptions" data-dojo-attach-point\x3d"featureFont" style\x3d"display: none; margin-left: 45px; margin-right: 45px;"\x3e\r\n              \x3cdiv class\x3d"jimu-float-leading"\x3e${nls.defineClusterFont}:\x3c/div\x3e\r\n              \x3cdiv data-dojo-attach-point\x3d"colorPicker" data-dojo-type\x3d"jimu/dijit/ColorPicker" data-dojo-props\x3d\'color:"${_highLightColor}"\' class\x3d"marginLR30 colorPick2 jimu-float-trailing"\x3e\x3c/div\x3e\r\n            \x3c/div\x3e\r\n          \x3c/div\x3e\r\n        \x3c/div\x3e\r\n\r\n        \x3cdiv class\x3d"label iconOptionsText padTop20" data-dojo-attach-point\x3d"iconOptionsTextLabel"\x3e\r\n          ${nls.iconOptionsText}\r\n        \x3c/div\x3e\r\n        \x3chr /\x3e\r\n        \x3cdiv data-dojo-attach-point\x3d"div_iconOptions" class\x3d"iconOptions"\x3e\r\n          \x3c!--Main Panel and cluster center Icon Options--\x3e\r\n          \x3cdiv class\x3d"jimu-r-row padTop10" data-dojo-attach-point\x3d"grpIconOptions"\x3e\r\n            \x3cdiv data-dojo-attach-point\x3d"div_rdoLayerIcon"\x3e\r\n              \x3cinput name\x3d"b" data-dojo-type\x3d"dijit/form/RadioButton" data-dojo-attach-point\x3d"rdoLayerIcon" data-dojo-attach-event\x3d"onChange:_rdoLayerIconChanged" title\x3d"${nls.rdoLayerIcon}" /\x3e\r\n              \x3cspan class\x3d"label" data-dojo-attach-point\x3d"rdoLayerIconLabel"\x3e${nls.rdoLayerIcon}\x3c/span\x3e\r\n            \x3c/div\x3e\r\n          \x3c/div\x3e\r\n\r\n          \x3cdiv class\x3d"jimu-r-row padTop10" data-dojo-attach-point\x3d"grpCustomIconOptions"\x3e\r\n            \x3cdiv class\x3d"rdoCustomSym" data-dojo-attach-point\x3d"div_rdoCustomIcon"\x3e\r\n              \x3cinput name\x3d"b" data-dojo-type\x3d"dijit/form/RadioButton" data-dojo-attach-point\x3d"rdoCustomIcon" data-dojo-attach-event\x3d"onChange:_rdoCustomIconChanged" title\x3d"${nls.rdoCustomIcon}" /\x3e\r\n              \x3cspan class\x3d"label" data-dojo-attach-point\x3d"rdoCustomIconLabel"\x3e${nls.rdoCustomIcon}\x3c/span\x3e\r\n            \x3c/div\x3e\r\n          \x3c/div\x3e\r\n          \x3cdiv class\x3d"jimu-r-row padTop10 sHeight marginLR30"\x3e\r\n            \x3cdiv data-dojo-attach-point\x3d"uploadCustomIcon" class\x3d"uploadCustom"\x3e\x3c/div\x3e\r\n            \x3cdiv data-dojo-attach-point\x3d"customIconPlaceholder" class\x3d"customPlaceholder"\x3e\x3c/div\x3e\r\n          \x3c/div\x3e\r\n        \x3c/div\x3e\r\n        \x3cinput type\x3d"file"\r\n               accept\x3d"image/png, image/jpeg, image/bmp, image/gif"\r\n               data-dojo-attach-point\x3d"fileInput"\r\n               class\x3d"fileInput"\x3e\r\n      \x3c/div\x3e\r\n    \x3c/div\x3e\r\n    \x3cdiv data-dojo-attach-point\x3d"panelFeatureDisplayContainer" class\x3d"panelFeatureContainer"\x3e\r\n      \x3cdiv class\x3d"label iconOptionsText padTop10" data-dojo-attach-point\x3d"featureOptionsTextLabel"\x3e\r\n        ${nls.featureOptionsText}\r\n      \x3c/div\x3e\r\n      \x3chr /\x3e\r\n      \x3cdiv class\x3d"btn-add-section enable" data-dojo-attach-point\x3d"btnAddField"\x3e\r\n        \x3cspan class\x3d"btn-add-icon"\x3e\x3c/span\x3e\r\n        \x3cspan class\x3d"btn-add-label"\x3e${nls.addField}\x3c/span\x3e\r\n      \x3c/div\x3e\r\n      \x3cdiv data-dojo-attach-point\x3d"fieldOptions" class\x3d"fieldOptions"\x3e\x3c/div\x3e\r\n      \x3cdiv class\x3d"label iconOptionsText padTop20" data-dojo-attach-point\x3d"groupOptionsTextLabel"\x3e\r\n        ${nls.groupOptionsText}\r\n      \x3c/div\x3e\r\n      \x3chr /\x3e\r\n      \x3cdiv data-dojo-attach-point\x3d"groupOptions" class\x3d"groupOptions"\x3e\r\n        \x3cdiv data-dojo-attach-point\x3d"div_chkGroup"\x3e\r\n          \x3cinput data-dojo-type\x3d"dijit/form/CheckBox" data-dojo-attach-point\x3d"chkGroup" title\x3d"${nls.chkGroup}" data-dojo-attach-event\x3d"onChange:_chkGroupChanged" /\x3e\r\n          \x3cspan class\x3d"label" data-dojo-attach-point\x3d"chkGroupLabel"\x3e${nls.chkGroup}\x3c/span\x3e\r\n        \x3c/div\x3e\r\n        \x3cdiv data-dojo-attach-point\x3d"groupFieldOptions" class\x3d"groupFieldOptions"\x3e\r\n        \x3c/div\x3e\r\n      \x3c/div\x3e\r\n    \x3c/div\x3e\r\n  \x3c/div\x3e\r\n  \x3c!--Footer--\x3e\r\n  \x3cdiv class\x3d"footer padTop20"\x3e\r\n    \x3cdiv class\x3d"jimu-btn ok" data-dojo-attach-point\x3d"btnOk"\x3e\x3c/div\x3e\r\n    \x3cdiv class\x3d"jimu-btn cancel" data-dojo-attach-point\x3d"btnCancel"\x3e\x3c/div\x3e\r\n  \x3c/div\x3e\r\n\x3c/div\x3e\r\n',
"url:widgets/InfoSummary/setting/Setting.html":'\x3cdiv\x3e\r\n  \x3cdiv class\x3d"jimu-r-row"\x3e\r\n    \x3cdiv class\x3d"btn-add-section enable" data-dojo-attach-point\x3d"btnAddLayer"\x3e\r\n      \x3cspan class\x3d"btn-add-icon"\x3e\x3c/span\x3e\r\n      \x3cspan class\x3d"btn-add-label"\x3e${nls.addLayer}\x3c/span\x3e\r\n    \x3c/div\x3e\r\n    \x3cdiv data-dojo-attach-point\x3d"layerTable" /\x3e\r\n  \x3c/div\x3e\r\n  \x3cdiv data-dojo-attach-point\x3d"optionsContainer"\x3e\r\n    \x3cdiv class\x3d"label optionsText"\x3e\r\n      ${nls.optionsText}\r\n    \x3c/div\x3e\r\n    \x3chr /\x3e\r\n    \x3cdiv class\x3d"padTop20"\x3e\r\n      \x3cdiv class\x3d"refreshOptions refreshOff" data-dojo-attach-point\x3d"refreshOptions"\x3e\r\n        \x3cdiv class\x3d"refreshIntervalTitle" title\x3d"${nls.refreshIntervalTitle}"\x3e\r\n          \x3cspan style\x3d"padding-right: 10px;"\x3e${nls.refreshIntervalInstruction}\x3c/span\x3e\r\n          \x3cinput type\x3d"text" name\x3d"refreshInterval"\r\n                 placeholder\x3d"${nls.refreshInterval}"\r\n                 data-dojo-type\x3d"dijit/form/ValidationTextBox"\r\n                 data-dojo-props\x3d"regExp:\'[\\\\d]+\', _hasBeenBlurred:true, trim:true"\r\n                 data-dojo-attach-point\x3d"refreshInterval"\r\n                 data-dojo-attach-event\x3d"onKeyUp:_updateOK"\r\n                 class\x3d"refreshInterval" required\x3d"true"\x3e\r\n          \x3cspan style\x3d"padding-left: 10px;"\x3e${nls.refreshUnit}\x3c/span\x3e\r\n        \x3c/div\x3e\r\n      \x3c/div\x3e\r\n    \x3c/div\x3e\r\n    \x3cdiv class\x3d"displayOptionsContainer" data-dojo-attach-point\x3d"displayOptionsContainer"\x3e\r\n      \x3cdiv class\x3d"padTop20" title\x3d"${nls.panelCountOptionHelp}"\x3e\r\n        \x3cinput data-dojo-attach-point\x3d"panelCountOptions" data-dojo-type\x3d"dijit/form/CheckBox" /\x3e\r\n        \x3cspan class\x3d"label" data-dojo-attach-point\x3d"panelCountOptionsLabel"\x3e ${nls.panelCountOption}\x3c/span\x3e\r\n      \x3c/div\x3e\r\n      \x3cdiv class\x3d"padTop20" title\x3d"${nls.panelIconOptionHelp}"\x3e\r\n        \x3cinput data-dojo-attach-point\x3d"panelIconOptions" data-dojo-type\x3d"dijit/form/CheckBox" /\x3e\r\n        \x3cspan class\x3d"label" data-dojo-attach-point\x3d"panelIconOptionsLabel"\x3e ${nls.panelIconOption}\x3c/span\x3e\r\n      \x3c/div\x3e\r\n      \x3cdiv class\x3d"padTop20"\x3e\r\n        \x3cdiv class\x3d"mainPanelPreviewContainer mainPanelPreviewContainerOff" data-dojo-attach-point\x3d"mainPanelPreviewContainer"\x3e\r\n          \x3cdiv class\x3d"leftContainer"\x3e\r\n            \x3cdiv data-dojo-attach-point\x3d"mainPanelPreviewButton" class\x3d"mainPanelPreviewButton"\x3e\r\n              \x3cdiv data-dojo-attach-event\x3d"onclick:uploadImage" class\x3d"jimu-btn"\x3e\r\n                ${nls.uploadImage}\r\n              \x3c/div\x3e\r\n            \x3c/div\x3e\r\n            \x3cdiv class\x3d"instruction2"\x3e\r\n              ${nls.mainPanelText}\r\n            \x3c/div\x3e\r\n          \x3c/div\x3e\r\n          \x3cdiv class\x3d"rightContainer"\x3e\r\n            \x3cdiv data-dojo-attach-point\x3d"mainPanelPreview" class\x3d"bg rounded mainPanelPreview"\x3e\r\n              \x3cdiv class\x3d"panelContent bg"\x3e\r\n                \x3cdiv class\x3d"page"\x3e\r\n                  \x3cdiv data-dojo-attach-point\x3d"panelMainIcon"\x3e\x3c/div\x3e\r\n                \x3c/div\x3e\r\n              \x3c/div\x3e\r\n            \x3c/div\x3e\r\n            \x3cinput type\x3d"text" name\x3d"mainPanelText"\r\n                   placeholder\x3d"${nls.mainPanelTextPlaceholder}"\r\n                   data-dojo-type\x3d"dijit/form/TextBox"\r\n                   data-dojo-props\x3d"trim:true"\r\n                   data-dojo-attach-point\x3d"mainPanelText"\r\n                   class\x3d"mainPanelText"\x3e\r\n          \x3c/div\x3e\r\n        \x3c/div\x3e\r\n        \x3cinput type\x3d"file"\r\n               accept\x3d"image/png, image/jpeg, image/bmp, image/gif"\r\n               data-dojo-attach-point\x3d"fileInput"\r\n               class\x3d"fileInput"\x3e\r\n      \x3c/div\x3e\r\n      \x3cdiv class\x3d"hidePanelContainer"\x3e\r\n        \x3cdiv title\x3d"${nls.hidePanelHelp}"\x3e\r\n          \x3cinput data-dojo-attach-point\x3d"hidePanelOptions" data-dojo-type\x3d"dijit/form/CheckBox" /\x3e\r\n          \x3cspan class\x3d"label"\x3e ${nls.hidePanel}\x3c/span\x3e\r\n          \x3cdiv class\x3d"padTop10 help-off" data-dojo-attach-point\x3d"hidePanelHelpText"\x3e\r\n            \x3cspan class\x3d"label note-help"\x3e ${nls.continuousRefreshHelp}\x3c/span\x3e\r\n          \x3c/div\x3e\r\n        \x3c/div\x3e\r\n      \x3c/div\x3e\r\n    \x3c/div\x3e\r\n  \x3c/div\x3e\r\n\x3c/div\x3e\r\n',
"url:widgets/InfoSummary/setting/css/style.css":".jimu-widget-InfoSummary-setting {width: 100%; height: 100%;}.jimu-widget-InfoSummary-setting .btn-add-section {display: inline-block; overflow: hidden; height: 24px; margin-left: 1px; margin-bottom: 3px; cursor: pointer; font-size: 13px; color: #538ec8; margin-top: 8px;}.jimu-widget-InfoSummary-setting .btn-add-section-disabled {display: inline-block; overflow: hidden; height: 24px; margin-left: 1px; margin-bottom: 3px; cursor: default; font-size: 13px; color: #a0acbf; margin-top: 8px;}.jimu-widget-InfoSummary-setting .jimu-icon-edit {margin-left: 5px; margin-top: 5px;}.jimu-rtl .jimu-widget-InfoSummary-setting .jimu-icon-edit {margin-right: 5px; margin-top: 5px;}.jimu-widget-InfoSummary-setting .btn-add-section .btn-add-icon {height: 100%; width: 14px; background-repeat: no-repeat; background-position: center center; background-image: url(images/add.png); display: inline-block; vertical-align: top;}.jimu-widget-InfoSummary-setting .btn-add-section-disabled .btn-add-icon {height: 100%; width: 14px; background-repeat: no-repeat; background-position: center center; background-image: url(images/add.png); display: inline-block; vertical-align: top; opacity: .6;}.jimu-widget-InfoSummary-setting .btn-add-section .btn-add-icon:hover {background-image: url(images/add_hover.png);}.jimu-widget-InfoSummary-setting .btn-add-section .btn-add-label {height: 100%; line-height: 24px; margin-left: 7px; text-decoration: underline; display: inline-block; vertical-align: top;}.jimu-widget-InfoSummary-setting .btn-add-section-disabled .btn-add-label {height: 100%; line-height: 24px; margin-left: 7px; text-decoration: underline; display: inline-block; vertical-align: top;}.jimu-widget-InfoSummary-setting .instruction2{padding-top: 140px;}.jimu-widget-InfoSummary-setting .instruction2 span{color: #596679;}.jimu-widget-InfoSummary-setting .panelContent {position: relative; width: 340px; height: 150px;}.jimu-widget-InfoSummary-setting .page {position: relative; width: 340px; height: 150px; display: block; background-color: rgba(0,0,0,0.15);}.jimu-widget-InfoSummary-setting .panelMain {display: block;}.jimu-widget-InfoSummary-setting .mainPanelPreviewContainer {height: 270px; float: left;}.jimu-rtl .jimu-widget-InfoSummary-setting .mainPanelPreviewContainer {height: 270px; float: right;}.jimu-widget-InfoSummary-setting .hidePanelContainer {height: auto; float: left; display: block; padding-bottom: 10px;}.jimu-rtl .jimu-widget-InfoSummary-setting .hidePanelContainer {height: auto; float: right; display: block; padding-bottom: 10px;}.jimu-widget-InfoSummary-setting .displayOptionsContainer {height: auto; float: left; display: block; padding-bottom: 10px;}.jimu-rtl .jimu-widget-InfoSummary-setting .displayOptionsContainer {height: auto; float: right; display: block; padding-bottom: 10px;}.jimu-widget-InfoSummary-setting .marginLR20 {margin-left: 20px; margin-right: 20px;}.jimu-widget-InfoSummary-setting .marginLR22 {margin-left: 22px; margin-right: 22px;}.jimu-widget-InfoSummary-setting .marginLR25 {margin-left: 25px; margin-right: 25px;}.jimu-widget-InfoSummary-setting .marginLR30 {margin-left: 30px; margin-right: 30px;}.jimu-widget-InfoSummary-setting .continuousContainer {float: left; clear: left;}.jimu-rtl .jimu-widget-InfoSummary-setting .continuousContainer {float: right; clear: right;}.jimu-widget-InfoSummary-setting .rightContainer {float: left; position: relative; height: 210px;}.jimu-rtl .jimu-widget-InfoSummary-setting .rightContainer {float: right;}.jimu-widget-InfoSummary-setting .leftContainer {float: left; padding-right: 20px; position: relative; height: 210px;}.jimu-rtl .jimu-widget-InfoSummary-setting .leftContainer {float: right; padding-left: 20px; position: relative;}.jimu-widget-InfoSummary-setting .mainPanelPreviewContainerOn {display: block; padding-bottom: 10px;}.jimu-widget-InfoSummary-setting .mainPanelPreviewContainerOff {display: none;}.jimu-widget-InfoSummary-setting .refreshOff {display: none;}.jimu-widget-InfoSummary-setting .refreshOn {display: block;}.jimu-widget-InfoSummary-setting .uploadCustom {display: block; width: 25px; height: 25px; cursor: pointer; background-image: url(../css/images/edit_default.png); background-repeat: no-repeat;}.jimu-widget-InfoSummary-setting .uploadCustom:hover {display: block; width: 25px; height: 25px; cursor: pointer; background-image: url(../css/images/edit_hover.png); background-repeat: no-repeat;}.jimu-widget-InfoSummary-setting .sHeight{min-height: 25px; display: block; left: 10px;}.jimu-rtl .jimu-widget-InfoSummary-setting .sHeight{min-height: 25px; display: block; right: 10px;}.jimu-widget-InfoSummary-setting .customPlaceholderSettings {display: block; width: 25px; height: 25px; cursor: default;}.jimu-widget-InfoSummary-setting .customPlaceholder {display: block; width: 25px; height: 25px; cursor: pointer; position: absolute; top: 5px; left: 20px;}.jimu-rtl .jimu-widget-InfoSummary-setting .customPlaceholder {display: block; width: 25px; height: 25px; cursor: pointer; position: absolute; top: 5px; right: 20px;}.jimu-widget-InfoSummary-setting .imageDataGFX {height:27px; float: left;}.jimu-rtl .jimu-widget-InfoSummary-setting .imageDataGFX {height:27px; float: right;}.jimu-widget-InfoSummary-setting .imageDataGFX-display {width:27px; height:27px;}.jimu-widget-InfoSummary-setting .imageDataGFX2 {display: block; margin-left: 5px; margin-bottom: 5px; margin-right: 10px;}.jimu-rtl .jimu-widget-InfoSummary-setting .imageDataGFX2 {display: block; margin-right: 5px; margin-bottom: 5px; margin-left: 10px;}.jimu-widget-InfoSummary-setting .imageDataGFXMulti {width:100%; padding-right: 10px;}.jimu-rtl .jimu-widget-InfoSummary-setting .imageDataGFXMulti {width:100%; padding-left: 10px;}.jimu-widget-InfoSummary-setting .displayOptions {padding-left: 40px !important;}.jimu-rtl .jimu-widget-InfoSummary-setting .displayOptions {padding-right: 40px !important;}.jimu-widget-InfoSummary-setting .symPickers{float:right; overflow:visible;}.jimu-widget-InfoSummary-setting .symPick {padding-top: 1px; padding-bottom: 1px; border: 0px solid #D7D7D7;}.jimu-widget-InfoSummary-setting .colorPick {border: 0px solid #D7D7D7;}.jimu-widget-InfoSummary-setting .colorPick2 {width: 28px; height: 28px;}.jimu-widget-InfoSummary-setting .symbolPreview {float: left; width: 280px; height: 340px; margin-left: 20px; margin-top:10px; border: 5px dashed gray;}.jimu-widget-InfoSummary-setting .iconPreview {float: left; width: 280px; height: 90px; margin-left: 20px; margin-top: 10px; margin-bottom: 10px; border: 5px dashed gray;}.jimu-widget-InfoSummary-setting .symbolOptionsContainer {overflow: hidden;}.jimu-widget-InfoSummary-setting .symbolPickerContainer {height: 100%; width: 100%; overflow: auto; padding-bottom: 8px; margin-top: 15px;}.jimu-widget-InfoSummary-setting .panelFeatureContainer {height: auto; display: none;}.jimu-widget-InfoSummary-setting .fieldOptions {width: 360px; max-height: 130px; overflow-y: auto;}.jimu-widget-InfoSummary-setting .groupOptions {position: relative; margin-top: 15px;}.jimu-widget-InfoSummary-setting .groupFieldOptions {margin-top: 15px; width: 100%; height: auto; display: none; float: left; margin-bottom: 15px;}.jimu-widget-InfoSummary-setting .symbolOptionText {font-weight: bold;}.jimu-widget-InfoSummary-setting .symbolOptions{}.jimu-widget-InfoSummary-setting .w{width: 240px; position: absolute; left: 0px;}.jimu-rtl .jimu-widget-InfoSummary-setting .w{width: 240px; position: absolute; right: 0px;}.jimu-widget-InfoSummary-setting .rdoCustomSym{vertical-align: middle;}.jimu-widget-InfoSummary-setting .clusterOptions{min-width: 250px;}.jimu-widget-InfoSummary-setting .grpClusterOptions{padding-top: 16px;}.jimu-widget-InfoSummary-setting .iconOptionsText{font-weight: bold; width: 200px; display: -webkit-inline-box;}.jimu-widget-InfoSummary-setting .iconOptions{min-width: 250px; min-height: 95px;}.jimu-widget-InfoSummary-setting .fileInput{opacity: 0; width: 0px; height: 0px; position: absolute; right: 0px;}.jimu-rtl .jimu-widget-InfoSummary-setting .fileInput{opacity: 0; width: 0px; height: 0px; position: absolute; left: 0px;}.jimu-widget-InfoSummary-setting .checkBox {margin-left: 20px;}.jimu-rtl .jimu-widget-InfoSummary-setting .checkBox {margin-left: 20px;}.jimu-widget-InfoSummary-setting .height30{height: 30px;}.jimu-widget-InfoSummary-setting .padTop10{padding-top: 10px;}.jimu-widget-InfoSummary-setting .padTop20{padding-top: 20px;}.jimu-widget-InfoSummary-setting .padTop30{padding-top: 30px;}.jimu-widget-InfoSummary-setting .optionsText{padding-top: 25px; font-weight: bold;}.jimu-widget-InfoSummary-setting .mainPanelText{width: 340px; position: absolute; bottom: 10px;}.jimu-widget-InfoSummary-setting .refreshOptions{float:right; padding-bottom: 10px;}.jimu-widget-InfoSummary-setting .refreshIntervalTitle{float:left;}.jimu-widget-InfoSummary-setting .refreshInterval{width:130px;}.jimu-widget-InfoSummary-setting .longSelect .dijitSelectLabel {text-align:left; text-overflow: ellipsis; overflow: hidden; max-width:295px; width:295px;}.jimu-widget-InfoSummary-setting .medSelect .dijitSelectLabel {text-align:left; text-overflow: ellipsis; overflow: hidden; max-width:150px; width: 150px;}.jimu-widget-InfoSummary-setting .loSelect .dijitSelectLabel {text-align:left; text-overflow: ellipsis; overflow: hidden; max-width: 88px; min-width: 88px;}.jimu-widget-InfoSummary-setting .goSelect .dijitSelectLabel {text-align:left; text-overflow: ellipsis; overflow: hidden; max-width: 130px; min-width: 130px;}.jimu-widget-InfoSummary-setting .shortSelect .dijitSelectLabel {text-align:left; text-overflow: ellipsis; overflow: hidden; max-width: 81px; width: 81px;}.jimu-widget-InfoSummary-setting .innerMainPanelIcon {background-size: contain; width: 310px; height: 150px; background-repeat: no-repeat; background-position: 50% 50%; margin-left: 15px;}.jimu-widget-InfoSummary-setting .claro .dijitTextBox .dijitInputInner{font-size: 4px;}.jimu-widget-InfoSummary-setting .noMargin {margin-left: 0px; padding-left: 0px;}.jimu-widget-InfoSummary-setting .margin2 {margin-left: 2px;}.jimu-rtl .jimu-widget-InfoSummary-setting .margin2 {margin-right: 2px;}.jimu-widget-InfoSummary-setting .extraMargin {padding-left: 21px;}.jimu-widget-InfoSummary-setting .lyrSymbolSelected {outline: 1px solid #2196F3; background-color: aliceblue;}.jimu-widget-InfoSummary-setting .text-disabled {color: #a0acbf;}.jimu-widget-InfoSummary-setting .note-help {padding-left: 10px; font-style: italic;}.jimu-rtl .jimu-widget-InfoSummary-setting .note-help {padding-right: 10px; font-style: italic;}.jimu-widget-InfoSummary-setting .help-on {display: block;}.jimu-widget-InfoSummary-setting .help-off {display: none;}",
"*now":function(k){k(['dojo/i18n!*preload*widgets/InfoSummary/setting/nls/Setting*["ar","cs","da","de","en","el","es","et","fi","fr","he","hr","it","ja","ko","lt","lv","nb","nl","pl","pt-br","pt-pt","ro","ru","sr","sv","th","tr","zh-cn","vi","zh-hk","zh-tw","ROOT"]'])}}});
define("dojo/query dojo/dom-construct dojo/dom-class dojo/_base/declare dojo/_base/xhr dojo/_base/Color dijit/_WidgetsInTemplateMixin jimu/BaseWidgetSetting jimu/LayerInfos/LayerInfos dijit/form/Select dijit/form/ValidationTextBox dijit/form/CheckBox jimu/dijit/Popup jimu/dijit/SimpleTable jimu/utils jimu/dijit/Message esri/request dijit/popup dojo/_base/lang dojo/DeferredList dojo/on dojo/dom-style dojo/_base/html dojo/_base/array ./MySymbolPicker".split(" "),function(k,u,v,y,n,e,r,p,s,z,w,x,A,B,
m,H,C,E,l,F,q,t,h,G,D){return y([p,r],{baseClass:"jimu-widget-InfoSummary-setting",_layerInfos:null,mpi:null,layer_options:[],refreshLayers:[],displayPanelIcon:!1,used_layers:[],postCreate:function(){this.inherited(arguments);0===this.map.itemInfo.itemData.operationalLayers.length?(t.set(this.btnAddLayer,"display","none"),t.set(this.optionsContainer,"display","none"),t.set(this.displayOptionsContainer,"display","none"),this._disableOk(),new H({message:this.nls.missingLayerInWebMap})):(this.setupLayerTable(),
this.setupRefreshInterval(),this._getAllLayers(),this.own(q(this.btnAddLayer,"click",l.hitch(this,this._addLayerRow))),this.own(q(this.hidePanelOptions,"change",l.hitch(this,function(a){this.hidePanel=a;this.panelCountOptions.set("disabled",a);this.panelIconOptions.set("disabled",a);if(a){h.addClass(this.panelIconOptionsLabel,"text-disabled");h.addClass(this.panelCountOptionsLabel,"text-disabled");this.displayPanelIcon=!1;if(a=k(".mainPanelPreviewContainerOn",this.mainPanelPreviewContainer.domNode)[0])h.removeClass(a,
"mainPanelPreviewContainerOn"),h.addClass(a,"mainPanelPreviewContainerOff");v.contains(this.hidePanelHelpText,"help-off")&&h.removeClass(this.hidePanelHelpText,"help-off");h.addClass(this.hidePanelHelpText,"help-on")}else{h.removeClass(this.panelIconOptionsLabel,"text-disabled");h.removeClass(this.panelCountOptionsLabel,"text-disabled");if(this.panelIconOptions.checked&&(this.displayPanelIcon=!0,a=k(".mainPanelPreviewContainerOff",this.mainPanelPreviewContainer.domNode)[0]))h.removeClass(a,"mainPanelPreviewContainerOff"),
h.addClass(a,"mainPanelPreviewContainerOn");v.contains(this.hidePanelHelpText,"help-on")&&h.removeClass(this.hidePanelHelpText,"help-on");h.addClass(this.hidePanelHelpText,"help-off")}}))),this.own(q(this.panelCountOptions,"change",l.hitch(this,function(a){this.countEnabled=a}))),this.own(q(this.panelIconOptions,"change",l.hitch(this,function(){var a;this.panelIconOptions.checked?(this.displayPanelIcon=!0,a=k(".mainPanelPreviewContainerOff",this.mainPanelPreviewContainer.domNode)[0],h.removeClass(a,
"mainPanelPreviewContainerOff"),h.addClass(a,"mainPanelPreviewContainerOn")):(this.displayPanelIcon=!1,a=k(".mainPanelPreviewContainerOn",this.mainPanelPreviewContainer.domNode)[0],h.removeClass(a,"mainPanelPreviewContainerOn"),h.addClass(a,"mainPanelPreviewContainerOff"))}))))},startup:function(){this.inherited(arguments);this.refreshLayers=[]},setupRefreshInterval:function(){this.refreshInterval.invalidMessage=this.nls.invalidInterval;this.refreshInterval.missingMessage=this.nls.missingRefreshValue},
setupLayerTable:function(){this.displayLayerTable=new B({fields:[{name:"layer",title:this.nls.layerName,"class":"label",type:"empty",width:"328px"},{name:"label","class":"label",title:this.nls.layerLabel,type:"empty",width:"263px"},{name:"image","class":"label",title:this.nls.iconColumnText+" "+this.nls.optionsText,width:"110px",actions:["edit"],type:"actions"},{name:"refresh","class":"label",title:this.nls.layerRefresh,type:"empty",width:"80px"},{name:"actions","class":"label",title:this.nls.actions,
type:"actions",actions:["up","down","delete"],width:"77px"}],selectable:!1,autoHeight:!0});this.displayLayerTable.placeAt(this.layerTable);this.displayLayerTable.startup();this.own(q(this.displayLayerTable,"actions-edit",l.hitch(this,this._pickSymbol)));this.own(q(this.displayLayerTable,"row-delete",l.hitch(this,this._rowDeleted)))},_getAllLayers:function(){this.map.itemId&&s.getInstance(this.map,this.map.itemInfo).then(l.hitch(this,function(a){this.opLayers=a;this._setLayers();this.setConfig(this.config)}))},
_getInfoTemplate:function(a){var c;if(a&&a.parentLayerInfo&&a.parentLayerInfo.controlPopupInfo){var f=a.parentLayerInfo.controlPopupInfo.infoTemplates;if(f){var d=a.url;!d&&a.layerObject&&(d=a.layerObject.url);if(d&&(a=d.split("/").pop()))f.indexOf?-1<f.indexOf(a)&&(c=f[a].infoTemplate):f.hasOwnProperty(a)&&(c=f[a].infoTemplate)}}return c},_setLayers:function(){for(var a="ArcGISFeatureLayer;ArcGISMapServiceLayer;CSV;KML;GeoRSS;ArcGISStreamLayer;Feature Layer".split(";"),c=[],f=0;f<this.opLayers._layerInfos.length;f++){var d=
!0,g=this.opLayers._layerInfos[f],b;if(g.originOperLayer){b=g.originOperLayer;var e=b.layerType;"undefined"===typeof e&&g.layerObject&&(e=g.layerObject.type);if(-1===a.indexOf(e))continue}if(0<g.newSubLayers.length){if(!this.checkNestedGroups(g.newSubLayers)){var d=g.newSubLayers,h;"KML"===b.type&&(d=b.layerObject.getLayers(),h=b.id);this._recurseOpLayers(d,c,h)}}else g.featureCollection?1<g.layers.length&&this._recurseOpLayers(g.layers,c,void 0):b?b.featureCollection?1<b.featureCollection.layers.length?
this._recurseOpLayers(b.featureCollection.layers,c,void 0):c.unshift({label:g.title,value:g.id,url:void 0,imageData:g.imageData,id:g.id,geometryType:b.featureCollection.layers[0].layerObject.geometryType,fields:b.featureCollection.layers[0].layerObject.fields,type:g.type,renderer:b.featureCollection.layers[0].layerObject.renderer,itemId:b.itemId,infoTemplate:b?this._getInfoTemplate(b):void 0,lyrType:"Feature Collection",panelImageData:g.panelImageData,supportsDynamic:d}):("undefined"===typeof g.layerObject.geometryType&&
this.setGeometryType(g.layerObject),g&&g.resourceInfo&&(d=g.resourceInfo.supportsDynamicLayers),c.unshift({label:g.title,value:g.id,url:g.layerObject.url,imageData:g.imageData,id:g.id,type:g.type,renderer:g.layerObject.renderer,geometryType:g.layerObject.geometryType,fields:g.layerObject.fields,infoTemplate:b?this._getInfoTemplate(b):void 0,lyrType:"Map Service Layer",panelImageData:g.panelImageData,supportsDynamic:d})):("undefined"===typeof g.layerObject.geometryType&&this.setGeometryType(g.layerObject),
g&&g.resourceInfo&&(d=g.resourceInfo.supportsDynamicLayers),c.unshift({label:g.title,value:g.id,url:g.layerObject.url,imageData:g.imageData,id:g.id,type:g.type,renderer:g.layerObject.renderer,geometryType:g.layerObject.geometryType,fields:g.layerObject.fields,lyrType:"",infoTemplate:b?this._getInfoTemplate(b):void 0,panelImageData:g.panelImageData,supportsDynamic:d}))}this.layer_options=l.clone(c)},checkNestedGroups:function(a){for(var c=0;c<a.length;c++)if(a[c].newSubLayers&&0<a[c].newSubLayers.length)return!0;
return!1},setConfig:function(a){this.config=a;if(!this.config.mapID||this.config.mapID&&this.config.mapID===this.map.itemId){this.oldConfig=!this.config.mapID;this.config.mainPanelText&&this.mainPanelText.set("value",this.config.mainPanelText);this.config.mainPanelIcon&&(this.panelMainIcon.innerHTML=this.config.mainPanelIcon);this.config.refreshInterval&&this.refreshInterval.set("value",this.config.refreshInterval);this.config.loadStaticData&&this.chkStatic.set("value",this.config.loadStaticData);
this.config.countEnabled&&this.panelCountOptions.set("checked",this.config.countEnabled);this.hidePanel="undefined"!==typeof this.config.hidePanel?this.config.hidePanel:!1;this.hidePanelOptions.set("checked",this.hidePanel);this.panelCountOptions.set("disabled",this.hidePanel);this.panelIconOptions.set("disabled",this.hidePanel);this.hidePanel?(h.addClass(this.panelIconOptionsLabel,"text-disabled"),h.addClass(this.panelCountOptionsLabel,"text-disabled"),v.contains(this.hidePanelHelpText,"help-off")&&
h.removeClass(this.hidePanelHelpText,"help-off"),h.addClass(this.hidePanelHelpText,"help-on")):(h.removeClass(this.panelIconOptionsLabel,"text-disabled"),h.removeClass(this.panelCountOptionsLabel,"text-disabled"),v.contains(this.hidePanelHelpText,"help-on")&&h.removeClass(this.hidePanelHelpText,"help-on"),h.addClass(this.hidePanelHelpText,"help-off"));this.config.displayPanelIcon&&this.panelIconOptions.set("checked",this.config.displayPanelIcon);this.displayLayerTable.clear();this.isInitalLoad=!0;
for(a=this.layerLoadCount=0;a<this.config.layerInfos.length;a++)this._populateLayerRow(this.config.layerInfos[a],a),this.layerLoadCount+=1;this._updateLayerLists();a=this.displayLayerTable.getRows();for(var c=0;c<a.length;c++)this._updateLayerListRows(!0,a[c]);this.displayLayerTable.getRows().length<this.layer_options.length?(h.removeClass(this.btnAddLayer,"btn-add-section-disabled"),h.addClass(this.btnAddLayer,"btn-add-section enable")):(h.addClass(this.btnAddLayer,"btn-add-section-disabled"),h.removeClass(this.btnAddLayer,
"btn-add-section enable"))}},_updateStyleColor:function(a){var c=this.appConfig.theme.name,f=this.appConfig.appId;""===f&&(f=window.location.href.split("id\x3d")[1]);n.get({url:"./apps/"+f+"/themes/"+c+"/manifest.json",sync:!0,handleAs:"json",load:l.hitch(this,function(d){d=d.styles;for(var c=0;c<d.length;c++){var b=d[c];if(b.name===a){this._styleColor=b.styleColor;this._styleColorName=b.name;break}}})})},updateThemeClusterSymbol:function(a,c){var f=a.symbolData;this.appConfig.theme.styles&&this.appConfig.theme.styles[0]&&
"undefined"===typeof this._styleColor&&this._updateStyleColor(this.appConfig.theme.styles[0]);if(this._styleColor){var d=e.fromHex(this._styleColor),g=c+1,b=0<g?30*g:30,h=0===g%2,m=d.g,k=d.b,d=d.r-b;h&&(255<d?d-=255:0>d&&(d+=255));k-=b;0===g%3&&h&&(255<k?k-=255:0>k&&(k+=255));b=m-b;0===g%5&&h&&(255<b?b-=255:0>b&&(b+=255));f.clusterType="CustomCluster";f.clusterSymbol={color:[d,b,k,128],outline:{color:[0,0,0,255],width:0,type:"esriSLS",style:"esriSLSSolid"},type:"esriSFS",style:"esriSFSSolid"};a.symbolData=
f}return a},_rowDeleted:function(){this._updateLayerLists();this._updateLayerListRows(!0);this.displayLayerTable.getRows().length<this.layer_options.length&&(h.removeClass(this.btnAddLayer,"btn-add-section-disabled"),h.addClass(this.btnAddLayer,"btn-add-section enable"))},_addLayerRow:function(){this.isInitalLoad=!1;if(!(this.displayLayerTable.getRows().length>=this.layer_options.length)){var a=this.displayLayerTable.addRow({});a.success&&a.tr&&(a=a.tr,h.addClass(a.cells[2],"displayOptions"),this._addLayersOption(a),
this._addLabelOption(a),this._addRefreshOption(a),this._addDefaultSymbol(a));this._updateLayerLists();this._updateLayerListRows(!1);this.displayLayerTable.getRows().length>=this.layer_options.length&&(h.removeClass(this.btnAddLayer,"btn-add-section enable"),h.addClass(this.btnAddLayer,"btn-add-section-disabled"))}},_populateLayerRow:function(a,c){var f=this.displayLayerTable.addRow({});if(f.success&&f.tr){f=f.tr;h.addClass(f.cells[2],"displayOptions");this._addLayersOption(f);this._addLabelOption(f);
this._addRefreshOption(f);f.selectLayers.set("value",a.id);f.labelText.set("value",a.label);f.refreshBox.set("checked",a.refresh);f.imageData=a.panelImageData;u.create("div",{"class":"imageDataGFX margin2",innerHTML:[a.imageData],title:this.nls.iconColumnText},f.cells[2]);"ThemeCluster"===a.symbolData.clusterType&&(a=this.updateThemeClusterSymbol(a,c));var d=this._getLayerOptionByValue(a.id);d.filter=a.filter;d.imageData=a.imageData;d.symbolData=a.symbolData;f.symbolData=a.symbolData;this._updateLayerLists()}},
_addLayersOption:function(a){var c;if(0<this.used_layers.length){var f=[];for(c=0;c<this.layer_options.length;c++){var d=this.layer_options[c];-1===this.used_layers.indexOf(d.value)&&f.push(d)}c=l.clone(f)}else c=l.clone(this.layer_options);if(f=k(".simple-table-cell",a)[0])h.setStyle(f,"verticalAlign","middle"),h.setStyle(f,"line-height","inherit"),c=new z({style:{width:"100%",height:"28px"},"class":"longSelect",options:c}),c.placeAt(f),c.startup(),a.selectLayers=c,this.own(q(c,"change",l.hitch(this,
function(){this._updateRefresh(a);this._updateLayerLists();this._updateLayerListRows(!0,a);this.isInitalLoad||(this._addDefaultSymbol(a),a.labelText.set("value",""));this.layerLoadCount-=1;0===this.layerLoadCount&&(this.isInitalLoad=!1)})))},_updateLayerListRows:function(a,c){var f;"undefined"!==typeof c&&(f=l.clone(c.selectLayers.value));var d=[];if(a)for(var g=l.clone(this.layer_options),b=0;b<g.length;b++){var e=g[b];-1===this.used_layers.indexOf(e.value)&&d.push(e)}g=this.displayLayerTable.getRows();
b=0;for(;b<g.length;b++){for(var e=g[b],h=e.selectLayers.value,k=0;k<this.used_layers.length;k++){var m=this.used_layers[k];m!==h&&e.selectLayers.removeOption(m)}if(0<d.length){h=0;for(;h<d.length;h++){var k=d[h],m=!0,n=0;c:for(;n<e.selectLayers.options.length;n++)if(k.value===e.selectLayers.options[n].value){m=!1;break c}m&&e.selectLayers.addOption(d[h])}}}"undefined"!==typeof c&&c.selectLayers.set("value",f)},_updateLayerLists:function(){this.used_layers=[];for(var a=this.displayLayerTable.getRows(),
c=0;c<a.length;c++)this.used_layers.push(a[c].selectLayers.value)},_addLabelOption:function(a){var c=k(".simple-table-cell",a)[1];h.setStyle(c,"verticalAlign","middle");h.setStyle(c,"line-height","inherit");var f=new w({style:{width:"100%",height:"28px"}});f.placeAt(c);f.startup();a.labelText=f},_addRefreshOption:function(a){var c=k(".simple-table-cell",a)[3];h.setStyle(c,"verticalAlign","middle");h.setStyle(c,"line-height","inherit");this.currentTR=a;var f=new x({"class":"checkBox",onChange:l.hitch(this,
function(a){var c=this.currentTR.selectLayers.value;if(a){this.refreshLayers.push(c);if(a=k(".refreshOff",this.refreshOptions.domNode)[0])h.removeClass(a,"refreshOff"),h.addClass(a,"refreshOn");this.refreshInterval.isValid()||this._disableOk()}else if(a=this.refreshLayers.indexOf(c),-1<a&&(this.refreshLayers.splice(a,1),0===this.refreshLayers.length)){if(a=k(".refreshOn",this.refreshOptions.domNode)[0])h.removeClass(a,"refreshOn"),h.addClass(a,"refreshOff");this._enableOk()}})});this._updateRefresh(a,
f);f.placeAt(c);f.startup();a.refreshBox=f},_updateRefresh:function(a,c){var f=this._getLayerOptionByValue(a.selectLayers.value);c||(c=a.refreshBox);"Feature Collection"===f.lyrType?(c.set("disabled",!1),c.set("title",this.nls.enableRefresh)):(c.set("disabled",!0),c.set("title",this.nls.disableRefresh))},_updateOK:function(){this.refreshInterval.isValid()?this._enableOk():this._disableOk()},_disableOk:function(){var a=k(".button-container")[0],c=a.children[3];t.set(a.children[2],"display","none");
t.set(c,"display","inline-block")},_enableOk:function(){var a=k(".button-container")[0],c=a.children[3];t.set(a.children[2],"display","inline-block");t.set(c,"display","none")},_addDefaultSymbol:function(a){var c=k(".simple-table-cell",a)[0];this.curRow=a;if(c){h.setStyle(c,"line-height","inherit");h.setStyle(c,"margin-left","0px");var c=this._getLayerOptionByValue(a.selectLayers.value),f=a.selectLayers.value,d=!1;"undefined"!==typeof this.curRow.symbolData&&(d=this.curRow.symbolData,d=d.userDefinedSymbol&&
d.layerId===f);!d||"undefined"===typeof c.symbolData?(c=new D({nls:this.nls,callerRow:a,layerInfo:c,value:f,symbolInfo:d?this.curRow.symbolData:c.symbolData,map:this.map,ac:this.appConfig,hidePanel:this.hidePanel}),c._setSymbol(),(a=k(".imageDataGFX",this.curRow.cells[2])[0])&&this.curRow.cells[2].removeChild(a),this.curRow.symbolData=c.symbolInfo,a=u.create("div",{"class":"imageDataGFX margin2"},this.curRow.cells[2]),null!==this.curRow.symbolData.svg&&"undefined"!==typeof this.curRow.symbolData.svg&&
a.appendChild(this.curRow.symbolData.svg),this.curRow.imageData=this.curRow.symbolData.panelHTML,this.curRow=null,c.destroy()):((a=k(".imageDataGFX",this.curRow.cells[2])[0])&&this.curRow.cells[2].removeChild(a),this.curRow.symbolData=c.symbolData,a=u.create("div",{"class":"imageDataGFX margin2"},this.curRow.cells[2]),a.appendChild(this.curRow.symbolData.svg),this.curRow.imageData=this.curRow.symbolData.panelHTML)}},_getLayerOptionByValue:function(a){for(var c=0;c<this.layer_options.length;c++){var f=
this.layer_options[c];if(f.id===a)return f}},_recurseOpLayers:function(a,c,f){G.forEach(a,l.hitch(this,function(a){var e;if(!a.getImages)if(a.newSubLayers&&0<a.newSubLayers.length)this._recurseOpLayers(a.newSubLayers,c,void 0);else if(a.featureCollection)1<a.layers.length&&this._recurseOpLayers(a.layers,c,void 0);else{"undefined"!==typeof a.layerObject&&"undefined"===typeof a.layerObject.geometryType&&this.setGeometryType(a.layerObject);var b;a.hasOwnProperty("parentLayerInfo")&&a.parentLayerInfo.hasOwnProperty("originOperLayer")&&
(b=a.parentLayerInfo.originOperLayer,e=this._getInfoTemplate(b));a.originOperLayer&&(e=this._getInfoTemplate(a.originOperLayer));var h,k;a.layerObject&&a.layerObject.url&&(h=a.layerObject.url,k=parseInt(h.substr(h.lastIndexOf("/")+1),10));var m=!0;b&&b.resourceInfo&&(m=b.resourceInfo.supportsDynamicLayers);c.push({label:a.title?a.title:a.id,value:a.id,url:h,imageData:a.imageData,id:a.id,parentLayerID:b?b.id:f,type:a.type,itemId:b?b.itemId:void 0,renderer:a.layerObject?a.layerObject.renderer:a.renderer,
geometryType:a.layerObject?a.layerObject.geometryType:a.geometryType,fields:a.layerObject?a.layerObject.fields:a.fields,subLayerId:k,infoTemplate:e,lyrType:b?b.type:void 0,supportsDynamic:m})}}))},_pickSymbol:function(a){var c=a.selectLayers.value,f=this._getLayerOptionByValue(c);this.curRow=a;var d=new D({nls:this.nls,callerRow:a,layerInfo:f,value:c,symbolInfo:"undefined"!==typeof this.curRow.symbolData?this.curRow.symbolData:f.symbolData,map:this.map,ac:this.appConfig,hidePanel:this.hidePanel}),
e=new A({width:420,autoHeight:!0,content:d,titleLabel:this.nls.sympolPopupTitle});this.own(q(d,"ok",l.hitch(this,function(a){var c=k(".imageDataGFX",this.curRow.cells[2])[0];c&&this.curRow.cells[2].removeChild(c);this.curRow.symbolData=a;u.create("div",{"class":"imageDataGFX margin2"},this.curRow.cells[2]).appendChild(a.svg);this.curRow.imageData=a.panelHTML;this.curRow=null;d.destroy();d=null;e.close()})));this.own(q(d,"cancel",l.hitch(this,function(){this.curRow=null;d.destroy();d=null;e.close()})))},
setGeometryType:function(a){var c=[];"undefined"!==typeof a.url&&-1<a.url.indexOf("MapServer")&&c.push(C({url:a.url+"?f\x3djson"}));0<c.length&&(new F(c)).then(l.hitch(this,function(a){if(a&&0<a.length){a=a[0][1];for(var d,c=0;c<this.layer_options.length;c++)if(this.layer_options[c].label===a.name){d=c;break}if("undefined"!==typeof d&&(this.layer_options[d].geometryType=a.geometryType,"undefined"!==typeof a.drawingInfo)){this.layer_options[d].renderer=a.drawingInfo.renderer;this.layer_options[d].drawingInfo=
a.drawingInfo;this.layer_options[d].fields=a.fields;for(var b,c=0;c<a.fields.length&&!(b=a.fields[c],"esriFieldTypeOID"===b.type);c++);this.layer_options[d].oidFieldName=b}}}))},uploadImage:function(){var a=new FileReader;a.onload=l.hitch(this,function(){this.panelMainIcon.innerHTML="\x3cdiv\x3e\x3c/div\x3e";this.mpi=a.result;u.create("div",{"class":"innerMainPanelIcon",style:"background-image: url("+a.result+");",title:this.nls.mainPanelIcon},this.panelMainIcon)});this.fileInput.onchange=l.hitch(this,
function(){a.readAsDataURL(this.fileInput.files[0])});this.fileInput.click()},getConfig:function(){E.close();var a=this.displayLayerTable.getRows(),c=[],e;G.forEach(a,l.hitch(this,function(a){var g=a.selectLayers.value,b=m.stripHTML(a.labelText.value),h=a.refreshBox,l=this._getLayerOptionByValue(g);e={layer:g,label:""!==b?b:l.label,refresh:h.checked,url:l.url,type:l.type,id:l.id,symbolData:a.symbolData?a.symbolData:l.symbolData,geometryType:l.geometryType,itemId:l.itemId,parentLayerID:l.parentLayerID,
renderer:l.renderer,drawingInfo:l.drawingInfo,fields:l.fields,oidFieldName:l.oidFieldName,subLayerId:l.subLayerId,infoTemplate:l.infoTemplate};a.imageData&&(e.panelImageData=a.imageData);a=k(".imageDataGFX",a)[0];e.imageData="undefined"!==typeof a?a.innerHTML:"\x3cdiv\x3e\x3c/div\x3e";c.push(e)}));this.config.mapID=this.map.itemId;this.config.layerInfos=c;this.config.mainPanelText=m.stripHTML(this.mainPanelText.value);this.config.mainPanelIcon=this.panelMainIcon.innerHTML;this.config.refreshInterval=
m.stripHTML(this.refreshInterval.value);this.config.refreshEnabled=0<this.refreshLayers.length?!0:!1;this.config.countEnabled=this.countEnabled;this.config.displayPanelIcon=this.displayPanelIcon;this.config.hidePanel=this.hidePanel;this.config.continuousRefreshEnabled=this.hidePanel;return this.config},destroy:function(){E.close();this.inherited(arguments)}})});