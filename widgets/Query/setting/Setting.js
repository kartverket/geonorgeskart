// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See http://@sbaseurl@/jsapi/jsapi/esri/copyright.txt and http://www.arcgis.com/apps/webappbuilder/copyright.txt for details.
//>>built
require({cache:{"jimu/dijit/_QueryableLayerSourcePopup":function(){define("dojo/_base/declare dojo/Evented dojo/on dojo/_base/lang dojo/_base/html jimu/dijit/Popup jimu/dijit/QueryableLayerSource jimu/dijit/LoadingIndicator esri/request".split(" "),function(l,n,s,q,g,c,f,e,b){return l([c,n],{width:830,height:560,titleLabel:"",dijitArgs:null,postCreate:function(){this.inherited(arguments);g.addClass(this.domNode,"jimu-queryable-layer-source-popup");this._initFls();this._initLoading()},getSelectedRadioType:function(){return this.sourceDijit.getSelectedRadioType()},
_initFls:function(){this.sourceDijit=new f(this.dijitArgs);this.sourceDijit.placeAt(this.contentContainerNode);this.sourceDijit.startup();this.own(s(this.sourceDijit,"ok",q.hitch(this,function(c){if(0!==c.length){var d=c[0];if(d.definition)try{d.definition.name=d.name,d.definition.url=d.url,this.emit("ok",d)}catch(a){console.error(a)}else this.loading.show(),b({url:d.url,content:{f:"json"},handleAs:"json",callbackParamName:"callback"}).then(q.hitch(this,function(a){if(this.domNode){this.loading.hide();
d.definition=a;try{d.definition.name=d.name,d.definition.url=d.url,this.emit("ok",d)}catch(b){console.error(b)}}}),q.hitch(this,function(a){console.error(a);this.domNode&&this.loading.hide()}))}})));this.own(s(this.sourceDijit,"cancel",q.hitch(this,function(){try{this.emit("cancel")}catch(b){console.error(b)}})))},_initLoading:function(){this.loading=new e({hidden:!0});this.loading.placeAt(this.domNode);this.loading.startup()}})})},"jimu/dijit/QueryableLayerSource":function(){define("dojo/_base/declare dijit/_WidgetBase dijit/_TemplatedMixin dijit/_WidgetsInTemplateMixin dojo/text!./templates/QueryableLayerSource.html dojo/_base/lang dojo/_base/html dojo/on dojo/Evented jimu/dijit/QueryableLayerChooserFromMap jimu/dijit/QueryableServiceChooserFromPortal jimu/dijit/_QueryableServiceChooserContent jimu/portalUrlUtils".split(" "),
function(l,n,s,q,g,c,f,e,b,k,d,a,t){var r=l([n,s,q,b],{baseClass:"jimu-layer-chooser-with-buttons jimu-queryable-layer-chooser-with-buttons",declaredClass:"jimu.dijit.QueryableLayerChooserWithButtons",templateString:'\x3cdiv\x3e\x3cdiv class\x3d"chooser-container" data-dojo-attach-point\x3d"chooserContainer"\x3e\x3c/div\x3e\x3cdiv class\x3d"footer"\x3e\x3cdiv class\x3d"jimu-btn jimu-float-trailing cancel" data-dojo-attach-point\x3d"btnCancel"\x3e${nls.cancel}\x3c/div\x3e\x3cdiv class\x3d"jimu-btn jimu-float-trailing ok jimu-trailing-margin1 jimu-state-disabled" data-dojo-attach-point\x3d"btnOk"\x3e${nls.ok}\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e',
queryableLayerChooserArgs:null,postMixInProperties:function(){this.nls=c.clone(window.jimuNls.common)},postCreate:function(){this.inherited(arguments);this.queryableLayerChooserFromMap=new k(this.queryableLayerChooserArgs);this.queryableLayerChooserFromMap.placeAt(this.chooserContainer);f.setStyle(this.queryableLayerChooserFromMap.domNode,{width:"100%",height:"100%"});this.own(e(this.queryableLayerChooserFromMap,"tree-click",c.hitch(this,function(){0<this.getSelectedItems().length?f.removeClass(this.btnOk,
"jimu-state-disabled"):f.addClass(this.btnOk,"jimu-state-disabled")})));this.own(e(this.btnOk,"click",c.hitch(this,function(){var a=this.getSelectedItems();0<a.length&&this.emit("ok",a)})));this.own(e(this.btnCancel,"click",c.hitch(this,function(){this.emit("cancel")})))},getSelectedItems:function(){return this.queryableLayerChooserFromMap.getSelectedItems()},startup:function(){this.inherited(arguments);this.queryableLayerChooserFromMap.startup()}});return l([n,s,q,b],{templateString:g,baseClass:"jimu-layer-source jimu-queryable-layer-source",
declaredClass:"jimu.dijit.QueryableLayerSource",nls:null,multiple:!1,createMapResponse:null,portalUrl:null,postMixInProperties:function(){this.nls=window.jimuNls.queryableLayerSource;this.portalUrl=t.getStandardPortalUrl(this.portalUrl)},postCreate:function(){this.inherited(arguments);this._initSelf()},getSelectedRadioType:function(){if(this.mapRadio.checked)return"map";if(this.portalRadio.checked)return"portal";if(this.urlRadio.checked)return"url"},getSelectedItems:function(){var a=[];this.mapRadio.checked?
a=this.queryableLayerChooserFromMap.getSelectedItems():this.portalRadio.checked?a=this.queryableServiceChooserFromPortal.getSelectedItems():this.urlRadio.checked&&(a=this.queryableServiceChooserContent.getSelectedItems());return a},startup:function(){this.inherited(arguments);this.queryableLayerChooserFromMap.startup();this.queryableServiceChooserFromPortal.startup();this.queryableServiceChooserContent.startup()},_initSelf:function(){this._initRadios();this._createQueryableLayerChooserWithButtons();
this._createQueryableServiceChooserFromPortal();this._createQueryableServiceChooserContent();this._onRadioClicked()},_createQueryableLayerChooserWithButtons:function(){this.queryableLayerChooserFromMap=new r({style:{width:"100%",height:"100%"},queryableLayerChooserArgs:{multiple:this.multiple,createMapResponse:this.createMapResponse}});this.queryableLayerChooserFromMap.operationTip=this.nls.selectLayer;this.queryableLayerChooserFromMap.placeAt(this.mapDijitContainer);this.own(e(this.queryableLayerChooserFromMap,
"ok",c.hitch(this,function(a){a&&0<a.length&&this.emit("ok",a)})));this.own(e(this.queryableLayerChooserFromMap,"cancel",c.hitch(this,function(){this.emit("cancel")})))},_createQueryableServiceChooserFromPortal:function(){this.queryableServiceChooserFromPortal=new d({multiple:this.multiple,portalUrl:this.portalUrl,style:{width:"100%",height:"100%"}});this.queryableServiceChooserFromPortal.operationTip=this.nls.chooseItem;this.queryableServiceChooserFromPortal.placeAt(this.portalDijitContainer);this.own(e(this.queryableServiceChooserFromPortal,
"next",c.hitch(this,function(){this.queryableServiceChooserFromPortal.operationTip=this.nls.chooseItem+" -\x3e "+this.nls.chooseLayer;this._updateOperationTip()})));this.own(e(this.queryableServiceChooserFromPortal,"back",c.hitch(this,function(){this.queryableServiceChooserFromPortal.operationTip=this.nls.chooseItem;this._updateOperationTip()})));this.own(e(this.queryableServiceChooserFromPortal,"ok",c.hitch(this,function(a){a&&0<a.length&&this.emit("ok",a)})));this.own(e(this.queryableServiceChooserFromPortal,
"cancel",c.hitch(this,function(){this.emit("cancel")})));0<=(this.portalUrl||"").toLowerCase().indexOf(".arcgis.com")?this.portalLabel.innerHTML=this.nls.selectFromOnline:this.portalLabel.innerHTML=this.nls.selectFromPortal},_createQueryableServiceChooserContent:function(){this.queryableServiceChooserContent=new a({multiple:this.multiple,style:{width:"100%",height:"100%"}});this.queryableServiceChooserContent.operationTip=this.nls.setServiceUrl;this.queryableServiceChooserContent.placeAt(this.urlDijitContainer);
this.own(e(this.queryableServiceChooserContent,"ok",c.hitch(this,function(a){a&&0<a.length&&this.emit("ok",a)})));this.own(e(this.queryableServiceChooserContent,"cancel",c.hitch(this,function(){this.emit("cancel")})))},_initRadios:function(){var a="queryableLayerSourceRadios_"+this._getRandomString();this.mapRadio.name=a;f.setAttr(this.mapRadio,"id","mapRadio_"+this._getRandomString());f.setAttr(this.mapLabel,"for",this.mapRadio.id);this.portalRadio.name=a;f.setAttr(this.portalRadio,"id","portalRadio_"+
this._getRandomString());f.setAttr(this.portalLabel,"for",this.portalRadio.id);this.urlRadio.name=a;f.setAttr(this.urlRadio,"id","urlRadio_"+this._getRandomString());f.setAttr(this.urlLabel,"for",this.urlRadio.id)},_getRandomString:function(){var a=Math.random().toString();return a=a.slice(2,a.length)},_onRadioClicked:function(){f.setStyle(this.mapDijitContainer,"display","none");f.setStyle(this.portalDijitContainer,"display","none");f.setStyle(this.urlDijitContainer,"display","none");this.mapRadio.checked?
(f.setStyle(this.mapDijitContainer,"display","block"),this.operationTip.innerHTML=this.nls.selectLayer):this.portalRadio.checked?(f.setStyle(this.portalDijitContainer,"display","block"),this.operationTip.innerHTML=this.nls.chooseItem):this.urlRadio.checked&&(f.setStyle(this.urlDijitContainer,"display","block"),this.operationTip.innerHTML=this.nls.setServiceUrl);this._updateOperationTip()},_updateOperationTip:function(){this.mapRadio.checked?this.operationTip.innerHTML=this.queryableLayerChooserFromMap.operationTip:
this.portalRadio.checked?this.operationTip.innerHTML=this.queryableServiceChooserFromPortal.operationTip:this.urlRadio.checked&&(this.operationTip.innerHTML=this.queryableServiceChooserContent.operationTip)}})})},"jimu/dijit/QueryableLayerChooserFromMap":function(){define(["dojo/_base/declare","./LayerChooserFromMap","dojo/_base/html"],function(l,n,s){return l([n],{baseClass:"jimu-queryable-layer-chooser-from-map",declaredClass:"jimu.dijit.QueryableLayerChooserFromMap",postMixInProperties:function(){this.inherited(arguments);
this.filter=n.createQueryableLayerFilter()},postCreate:function(){this.inherited(arguments);s.addClass(this.domNode,"jimu-basic-layer-chooser-from-map")},getHandledItem:function(l){var g=this.inherited(arguments),c=l&&l.layerInfo,c=c&&c.layerObject;g.url=c&&c.url||"";return g}})})},"jimu/dijit/LayerChooserFromMap":function(){define("dojo/_base/declare dijit/_WidgetBase dijit/_TemplatedMixin dijit/_WidgetsInTemplateMixin dojo/Evented dojo/on dojo/store/Memory dojo/Deferred dojo/store/Observable dijit/tree/ObjectStoreModel dojo/promise/all dojo/_base/lang dojo/_base/html dojo/_base/array jimu/utils jimu/dijit/_Tree jimu/LayerInfos/LayerInfos jimu/dijit/LoadingIndicator".split(" "),
function(l,n,s,q,g,c,f,e,b,k,d,a,t,r,p,m,h,u){var v=l([n,s,q,g],{templateString:'\x3cdiv style\x3d"width:100%;"\x3e\x3cdiv data-dojo-attach-point\x3d"errorTipSection" class\x3d"error-tip-section"\x3e\x3cspan class\x3d"jimu-icon jimu-icon-error"\x3e\x3c/span\x3e\x3cspan class\x3d"jimu-state-error-text" data-dojo-attach-point\x3d"errTip"\x3e${nls.noLayersTip}\x3c/span\x3e\x3c/div\x3e\x3c/div\x3e',_store:null,_id:0,_treeClass:"layer-chooser-tree",createMapResponse:null,multiple:!1,onlyShowVisible:!1,
updateWhenLayerInfosIsShowInMapChanged:!1,postMixInProperties:function(){this.nls=window.jimuNls.basicLayerChooserFromMap},postCreate:function(){this.inherited(arguments);t.addClass(this.domNode,"jimu-basic-layer-chooser-from-map");this.multiple=!!this.multiple;this.shelter=new u({hidden:!0});this.shelter.placeAt(this.domNode);this.shelter.startup();this._createTree();this.basicFilter=a.hitch(this,this.basicFilter);this.filter=v.andCombineFilters([this.basicFilter,this.filter]);this.createMapResponse&&
this.setCreateMapResponse(this.createMapResponse)},basicFilter:function(a){var h=new e;this.onlyShowVisible?h.resolve(a.isShowInMap()):h.resolve(!0);return h},filter:function(a){a=new e;a.resolve(!0);return a},getSelectedItems:function(){var h=this.tree.getSelectedItems();return r.map(h,a.hitch(this,function(a){return this.getHandledItem(a)}))},getAllItems:function(){var h=this.tree.getAllItems(),b=[];r.forEach(h,a.hitch(this,function(a){"root"!==a.id&&(a=this.getHandledItem(a),b.push(a))}));return b},
getHandledItem:function(a){return{name:a.name,layerInfo:a.layerInfo}},_isLeafItem:function(a){return a.isLeaf},setCreateMapResponse:function(b){this.createMapResponse=b;h.getInstance(this.createMapResponse.map,this.createMapResponse.itemInfo).then(a.hitch(this,function(h){this.layerInfosObj=h;this.own(c(this.layerInfosObj,"layerInfosChanged",a.hitch(this,this._onLayerInfosChanged)));this.updateWhenLayerInfosIsShowInMapChanged&&this.own(c(this.layerInfosObj,"layerInfosIsShowInMapChanged",a.hitch(this,
this._onLayerInfosIsShowInMapChanged)));this._buildTree(this.layerInfosObj)}))},_onLayerInfosChanged:function(a,h){this._buildTree(this.layerInfosObj);this.emit("update")},_onLayerInfosIsShowInMapChanged:function(a){this._buildTree(this.layerInfosObj);this.emit("update")},_buildTree:function(h){this._clear();t.setStyle(this.errorTipSection,"display","block");var b=h.getLayerInfoArray(),b=b.concat(h.getTableInfoArray());0!==b.length&&(t.setStyle(this.errorTipSection,"display","none"),r.forEach(b,a.hitch(this,
function(a){this._addDirectLayerInfo(a)})))},_addDirectLayerInfo:function(h){h&&h.getLayerObject().then(a.hitch(this,function(){this._addItem("root",h)}),a.hitch(this,function(a){console.error(a)}))},_clear:function(){var h=this._store.query({parent:"root"});r.forEach(h,a.hitch(this,function(a){a&&"root"!==a.id&&this._store.remove(a.id)}))},_addItem:function(h,b){var m=null,c=b.getLayerType(),e=this.filter(b);d({layerType:c,valid:e}).then(a.hitch(this,function(c){if(c.valid){var e=a.hitch(this,function(a,
d){this._id++;m={name:b.title||"",parent:h,layerInfo:b,type:c.layerType,layerClass:b.layerObject.declaredClass,id:this._id.toString(),isLeaf:a,hasChildren:d};this._store.add(m)}),t=b.getSubLayers(),p=0===t.length;p?e(p,!1):(t=r.map(t,a.hitch(this,function(a){return this.filter(a)})),d(t).then(a.hitch(this,function(a){(a=r.some(a,function(a){return a}))&&e(p,a)})))}}))},_getRootItem:function(){return{id:"root",name:"Map Root",type:"root",isLeaf:!1,hasChildren:!0}},_createTree:function(){var h=this._getRootItem(),
h=new f({data:[h],getChildren:function(a){return this.query({parent:a.id})}});this._store=new b(h);h=new k({store:this._store,query:{id:"root"},mayHaveChildren:a.hitch(this,this._mayHaveChildren)});this.tree=new m({multiple:this.multiple,model:h,showRoot:!1,isLeafItem:a.hitch(this,this._isLeafItem),style:{width:"100%"},onOpen:a.hitch(this,function(a,h){"root"!==a.id&&this._onTreeOpen(a,h)}),onClick:a.hitch(this,function(a,h,b){this._onTreeClick(a,h,b);this.emit("tree-click",a,h,b)}),getIconStyle:a.hitch(this,
function(a,h){var b=null;if(!a||"root"===a.id)return null;var d={width:"20px",height:"20px",backgroundRepeat:"no-repeat",backgroundPosition:"center center",backgroundImage:""},m=window.location.protocol+"//"+window.location.host+require.toUrl("jimu"),c=this._getIconImageName(a,h);c&&(d.backgroundImage="url("+m+"/css/images/"+c+")",b=d);return b})});t.addClass(this.tree.domNode,this._treeClass);this.tree.placeAt(this.shelter.domNode,"before")},_mayHaveChildren:function(a){return a.hasChildren},_getIconImageName:function(a,
h){var b="";if("ArcGISDynamicMapServiceLayer"===a.type||"ArcGISTiledMapServiceLayer"===a.type)b=h?"mapserver_open.png":"mapserver_close.png";else if("GroupLayer"===a.type)b=h?"group_layer2.png":"group_layer1.png";else if("FeatureLayer"===a.type){var d=p.getTypeByGeometryType(a.layerInfo.layerObject.geometryType);"point"===d?b="point_layer1.png":"polyline"===d?b="line_layer1.png":"polygon"===d&&(b="polygon_layer1.png")}else b="Table"===a.type?"table.png":"ArcGISImageServiceLayer"===a.type||"ArcGISImageServiceVectorLayer"===
a.type?"image_layer.png":h?"mapserver_open.png":"mapserver_close.png";return b},_onTreeOpen:function(h,b){if("root"!==h.id){var m=[],c=[],m=h.layerInfo.getSubLayers();h.checked||(this.shelter.show(),c=r.map(m,a.hitch(this,function(a){return a.getLayerObject()})),d(c).then(a.hitch(this,function(){this.domNode&&(r.forEach(m,a.hitch(this,function(a){this._addItem(h.id,a)})),h.checked=!0,this.shelter.hide())}),a.hitch(this,function(a){console.error(a);this.shelter.hide()})))}},_onTreeClick:function(a,
h,b){},destroy:function(){this.shelter&&this.shelter.destroy();this.tree&&this.tree.destroy();this.shelter=null;this.tree.destroy();this.inherited(arguments)}});v.createFilterByLayerType=function(h){a.isArrayLike(h)||(h=[]);return function(a){var b=new e;if(0===h.length)b.resolve(!0);else{var m=[];a.traversal(function(a){m.push(a.getLayerType())});d(m).then(function(a){for(var d=0;d<a.length;d++)for(var m=0;m<h.length;m++)if(a[d]===h[m]){b.resolve(!0);return}b.resolve(!1)},function(a){console.error(a);
b.reject(a)})}return b}};v.createFeaturelayerFilter=function(a,h,b){var m=["point","polyline","polygon"];a&&0<a.length?(a=r.filter(a,function(a){return 0<=m.indexOf(a)}),0===a.length&&(a=m)):a=m;return function(m){var c=new e,t=m.getLayerType();m=m.getLayerObject();d({layerType:t,layerObject:m}).then(function(d){var m=d.layerType;d=d.layerObject;"ArcGISDynamicMapServiceLayer"===m?c.resolve(!0):"ArcGISTiledMapServiceLayer"===m?c.resolve(!0):"GroupLayer"===m?c.resolve(!0):"FeatureCollection"===m?c.resolve(!0):
"FeatureLayer"===m?(m=p.getTypeByGeometryType(d.geometryType),m=0<=r.indexOf(a,m),d.url?(d=p.isFeaturelayerUrlSupportQuery(d.url,d.capabilities),c.resolve(m&&d)):c.resolve(h&&m)):"Table"===m?(d=p.isFeaturelayerUrlSupportQuery(d.url,d.capabilities),c.resolve(b&&d)):c.resolve(!1)},function(a){console.log(a);c.reject(a)});return c}};v.createImageServiceLayerFilter=function(a){return function(h){var b=new e,m=h.getLayerType();h=h.getLayerObject();d({layerType:m,layerObject:h}).then(function(h){var d=
h.layerType;"ArcGISImageServiceLayer"===d||"ArcGISImageServiceVectorLayer"===d?a?p.isImageServiceSupportQuery(h.layerObject.capabilities)?b.resolve(!0):b.resolve(!1):b.resolve(!0):b.resolve(!1)},function(a){console.log(a);b.reject(a)});return b}};v.createQueryableLayerFilter=function(){var a=v.createFeaturelayerFilter(["point","polyline","polygon"],!1,!0),h=v.createImageServiceLayerFilter(!0);return v.orCombineFilters([a,h])};v.andCombineFilters=function(a){return v._combineFilters(a,!0)};v.orCombineFilters=
function(a){return v._combineFilters(a,!1)};v._combineFilters=function(a,h){return function(b){var m=new e,c=r.map(a,function(a){return a(b)});d(c).then(function(a){var b=!1,b=h?r.every(a,function(a){return a}):r.some(a,function(a){return a});m.resolve(b)},function(a){console.error(a);m.reject(a)});return m}};return v})},"dojo/store/Observable":function(){define(["../_base/kernel","../_base/lang","../when","../_base/array"],function(l,n,s,q){l=function(g){function c(b,a){var c=g[b];c&&(g[b]=function(e){var p;
"put"===b&&(p=g.getIdentity(e));if(k)return c.apply(this,arguments);k=!0;try{var m=c.apply(this,arguments);s(m,function(h){a("object"==typeof h&&h||e,p)});return m}finally{k=!1}})}var f=[],e=0;g=n.delegate(g);g.notify=function(b,a){e++;for(var c=f.slice(),r=0,p=c.length;r<p;r++)c[r](b,a)};var b=g.query;g.query=function(d,a){a=a||{};var c=b.apply(this,arguments);if(c&&c.forEach){var r=n.mixin({},a);delete r.start;delete r.count;var p=g.queryEngine&&g.queryEngine(d,r),m=e,h=[],k;c.observe=function(b,
d){1==h.push(b)&&f.push(k=function(b,r){s(c,function(c){var t=c.length!=a.count,k,f;if(++m!=e)throw Error("Query is out of date, you must observe() the query prior to any data modifications");var v,u=-1,l=-1;if(void 0!==r){var n=[].concat(c);p&&!b&&(n=p(c));k=0;for(f=c.length;k<f;k++){var x=c[k];if(g.getIdentity(x)==r&&!(0>n.indexOf(x))){v=x;u=k;(p||!b)&&c.splice(k,1);break}}}if(p){if(b&&(p.matches?p.matches(b):p([b]).length))k=-1<u?u:c.length,c.splice(k,0,b),l=q.indexOf(p(c),b),c.splice(k,1),a.start&&
0==l||!t&&l==c.length?l=-1:c.splice(l,0,b)}else b&&(void 0!==r?l=u:a.start||(l=g.defaultIndex||0,c.splice(l,0,b)));if((-1<u||-1<l)&&(d||!p||u!=l)){t=h.slice();for(k=0;c=t[k];k++)c(b||v,u,l)}})});var r={};r.remove=r.cancel=function(){var a=q.indexOf(h,b);-1<a&&(h.splice(a,1),h.length||f.splice(q.indexOf(f,k),1))};return r}}return c};var k;c("put",function(b,a){g.notify(b,a)});c("add",function(b){g.notify(b)});c("remove",function(b){g.notify(void 0,b)});return g};n.setObject("dojo.store.Observable",
l);return l})},"dijit/tree/ObjectStoreModel":function(){define("dojo/_base/array dojo/aspect dojo/_base/declare dojo/Deferred dojo/_base/lang dojo/when ../Destroyable".split(" "),function(l,n,s,q,g,c,f){return s("dijit.tree.ObjectStoreModel",f,{store:null,labelAttr:"name",labelType:"text",root:null,query:null,constructor:function(c){g.mixin(this,c);this.childrenCache={}},getRoot:function(e,b){if(this.root)e(this.root);else{var k=this.store.query(this.query);k.then&&this.own(k);c(k,g.hitch(this,function(b){if(1!=
b.length)throw Error("dijit.tree.ObjectStoreModel: root query returned "+b.length+" items, but must return exactly one");this.root=b[0];e(this.root);k.observe&&k.observe(g.hitch(this,function(a){this.onChange(a)}),!0)}),b)}},mayHaveChildren:function(){return!0},getChildren:function(e,b,k){var d=this.store.getIdentity(e);if(this.childrenCache[d])c(this.childrenCache[d],b,k);else{var a=this.childrenCache[d]=this.store.getChildren(e);a.then&&this.own(a);a.observe&&this.own(a.observe(g.hitch(this,function(b,
d,k){this.onChange(b);d!=k&&c(a,g.hitch(this,"onChildrenChange",e))}),!0));c(a,b,k)}},isItem:function(){return!0},getIdentity:function(c){return this.store.getIdentity(c)},getLabel:function(c){return c[this.labelAttr]},newItem:function(c,b,k,d){return this.store.put(c,{parent:b,before:d})},pasteItem:function(c,b,k,d,a,t){var r=new q;if(b===k&&!d&&!t)return r.resolve(!0),r;b&&!d?this.getChildren(b,g.hitch(this,function(a){a=[].concat(a);var d=l.indexOf(a,c);a.splice(d,1);this.onChildrenChange(b,a);
r.resolve(this.store.put(c,{overwrite:!0,parent:k,oldParent:b,before:t}))})):r.resolve(this.store.put(c,{overwrite:!0,parent:k,oldParent:b,before:t}));return r},onChange:function(){},onChildrenChange:function(){},onDelete:function(){}})})},"jimu/dijit/_Tree":function(){define("dojo/_base/declare dijit/_WidgetBase dijit/_TemplatedMixin dojo/text!./templates/_TreeNode.html dojo/_base/lang dojo/_base/html dojo/_base/array dojo/_base/event dojo/query dojo/aspect dojo/on dojo/Evented dijit/registry dijit/Tree jimu/utils".split(" "),
function(l,n,s,q,g,c,f,e,b,k,d,a,t,r,p){var m=l([r._TreeNode,a],{templateString:q,declaredClass:"jimu._TreeNode",isLeaf:!1,groupId:"",postCreate:function(){this.inherited(arguments);c.addClass(this.domNode,"jimu-tree-node");this.isLeaf=!!this.isLeaf;this.groupId?(this.checkNode=c.toDom('\x3cinput type\x3d"radio" /\x3e'),this.checkNode.name=this.groupId):this.checkNode=c.toDom('\x3cinput type\x3d"checkbox" /\x3e');c.addClass(this.checkNode,"jimu-tree-check-node");c.place(this.checkNode,this.contentNode,
"first");this.own(d(this.checkNode,"click",g.hitch(this,this._onClick)));this.isLeaf?this.groupId?c.setStyle(this.checkNode,"display","none"):c.setStyle(this.checkNode,"display","inline"):c.setStyle(this.checkNode,"display","none");this.isLeaf?c.addClass(this.domNode,"jimu-tree-leaf-node"):c.addClass(this.domNode,"jimu-tree-not-leaf-node")},select:function(){this.isLeaf&&(this.checkNode.checked=!0,c.addClass(this.domNode,"jimu-tree-selected-leaf-node"))},unselect:function(){this.isLeaf&&(this.checkNode.checked=
!1,c.removeClass(this.domNode,"jimu-tree-selected-leaf-node"))},toggleSelect:function(){this.isLeaf&&(this.checkNode.checked?this.unselect():this.select())},_onClick:function(a){(a.target||a.srcElement)===this.checkNode?this.tree._onCheckNodeClick(this,this.checkNode.checked,a):this.tree._onClick(this,a)},_onChange:function(){this.isLeaf&&setTimeout(g.hitch(this,function(){this.checkNode.checked?this.emit("tn-select",this):this.emit("tn-unselect",this)}),100)},destroy:function(){delete this.tree;
this.inherited(arguments)}});return l([r,a],{declaredClass:"jimu._Tree",openOnClick:!0,multiple:!0,uniqueId:"",showRoot:!1,postMixInProperties:function(){this.inherited(arguments);this.uniqueId="tree_"+p.getRandomString()},postCreate:function(){this.inherited(arguments);c.addClass(this.domNode,"jimu-tree");this.own(k.before(this,"onClick",g.hitch(this,this._jimuBeforeClick)));this.rootLoadingIndicator&&c.setStyle(this.rootLoadingIndicator,"display","none");this.dndController.singular=!0},removeItem:function(a){this.model.store.remove(a)},
getAllItems:function(){var a=this.getAllTreeNodeWidgets();return f.map(a,g.hitch(this,function(a){var h=a.item;h.selected=a.checkNode.checked;return h}))},getSelectedItems:function(){var a=this.getAllTreeNodeWidgets(),a=f.filter(a,g.hitch(this,function(a){return a.checkNode.checked}));return f.map(a,g.hitch(this,function(a){return a.item}))},getFilteredItems:function(a){var b=this.getAllTreeNodeWidgets(),b=f.map(b,g.hitch(this,function(a){var h=a.item;h.selected=a.checkNode.checked;return h}));return f.filter(b,
g.hitch(this,function(b){return a(b)}))},getTreeNodeByItemId:function(a){for(var b=this._getAllTreeNodeDoms(),d=0;d<b.length;d++){var c=t.byNode(b[d]);if(c.item.id.toString()===a.toString())return c}return null},selectItem:function(a){(a=this.getTreeNodeByItemId(a))&&a.isLeaf&&this.selectNodeWidget(a)},unselectItem:function(a){(a=this.getTreeNodeByItemId(a))&&a.isLeaf&&a.unselect()},getAllLeafTreeNodeWidgets:function(){var a=this.getAllTreeNodeWidgets();return f.filter(a,g.hitch(this,function(a){return a.isLeaf}))},
getAllTreeNodeWidgets:function(){var a=this._getAllTreeNodeDoms();return f.map(a,g.hitch(this,function(a){return t.byNode(a)}))},isLeafItem:function(a){return a&&a.isLeaf},_getAllTreeNodeDoms:function(){return b(".dijitTreeNode",this.domNode)},_createTreeNode:function(a){a.isLeaf=this.isLeafItem(a.item);this.multiple||(a.groupId=this.uniqueId);return new m(a)},_onTreeNodeSelect:function(a){this.emit("item-select",{item:a.item,treeNode:a})},_onTreeNodeUnselect:function(a){this.emit("item-unselect",
{item:a.item,treeNode:a})},selectNodeWidget:function(a){this.multiple||this.unselectAllLeafNodeWidgets();a.select()},_jimuBeforeClick:function(a,b,d){b.isLeaf&&(c.hasClass(d.target||d.srcElement,"jimu-tree-check-node")||(this.multiple?b.toggleSelect():this.selectNodeWidget(b)));return arguments},_onCheckNodeClick:function(a,b,d){!this.multiple&&b&&this.unselectAllLeafNodeWidgets();e.stop(d);this.focusNode(a);setTimeout(g.hitch(this,function(){b?this.selectNodeWidget(a):a.unselect();this.onClick(a.item,
a,d)}),0)},unselectAllLeafNodeWidgets:function(){var a=this.getAllLeafTreeNodeWidgets();f.forEach(a,g.hitch(this,function(a){a.unselect()}))}})})},"dijit/Tree":function(){define("dojo/_base/array dojo/aspect dojo/cookie dojo/_base/declare dojo/Deferred dojo/promise/all dojo/dom dojo/dom-class dojo/dom-geometry dojo/dom-style dojo/errors/create dojo/fx dojo/has dojo/_base/kernel dojo/keys dojo/_base/lang dojo/on dojo/topic dojo/touch dojo/when ./a11yclick ./focus ./registry ./_base/manager ./_Widget ./_TemplatedMixin ./_Container ./_Contained ./_CssStateMixin ./_KeyNavMixin dojo/text!./templates/TreeNode.html dojo/text!./templates/Tree.html ./tree/TreeStoreModel ./tree/ForestStoreModel ./tree/_dndSelector dojo/query!css2".split(" "),
function(l,n,s,q,g,c,f,e,b,k,d,a,t,r,p,m,h,u,v,B,x,A,y,D,E,G,H,J,F,I,K,L,O,M,N){function w(a){return m.delegate(a.promise||a,{addCallback:function(a){this.then(a)},addErrback:function(a){this.otherwise(a)}})}var C=q("dijit._TreeNode",[E,G,H,J,F],{item:null,isTreeNode:!0,label:"",_setLabelAttr:function(a){this.labelNode["html"==this.labelType?"innerHTML":"innerText"in this.labelNode?"innerText":"textContent"]=a;this._set("label",a);t("dojo-bidi")&&this.applyTextDir(this.labelNode)},labelType:"text",
isExpandable:null,isExpanded:!1,state:"NotLoaded",templateString:K,baseClass:"dijitTreeNode",cssStateNodes:{rowNode:"dijitTreeRow"},_setTooltipAttr:{node:"rowNode",type:"attribute",attribute:"title"},buildRendering:function(){this.inherited(arguments);this._setExpando();this._updateItemClasses(this.item);this.isExpandable&&this.labelNode.setAttribute("aria-expanded",this.isExpanded);this.setSelected(!1)},_setIndentAttr:function(a){var b=Math.max(a,0)*this.tree._nodePixelIndent+"px";k.set(this.domNode,
"backgroundPosition",b+" 0px");k.set(this.rowNode,this.isLeftToRight()?"paddingLeft":"paddingRight",b);l.forEach(this.getChildren(),function(b){b.set("indent",a+1)});this._set("indent",a)},markProcessing:function(){this.state="Loading";this._setExpando(!0)},unmarkProcessing:function(){this._setExpando(!1)},_updateItemClasses:function(a){var b=this.tree,h=b.model;b._v10Compat&&a===h.root&&(a=null);this._applyClassAndStyle(a,"icon","Icon");this._applyClassAndStyle(a,"label","Label");this._applyClassAndStyle(a,
"row","Row");this.tree._startPaint(!0)},_applyClassAndStyle:function(a,b,h){var d="_"+b+"Class";b+="Node";var c=this[d];this[d]=this.tree["get"+h+"Class"](a,this.isExpanded);e.replace(this[b],this[d]||"",c||"");k.set(this[b],this.tree["get"+h+"Style"](a,this.isExpanded)||{})},_updateLayout:function(){var a=this.getParent(),a=!a||!a.rowNode||"none"==a.rowNode.style.display;e.toggle(this.domNode,"dijitTreeIsRoot",a);e.toggle(this.domNode,"dijitTreeIsLast",!a&&!this.getNextSibling())},_setExpando:function(a){var b=
["dijitTreeExpandoLoading","dijitTreeExpandoOpened","dijitTreeExpandoClosed","dijitTreeExpandoLeaf"];a=a?0:this.isExpandable?this.isExpanded?1:2:3;e.replace(this.expandoNode,b[a],b);this.expandoNodeText.innerHTML=["*","-","+","*"][a]},expand:function(){if(this._expandDeferred)return w(this._expandDeferred);this._collapseDeferred&&(this._collapseDeferred.cancel(),delete this._collapseDeferred);this.isExpanded=!0;this.labelNode.setAttribute("aria-expanded","true");(this.tree.showRoot||this!==this.tree.rootNode)&&
this.containerNode.setAttribute("role","group");e.add(this.contentNode,"dijitTreeContentExpanded");this._setExpando();this._updateItemClasses(this.item);this==this.tree.rootNode&&this.tree.showRoot&&this.tree.domNode.setAttribute("aria-expanded","true");var b=a.wipeIn({node:this.containerNode,duration:D.defaultDuration}),h=this._expandDeferred=new g(function(){b.stop()});n.after(b,"onEnd",function(){h.resolve(!0)},!0);b.play();return w(h)},collapse:function(){if(this._collapseDeferred)return w(this._collapseDeferred);
this._expandDeferred&&(this._expandDeferred.cancel(),delete this._expandDeferred);this.isExpanded=!1;this.labelNode.setAttribute("aria-expanded","false");this==this.tree.rootNode&&this.tree.showRoot&&this.tree.domNode.setAttribute("aria-expanded","false");e.remove(this.contentNode,"dijitTreeContentExpanded");this._setExpando();this._updateItemClasses(this.item);var b=a.wipeOut({node:this.containerNode,duration:D.defaultDuration}),h=this._collapseDeferred=new g(function(){b.stop()});n.after(b,"onEnd",
function(){h.resolve(!0)},!0);b.play();return w(h)},indent:0,setChildItems:function(a){var b=this.tree,h=b.model,d=[],m=b.focusedChild,e=this.getChildren();l.forEach(e,function(a){H.prototype.removeChild.call(this,a)},this);this.defer(function(){l.forEach(e,function(a){if(!a._destroyed&&!a.getParent()){b.dndController.removeTreeNode(a);var d=function(a){var c=h.getIdentity(a.item),m=b._itemNodesMap[c];1==m.length?delete b._itemNodesMap[c]:(c=l.indexOf(m,a),-1!=c&&m.splice(c,1));l.forEach(a.getChildren(),
d)};d(a);if(b.persist){var c=l.map(a.getTreePath(),function(a){return b.model.getIdentity(a)}).join("/"),e;for(e in b._openedNodes)e.substr(0,c.length)==c&&delete b._openedNodes[e];b._saveExpandedNodes()}b.lastFocusedChild&&!f.isDescendant(b.lastFocusedChild,b.domNode)&&delete b.lastFocusedChild;m&&!f.isDescendant(m,b.domNode)&&b.focus();a.destroyRecursive()}})});this.state="Loaded";a&&0<a.length?(this.isExpandable=!0,l.forEach(a,function(a){var c=h.getIdentity(a),m=b._itemNodesMap[c],e;if(m)for(var r=
0;r<m.length;r++)if(m[r]&&!m[r].getParent()){e=m[r];e.set("indent",this.indent+1);break}e||(e=this.tree._createTreeNode({item:a,tree:b,isExpandable:h.mayHaveChildren(a),label:b.getLabel(a),labelType:b.model&&b.model.labelType||"text",tooltip:b.getTooltip(a),ownerDocument:b.ownerDocument,dir:b.dir,lang:b.lang,textDir:b.textDir,indent:this.indent+1}),m?m.push(e):b._itemNodesMap[c]=[e]);this.addChild(e);(this.tree.autoExpand||this.tree._state(e))&&d.push(b._expandNode(e))},this),l.forEach(this.getChildren(),
function(a){a._updateLayout()})):this.isExpandable=!1;this._setExpando&&this._setExpando(!1);this._updateItemClasses(this.item);a=c(d);this.tree._startPaint(a);return w(a)},getTreePath:function(){for(var a=this,b=[];a&&a!==this.tree.rootNode;)b.unshift(a.item),a=a.getParent();b.unshift(this.tree.rootNode.item);return b},getIdentity:function(){return this.tree.model.getIdentity(this.item)},removeChild:function(a){this.inherited(arguments);var b=this.getChildren();0==b.length&&(this.isExpandable=!1,
this.collapse());l.forEach(b,function(a){a._updateLayout()})},makeExpandable:function(){this.isExpandable=!0;this._setExpando(!1)},setSelected:function(a){this.labelNode.setAttribute("aria-selected",a?"true":"false");e.toggle(this.rowNode,"dijitTreeRowSelected",a)},focus:function(){A.focus(this.focusNode)}});t("dojo-bidi")&&C.extend({_setTextDirAttr:function(a){if(a&&(this.textDir!=a||!this._created))this._set("textDir",a),this.applyTextDir(this.labelNode),l.forEach(this.getChildren(),function(b){b.set("textDir",
a)},this)}});var z=q("dijit.Tree",[E,I,G,F],{baseClass:"dijitTree",store:null,model:null,query:null,label:"",showRoot:!0,childrenAttr:["children"],paths:[],path:[],selectedItems:null,selectedItem:null,openOnClick:!1,openOnDblClick:!1,templateString:L,persist:!1,autoExpand:!1,dndController:N,dndParams:"onDndDrop itemCreator onDndCancel checkAcceptance checkItemAcceptance dragThreshold betweenThreshold".split(" "),onDndDrop:null,itemCreator:null,onDndCancel:null,checkAcceptance:null,checkItemAcceptance:null,
dragThreshold:5,betweenThreshold:0,_nodePixelIndent:19,_publish:function(a,b){u.publish(this.id,m.mixin({tree:this,event:a},b||{}))},postMixInProperties:function(){this.tree=this;this.autoExpand&&(this.persist=!1);this._itemNodesMap={};!this.cookieName&&this.id&&(this.cookieName=this.id+"SaveStateCookie");this.expandChildrenDeferred=new g;this.pendingCommandsPromise=this.expandChildrenDeferred.promise;this.inherited(arguments)},postCreate:function(){this._initState();var a=this;this.own(h(this.containerNode,
h.selector(".dijitTreeNode",v.enter),function(b){a._onNodeMouseEnter(y.byNode(this),b)}),h(this.containerNode,h.selector(".dijitTreeNode",v.leave),function(b){a._onNodeMouseLeave(y.byNode(this),b)}),h(this.containerNode,h.selector(".dijitTreeRow",x.press),function(b){a._onNodePress(y.getEnclosingWidget(this),b)}),h(this.containerNode,h.selector(".dijitTreeRow",x),function(b){a._onClick(y.getEnclosingWidget(this),b)}),h(this.containerNode,h.selector(".dijitTreeRow","dblclick"),function(b){a._onDblClick(y.getEnclosingWidget(this),
b)}));this.model||this._store2model();this.own(n.after(this.model,"onChange",m.hitch(this,"_onItemChange"),!0),n.after(this.model,"onChildrenChange",m.hitch(this,"_onItemChildrenChange"),!0),n.after(this.model,"onDelete",m.hitch(this,"_onItemDelete"),!0));this.inherited(arguments);if(this.dndController){m.isString(this.dndController)&&(this.dndController=m.getObject(this.dndController));for(var b={},d=0;d<this.dndParams.length;d++)this[this.dndParams[d]]&&(b[this.dndParams[d]]=this[this.dndParams[d]]);
this.dndController=new this.dndController(this,b)}this._load();this.onLoadDeferred=w(this.pendingCommandsPromise);this.onLoadDeferred.then(m.hitch(this,"onLoad"))},_store2model:function(){this._v10Compat=!0;r.deprecated("Tree: from version 2.0, should specify a model object rather than a store/query");var a={id:this.id+"_ForestStoreModel",store:this.store,query:this.query,childrenAttrs:this.childrenAttr};this.params.mayHaveChildren&&(a.mayHaveChildren=m.hitch(this,"mayHaveChildren"));this.params.getItemChildren&&
(a.getChildren=m.hitch(this,function(a,b,h){this.getItemChildren(this._v10Compat&&a===this.model.root?null:a,b,h)}));this.model=new M(a);this.showRoot=Boolean(this.label)},onLoad:function(){},_load:function(){this.model.getRoot(m.hitch(this,function(a){var b=this.rootNode=this.tree._createTreeNode({item:a,tree:this,isExpandable:!0,label:this.label||this.getLabel(a),labelType:this.model.labelType||"text",textDir:this.textDir,indent:this.showRoot?0:-1});this.showRoot?(this.domNode.setAttribute("aria-multiselectable",
!this.dndController.singular),this.rootLoadingIndicator.style.display="none"):(b.rowNode.style.display="none",this.domNode.setAttribute("role","presentation"),this.domNode.removeAttribute("aria-expanded"),this.domNode.removeAttribute("aria-multiselectable"),this["aria-label"]?(b.containerNode.setAttribute("aria-label",this["aria-label"]),this.domNode.removeAttribute("aria-label")):this["aria-labelledby"]&&(b.containerNode.setAttribute("aria-labelledby",this["aria-labelledby"]),this.domNode.removeAttribute("aria-labelledby")),
b.labelNode.setAttribute("role","presentation"),b.labelNode.removeAttribute("aria-selected"),b.containerNode.setAttribute("role","tree"),b.containerNode.setAttribute("aria-expanded","true"),b.containerNode.setAttribute("aria-multiselectable",!this.dndController.singular));this.containerNode.appendChild(b.domNode);a=this.model.getIdentity(a);this._itemNodesMap[a]?this._itemNodesMap[a].push(b):this._itemNodesMap[a]=[b];b._updateLayout();this._expandNode(b).then(m.hitch(this,function(){this._destroyed||
(this.rootLoadingIndicator.style.display="none",this.expandChildrenDeferred.resolve(!0))}))}),m.hitch(this,function(a){console.error(this,": error loading root: ",a)}))},getNodesByItem:function(a){if(!a)return[];a=m.isString(a)?a:this.model.getIdentity(a);return[].concat(this._itemNodesMap[a])},_setSelectedItemAttr:function(a){this.set("selectedItems",[a])},_setSelectedItemsAttr:function(a){var b=this;return this.pendingCommandsPromise=this.pendingCommandsPromise.always(m.hitch(this,function(){var h=
l.map(a,function(a){return!a||m.isString(a)?a:b.model.getIdentity(a)}),d=[];l.forEach(h,function(a){d=d.concat(b._itemNodesMap[a]||[])});this.set("selectedNodes",d)}))},_setPathAttr:function(a){return a.length?w(this.set("paths",[a]).then(function(a){return a[0]})):w(this.set("paths",[]).then(function(a){return a[0]}))},_setPathsAttr:function(a){function b(a,d){var c=a.shift(),m=l.filter(d,function(a){return a.getIdentity()==c})[0];if(m)return a.length?h._expandNode(m).then(function(){return b(a,
m.getChildren())}):m;throw new z.PathError("Could not expand path at "+c);}var h=this;return w(this.pendingCommandsPromise=this.pendingCommandsPromise.always(function(){return c(l.map(a,function(a){a=l.map(a,function(a){return a&&m.isObject(a)?h.model.getIdentity(a):a});if(a.length)return b(a,[h.rootNode]);throw new z.PathError("Empty path");}))}).then(function(a){h.set("selectedNodes",a);return h.paths}))},_setSelectedNodeAttr:function(a){this.set("selectedNodes",[a])},_setSelectedNodesAttr:function(a){this.dndController.setSelection(a)},
expandAll:function(){function a(h){return b._expandNode(h).then(function(){var b=l.filter(h.getChildren()||[],function(a){return a.isExpandable});return c(l.map(b,a))})}var b=this;return w(a(this.rootNode))},collapseAll:function(){function a(h){var d=l.filter(h.getChildren()||[],function(a){return a.isExpandable}),d=c(l.map(d,a));return!h.isExpanded||h==b.rootNode&&!b.showRoot?d:d.then(function(){return b._collapseNode(h)})}var b=this;return w(a(this.rootNode))},mayHaveChildren:function(){},getItemChildren:function(){},
getLabel:function(a){return this.model.getLabel(a)},getIconClass:function(a,b){return!a||this.model.mayHaveChildren(a)?b?"dijitFolderOpened":"dijitFolderClosed":"dijitLeaf"},getLabelClass:function(){},getRowClass:function(){},getIconStyle:function(){},getLabelStyle:function(){},getRowStyle:function(){},getTooltip:function(){return""},_onDownArrow:function(a,b){var h=this._getNext(b);h&&h.isTreeNode&&this.focusNode(h)},_onUpArrow:function(a,b){var h=b.getPreviousSibling();if(h)for(b=h;b.isExpandable&&
b.isExpanded&&b.hasChildren();)h=b.getChildren(),b=h[h.length-1];else if(h=b.getParent(),this.showRoot||h!==this.rootNode)b=h;b&&b.isTreeNode&&this.focusNode(b)},_onRightArrow:function(a,b){b.isExpandable&&!b.isExpanded?this._expandNode(b):b.hasChildren()&&(b=b.getChildren()[0])&&b.isTreeNode&&this.focusNode(b)},_onLeftArrow:function(a,b){if(b.isExpandable&&b.isExpanded)this._collapseNode(b);else{var h=b.getParent();h&&(h.isTreeNode&&(this.showRoot||h!==this.rootNode))&&this.focusNode(h)}},focusLastChild:function(){var a=
this._getLast();a&&a.isTreeNode&&this.focusNode(a)},_getFirst:function(){return this.showRoot?this.rootNode:this.rootNode.getChildren()[0]},_getLast:function(){for(var a=this.rootNode;a.isExpanded;){var b=a.getChildren();if(!b.length)break;a=b[b.length-1]}return a},_getNext:function(a){if(a.isExpandable&&a.isExpanded&&a.hasChildren())return a.getChildren()[0];for(;a&&a.isTreeNode;){var b=a.getNextSibling();if(b)return b;a=a.getParent()}return null},childSelector:".dijitTreeRow",isExpandoNode:function(a,
b){return f.isDescendant(a,b.expandoNode)||f.isDescendant(a,b.expandoNodeText)},_onNodePress:function(a,b){this.focusNode(a)},__click:function(a,b,h,d){var c=this.isExpandoNode(b.target,a);a.isExpandable&&(h||c)?this._onExpandoClick({node:a}):(this._publish("execute",{item:a.item,node:a,evt:b}),this[d](a.item,a,b),this.focusNode(a));b.stopPropagation();b.preventDefault()},_onClick:function(a,b){this.__click(a,b,this.openOnClick,"onClick")},_onDblClick:function(a,b){this.__click(a,b,this.openOnDblClick,
"onDblClick")},_onExpandoClick:function(a){a=a.node;this.focusNode(a);a.isExpanded?this._collapseNode(a):this._expandNode(a)},onClick:function(){},onDblClick:function(){},onOpen:function(){},onClose:function(){},_getNextNode:function(a){r.deprecated(this.declaredClass+"::_getNextNode(node) is deprecated. Use _getNext(node) instead.","","2.0");return this._getNext(a)},_getRootOrFirstNode:function(){r.deprecated(this.declaredClass+"::_getRootOrFirstNode() is deprecated. Use _getFirst() instead.","",
"2.0");return this._getFirst()},_collapseNode:function(a){a._expandNodeDeferred&&delete a._expandNodeDeferred;if("Loading"!=a.state&&a.isExpanded){var b=a.collapse();this.onClose(a.item,a);this._state(a,!1);this._startPaint(b);return b}},_expandNode:function(a){if(a._expandNodeDeferred)return a._expandNodeDeferred;var b=this.model,h=a.item,d=this;a._loadDeferred||(a.markProcessing(),a._loadDeferred=new g,b.getChildren(h,function(b){a.unmarkProcessing();a.setChildItems(b).then(function(){a._loadDeferred.resolve(b)})},
function(b){console.error(d,": error loading "+a.label+" children: ",b);a._loadDeferred.reject(b)}));b=a._loadDeferred.then(m.hitch(this,function(){var b=a.expand();this.onOpen(a.item,a);this._state(a,!0);return b}));this._startPaint(b);return b},focusNode:function(a){var b=this.domNode.scrollLeft;this.focusChild(a);this.domNode.scrollLeft=b},_onNodeMouseEnter:function(){},_onNodeMouseLeave:function(){},_onItemChange:function(a){var b=this.model.getIdentity(a);if(b=this._itemNodesMap[b]){var h=this.getLabel(a),
d=this.getTooltip(a);l.forEach(b,function(b){b.set({item:a,label:h,tooltip:d});b._updateItemClasses(a)})}},_onItemChildrenChange:function(a,b){var h=this.model.getIdentity(a);(h=this._itemNodesMap[h])&&l.forEach(h,function(a){a.setChildItems(b)})},_onItemDelete:function(a){a=this.model.getIdentity(a);var b=this._itemNodesMap[a];b&&(l.forEach(b,function(a){this.dndController.removeTreeNode(a);var b=a.getParent();b&&b.removeChild(a);this.lastFocusedChild&&!f.isDescendant(this.lastFocusedChild,this.domNode)&&
delete this.lastFocusedChild;this.focusedChild&&!f.isDescendant(this.focusedChild,this.domNode)&&this.focus();a.destroyRecursive()},this),delete this._itemNodesMap[a])},_initState:function(){this._openedNodes={};if(this.persist&&this.cookieName){var a=s(this.cookieName);a&&l.forEach(a.split(","),function(a){this._openedNodes[a]=!0},this)}},_state:function(a,b){if(!this.persist)return!1;var h=l.map(a.getTreePath(),function(a){return this.model.getIdentity(a)},this).join("/");if(1===arguments.length)return this._openedNodes[h];
b?this._openedNodes[h]=!0:delete this._openedNodes[h];this._saveExpandedNodes()},_saveExpandedNodes:function(){if(this.persist&&this.cookieName){var a=[],b;for(b in this._openedNodes)a.push(b);s(this.cookieName,a.join(","),{expires:365})}},destroy:function(){this._curSearch&&(this._curSearch.timer.remove(),delete this._curSearch);this.rootNode&&this.rootNode.destroyRecursive();this.dndController&&!m.isString(this.dndController)&&this.dndController.destroy();this.rootNode=null;this.inherited(arguments)},
destroyRecursive:function(){this.destroy()},resize:function(a){a&&b.setMarginBox(this.domNode,a);this._nodePixelIndent=b.position(this.tree.indentDetector).w||this._nodePixelIndent;this.expandChildrenDeferred.then(m.hitch(this,function(){this.rootNode.set("indent",this.showRoot?0:-1);this._adjustWidths()}))},_outstandingPaintOperations:0,_startPaint:function(a){this._outstandingPaintOperations++;this._adjustWidthsTimer&&(this._adjustWidthsTimer.remove(),delete this._adjustWidthsTimer);var b=m.hitch(this,
function(){this._outstandingPaintOperations--;0>=this._outstandingPaintOperations&&(!this._adjustWidthsTimer&&this._started)&&(this._adjustWidthsTimer=this.defer("_adjustWidths"))});B(a,b,b)},_adjustWidths:function(){this._adjustWidthsTimer&&(this._adjustWidthsTimer.remove(),delete this._adjustWidthsTimer);this.containerNode.style.width="auto";this.containerNode.style.width=this.domNode.scrollWidth>this.domNode.offsetWidth?"auto":"100%"},_createTreeNode:function(a){return new C(a)},focus:function(){this.lastFocusedChild?
this.focusNode(this.lastFocusedChild):this.focusFirstChild()}});t("dojo-bidi")&&z.extend({_setTextDirAttr:function(a){a&&this.textDir!=a&&(this._set("textDir",a),this.rootNode.set("textDir",a))}});z.PathError=d("TreePathError");z._TreeNode=C;return z})},"dijit/tree/TreeStoreModel":function(){define(["dojo/_base/array","dojo/aspect","dojo/_base/declare","dojo/_base/lang"],function(l,n,s,q){return s("dijit.tree.TreeStoreModel",null,{store:null,childrenAttrs:["children"],newItemIdAttr:"id",labelAttr:"",
root:null,query:null,deferItemLoadingUntilExpand:!1,constructor:function(g){q.mixin(this,g);this.connects=[];g=this.store;if(!g.getFeatures()["dojo.data.api.Identity"])throw Error("dijit.tree.TreeStoreModel: store must support dojo.data.Identity");g.getFeatures()["dojo.data.api.Notification"]&&(this.connects=this.connects.concat([n.after(g,"onNew",q.hitch(this,"onNewItem"),!0),n.after(g,"onDelete",q.hitch(this,"onDeleteItem"),!0),n.after(g,"onSet",q.hitch(this,"onSetItem"),!0)]))},destroy:function(){for(var g;g=
this.connects.pop();)g.remove()},getRoot:function(g,c){this.root?g(this.root):this.store.fetch({query:this.query,onComplete:q.hitch(this,function(c){if(1!=c.length)throw Error("dijit.tree.TreeStoreModel: root query returned "+c.length+" items, but must return exactly one");this.root=c[0];g(this.root)}),onError:c})},mayHaveChildren:function(g){return l.some(this.childrenAttrs,function(c){return this.store.hasAttribute(g,c)},this)},getChildren:function(g,c,f){var e=this.store;if(e.isItemLoaded(g)){for(var b=
[],k=0;k<this.childrenAttrs.length;k++)var d=e.getValues(g,this.childrenAttrs[k]),b=b.concat(d);var a=0;this.deferItemLoadingUntilExpand||l.forEach(b,function(b){e.isItemLoaded(b)||a++});0==a?c(b):l.forEach(b,function(d,k){e.isItemLoaded(d)||e.loadItem({item:d,onItem:function(d){b[k]=d;0==--a&&c(b)},onError:f})})}else{var t=q.hitch(this,arguments.callee);e.loadItem({item:g,onItem:function(a){t(a,c,f)},onError:f})}},isItem:function(g){return this.store.isItem(g)},fetchItemByIdentity:function(g){this.store.fetchItemByIdentity(g)},
getIdentity:function(g){return this.store.getIdentity(g)},getLabel:function(g){return this.labelAttr?this.store.getValue(g,this.labelAttr):this.store.getLabel(g)},newItem:function(g,c,f){var e={parent:c,attribute:this.childrenAttrs[0]},b;this.newItemIdAttr&&g[this.newItemIdAttr]?this.fetchItemByIdentity({identity:g[this.newItemIdAttr],scope:this,onItem:function(k){k?this.pasteItem(k,null,c,!0,f):(b=this.store.newItem(g,e))&&void 0!=f&&this.pasteItem(b,c,c,!1,f)}}):(b=this.store.newItem(g,e))&&void 0!=
f&&this.pasteItem(b,c,c,!1,f)},pasteItem:function(g,c,f,e,b){var k=this.store,d=this.childrenAttrs[0];c&&l.forEach(this.childrenAttrs,function(a){if(k.containsValue(c,a,g)){if(!e){var b=l.filter(k.getValues(c,a),function(a){return a!=g});k.setValues(c,a,b)}d=a}});if(f)if("number"==typeof b){var a=k.getValues(f,d).slice();a.splice(b,0,g);k.setValues(f,d,a)}else k.setValues(f,d,k.getValues(f,d).concat(g))},onChange:function(){},onChildrenChange:function(){},onDelete:function(){},onNewItem:function(g,
c){c&&this.getChildren(c.item,q.hitch(this,function(f){this.onChildrenChange(c.item,f)}))},onDeleteItem:function(g){this.onDelete(g)},onSetItem:function(g,c){if(-1!=l.indexOf(this.childrenAttrs,c))this.getChildren(g,q.hitch(this,function(c){this.onChildrenChange(g,c)}));else this.onChange(g)}})})},"dijit/tree/ForestStoreModel":function(){define(["dojo/_base/array","dojo/_base/declare","dojo/_base/kernel","dojo/_base/lang","./TreeStoreModel"],function(l,n,s,q,g){return n("dijit.tree.ForestStoreModel",
g,{rootId:"$root$",rootLabel:"ROOT",query:null,constructor:function(c){this.root={store:this,root:!0,id:c.rootId,label:c.rootLabel,children:c.rootChildren}},mayHaveChildren:function(c){return c===this.root||this.inherited(arguments)},getChildren:function(c,f,e){c===this.root?this.root.children?f(this.root.children):this.store.fetch({query:this.query,onComplete:q.hitch(this,function(b){this.root.children=b;f(b)}),onError:e}):this.inherited(arguments)},isItem:function(c){return c===this.root?!0:this.inherited(arguments)},
fetchItemByIdentity:function(c){if(c.identity==this.root.id){var f=c.scope||s.global;c.onItem&&c.onItem.call(f,this.root)}else this.inherited(arguments)},getIdentity:function(c){return c===this.root?this.root.id:this.inherited(arguments)},getLabel:function(c){return c===this.root?this.root.label:this.inherited(arguments)},newItem:function(c,f,e){return f===this.root?(this.onNewRootItem(c),this.store.newItem(c)):this.inherited(arguments)},onNewRootItem:function(){},pasteItem:function(c,f,e,b,k){if(f===
this.root&&!b)this.onLeaveRoot(c);this.inherited(arguments,[c,f===this.root?null:f,e===this.root?null:e,b,k]);if(e===this.root)this.onAddToRoot(c)},onAddToRoot:function(c){console.log(this,": item ",c," added to root")},onLeaveRoot:function(c){console.log(this,": item ",c," removed from root")},_requeryTop:function(){var c=this.root.children||[];this.store.fetch({query:this.query,onComplete:q.hitch(this,function(f){this.root.children=f;if(c.length!=f.length||l.some(c,function(c,b){return f[b]!=c}))this.onChildrenChange(this.root,
f)})})},onNewItem:function(c,f){this._requeryTop();this.inherited(arguments)},onDeleteItem:function(c){-1!=l.indexOf(this.root.children,c)&&this._requeryTop();this.inherited(arguments)},onSetItem:function(c,f,e,b){this._requeryTop();this.inherited(arguments)}})})},"dijit/tree/_dndSelector":function(){define("dojo/_base/array dojo/_base/declare dojo/_base/kernel dojo/_base/lang dojo/dnd/common dojo/dom dojo/mouse dojo/on dojo/touch ../a11yclick ./_dndContainer".split(" "),function(l,n,s,q,g,c,f,e,
b,k,d){return n("dijit.tree._dndSelector",d,{constructor:function(){this.selection={};this.anchor=null;this.events.push(e(this.tree.domNode,b.press,q.hitch(this,"onMouseDown")),e(this.tree.domNode,b.release,q.hitch(this,"onMouseUp")),e(this.tree.domNode,b.move,q.hitch(this,"onMouseMove")),e(this.tree.domNode,k.press,q.hitch(this,"onClickPress")),e(this.tree.domNode,k.release,q.hitch(this,"onClickRelease")))},singular:!1,getSelectedTreeNodes:function(){var a=[],b=this.selection,d;for(d in b)a.push(b[d]);
return a},selectNone:function(){this.setSelection([]);return this},destroy:function(){this.inherited(arguments);this.selection=this.anchor=null},addTreeNode:function(a,b){this.setSelection(this.getSelectedTreeNodes().concat([a]));b&&(this.anchor=a);return a},removeTreeNode:function(a){var b=l.filter(this.getSelectedTreeNodes(),function(b){return!c.isDescendant(b.domNode,a.domNode)});this.setSelection(b);return a},isTreeNodeSelected:function(a){return a.id&&!!this.selection[a.id]},setSelection:function(a){var b=
this.getSelectedTreeNodes();l.forEach(this._setDifference(b,a),q.hitch(this,function(a){a.setSelected(!1);this.anchor==a&&delete this.anchor;delete this.selection[a.id]}));l.forEach(this._setDifference(a,b),q.hitch(this,function(a){a.setSelected(!0);this.selection[a.id]=a}));this._updateSelectionProperties()},_setDifference:function(a,b){l.forEach(b,function(a){a.__exclude__=!0});var d=l.filter(a,function(a){return!a.__exclude__});l.forEach(b,function(a){delete a.__exclude__});return d},_updateSelectionProperties:function(){var a=
this.getSelectedTreeNodes(),b=[],d=[];l.forEach(a,function(a){var c=a.getTreePath();d.push(a);b.push(c)},this);a=l.map(d,function(a){return a.item});this.tree._set("paths",b);this.tree._set("path",b[0]||[]);this.tree._set("selectedNodes",d);this.tree._set("selectedNode",d[0]||null);this.tree._set("selectedItems",a);this.tree._set("selectedItem",a[0]||null)},onClickPress:function(a){if(!this.current||!this.current.isExpandable||!this.tree.isExpandoNode(a.target,this.current)){"mousedown"==a.type&&
f.isLeft(a)&&a.preventDefault();var b="keydown"==a.type?this.tree.focusedChild:this.current;if(b){var d=g.getCopyKeyState(a),c=b.id;!this.singular&&!a.shiftKey&&this.selection[c]?this._doDeselect=!0:(this._doDeselect=!1,this.userSelect(b,d,a.shiftKey))}}},onClickRelease:function(a){this._doDeselect&&(this._doDeselect=!1,this.userSelect("keyup"==a.type?this.tree.focusedChild:this.current,g.getCopyKeyState(a),a.shiftKey))},onMouseMove:function(){this._doDeselect=!1},onMouseDown:function(){},onMouseUp:function(){},
_compareNodes:function(a,b){if(a===b)return 0;if("sourceIndex"in document.documentElement)return a.sourceIndex-b.sourceIndex;if("compareDocumentPosition"in document.documentElement)return a.compareDocumentPosition(b)&2?1:-1;if(document.createRange){var d=doc.createRange();d.setStartBefore(a);var c=doc.createRange();c.setStartBefore(b);return d.compareBoundaryPoints(d.END_TO_END,c)}throw Error("dijit.tree._compareNodes don't know how to compare two different nodes in this browser");},userSelect:function(a,
b,d){if(this.singular)this.anchor==a&&b?this.selectNone():(this.setSelection([a]),this.anchor=a);else if(d&&this.anchor){b=this._compareNodes(this.anchor.rowNode,a.rowNode);d=this.anchor;0>b?b=d:(b=a,a=d);for(d=[];b!=a;)d.push(b),b=this.tree._getNext(b);d.push(a);this.setSelection(d)}else this.selection[a.id]&&b?this.removeTreeNode(a):b?this.addTreeNode(a,!0):(this.setSelection([a]),this.anchor=a)},getItem:function(a){return{data:this.selection[a],type:["treeNode"]}},forInSelectedItems:function(a,
b){b=b||s.global;for(var d in this.selection)a.call(b,this.getItem(d),d,this)}})})},"dijit/tree/_dndContainer":function(){define("dojo/aspect dojo/_base/declare dojo/dom-class dojo/_base/lang dojo/on dojo/touch".split(" "),function(l,n,s,q,g,c){return n("dijit.tree._dndContainer",null,{constructor:function(f,e){this.tree=f;this.node=f.domNode;q.mixin(this,e);this.containerState="";s.add(this.node,"dojoDndContainer");this.events=[g(this.node,c.enter,q.hitch(this,"onOverEvent")),g(this.node,c.leave,
q.hitch(this,"onOutEvent")),l.after(this.tree,"_onNodeMouseEnter",q.hitch(this,"onMouseOver"),!0),l.after(this.tree,"_onNodeMouseLeave",q.hitch(this,"onMouseOut"),!0),g(this.node,"dragstart, selectstart",function(b){b.preventDefault()})]},destroy:function(){for(var c;c=this.events.pop();)c.remove();this.node=this.parent=null},onMouseOver:function(c){this.current=c},onMouseOut:function(){this.current=null},_changeState:function(c,e){var b="dojoDnd"+c,k=c.toLowerCase()+"State";s.replace(this.node,b+
e,b+this[k]);this[k]=e},_addItemClass:function(c,e){s.add(c,"dojoDndItem"+e)},_removeItemClass:function(c,e){s.remove(c,"dojoDndItem"+e)},onOverEvent:function(){this._changeState("Container","Over")},onOutEvent:function(){this._changeState("Container","")}})})},"jimu/dijit/QueryableServiceChooserFromPortal":function(){define("dojo/_base/declare dijit/_WidgetBase dijit/_TemplatedMixin dijit/_WidgetsInTemplateMixin dojo/text!./templates/QueryableServiceChooserFromPortal.html dojo/_base/lang dojo/_base/html dojo/_base/array dojo/on dojo/query dojo/Deferred dojo/Evented dojo/promise/all jimu/dijit/ItemSelector jimu/dijit/QueryableServiceBrowser jimu/portalUrlUtils esri/request".split(" "),
function(l,n,s,q,g,c,f,e,b,k,d,a,t,r,p,m,h){return l([n,s,q,a],{templateString:g,declaredClass:"jimu.dijit.QueryableServiceChooserFromPortal",baseClass:"jimu-service-chooser-from-portal jimu-queryable-service-chooser-from-portal",_serviceBrowserDef:null,portalUrl:null,multiple:!1,postMixInProperties:function(){this.nls=c.mixin({},window.jimuNls.common);this.nls=c.mixin(this.nls,window.jimuNls.featureLayerChooserFromPortal);this.portalUrl=m.getStandardPortalUrl(this.portalUrl);this.multiple=!0===this.multiple?
!0:!1},postCreate:function(){this.inherited(arguments);this._initSelf()},getSelectedItems:function(){return this.serviceBrowser.getSelectedItems()},_initSelf:function(){this.selector=new r({portalUrl:this.portalUrl,itemTypes:["Feature Service","Map Service","Image Service"],onlyShowOnlineFeaturedItems:!1});this.own(b(this.selector,"item-selected",c.hitch(this,this._onItemSelected)));this.own(b(this.selector,"none-item-selected",c.hitch(this,this._onNoneItemSelected)));this.selector.placeAt(this.selectorContainer);
this.selector.startup();this.serviceBrowser=new p({multiple:this.multiple});this.own(b(this.serviceBrowser,"tree-click",c.hitch(this,this._onServiceBrowserClicked)));this.serviceBrowser.placeAt(this.serviceBrowserContainer);this.serviceBrowser.startup()},_onItemSelected:function(){f.removeClass(this.btnNext,"jimu-state-disabled")},_onNoneItemSelected:function(){f.addClass(this.btnNext,"jimu-state-disabled")},_onBtnBackClicked:function(){this._serviceBrowserDef&&!this._serviceBrowserDef.isFulfilled()&&
this._serviceBrowserDef.cancel();f.setStyle(this.btnOk,"display","none");f.setStyle(this.btnNext,"display","block");f.setStyle(this.btnBack,"display","none");f.addClass(this.btnOk,"jimu-state-disabled");f.setStyle(this.selectorContainer,"display","block");f.setStyle(this.serviceBrowserContainer,"display","none");this.serviceBrowser.reset();this.emit("back")},_onBtnOkClicked:function(){var a=this.getSelectedItems();0<a.length&&this.emit("ok",a)},_onBtnNextClicked:function(){var a=this.selector.getSelectedItem();
a&&(f.setStyle(this.btnNext,"display","none"),f.setStyle(this.btnBack,"display","block"),f.setStyle(this.btnOk,"display","block"),f.addClass(this.btnOk,"jimu-state-disabled"),f.setStyle(this.selectorContainer,"display","none"),f.setStyle(this.serviceBrowserContainer,"display","block"),this.serviceBrowser.reset(),this._serviceBrowserDef=this.serviceBrowser.setUrl(a.url||a.item),this._serviceBrowserDef.then(c.hitch(this,function(){this._serviceBrowserDef=null;this._setOkStateBySelectedItems()}),c.hitch(this,
function(){this._serviceBrowserDef=null})),this.emit("next"))},_setOkStateBySelectedItems:function(){0<this.serviceBrowser.getSelectedItems().length?f.removeClass(this.btnOk,"jimu-state-disabled"):f.addClass(this.btnOk,"jimu-state-disabled")},_onServiceBrowserClicked:function(){this._setOkStateBySelectedItems()},_onBtnCancelClicked:function(){this.emit("cancel")}})})},"jimu/dijit/ItemSelector":function(){define("dojo/_base/declare dojo/topic dijit/_WidgetBase dijit/_TemplatedMixin dijit/_WidgetsInTemplateMixin dojo/text!./templates/ItemSelector.html dojo/Evented dojo/_base/lang dojo/_base/config dojo/_base/array dojo/_base/html dojo/_base/Deferred dojo/promise/all dojo/query dojo/on jimu/utils jimu/portalUtils jimu/tokenUtils jimu/portalUrlUtils jimu/dijit/ViewStack jimu/dijit/Search jimu/dijit/TabContainer3 jimu/dijit/_ItemTable".split(" "),
function(l,n,s,q,g,c,f,e,b,k,d,a,t,r,p,m,h,u,v,B,x,A,y){return l([s,q,g,f],{templateString:c,declaredClass:"jimu.dijit.ItemSelector",baseClass:"jimu-item-selector",tab:null,_user:null,_group:null,_allPublicPortalQuery:null,_filterPublicPortalQuery:null,_allPublicOnlineQuery:null,_filterPublicOnlineQuery:null,_allOrganizationQuery:null,_filterOrganizationQuery:null,_allMyContentQuery:null,_filterMyContentQuery:null,_allGroupQuery:null,_filterGroupQuery:null,_isPublicTabShow:!1,_signIn:!1,_itemTypeQueryString:"",
_typeKeywordQueryString:"",portalUrl:null,itemTypes:"",typeKeywords:"",showOnlineItems:!0,onlyShowOnlineFeaturedItems:!1,postMixInProperties:function(){this.portalUrl=v.getStandardPortalUrl(this.portalUrl);this.showOnlineItems=!1===this.showOnlineItems?!1:!0;this.itemTypes&&0<this.itemTypes.length||(this.itemTypes=[]);this._itemTypes="";k.forEach(this.itemTypes,e.hitch(this,function(a,b){this._itemTypes+='"'+a+'"';b!==this.itemTypes.length-1&&(this._itemTypes+=",")}));this._itemTypes="["+this._itemTypes+
"]";this.typeKeywords&&0<this.typeKeywords.length||(this.typeKeywords=[]);this._typeKeywords="";k.forEach(this.typeKeywords,e.hitch(this,function(a,b){this._typeKeywords+='"'+a+'"';b!==this.typeKeywords.length-1&&(this._typeKeywords+=",")}));this._typeKeywords="["+this._typeKeywords+"]";this.nls=window.jimuNls.itemSelector},postCreate:function(){this.inherited(arguments);var a=this._getPortalUrl();this.portal=h.getPortal(a);this._initOptions();this._initSearchQuery();this._initTabs();this._initPortalRadio();
this._initItemTables();this._initPublic();this._initPrivate();this._updateUIbySignIn()},_initOptions:function(){this._itemTypeQueryString=m.getItemQueryStringByTypes(this.itemTypes);this._typeKeywordQueryString=m.getItemQueryStringByTypeKeywords(this.typeKeywords)},_initTabs:function(){this.tab=new A({tabs:[{title:this.nls.myContent,content:this.mycontentTabNode},{title:this.nls.myOrganization,content:this.organizationTabNode},{title:this.nls.myGroup,content:this.groupTabNode},{title:this.nls.publicMap,
content:this.publicTabNode}]},this.tabNode);this.own(p(this.tab,"tabChanged",e.hitch(this,function(a){d.setStyle(this.signinSection,"display","none");a!==this.nls.publicMap?(this._isPublicTabShow=!1,this._updateUIbySignIn()):this._isPublicTabShow=!0})))},_updateUIbySignIn:function(){d.setStyle(this.signinSection,"display","none");var a=r(".organization-tab-content-main,.group-tab-content-main,.mycontent-tab-content-main",this.domNode);u.userHaveSignInPortal(this._getPortalUrl())?a.style("display",
"block"):(a.style("display","none"),this._isPublicTabShow||d.setStyle(this.signinSection,"display","block"))},_initPortalRadio:function(){m.combineRadioCheckBoxWithLabel(this.portalPublicRaido,this.portalPublicLabel);m.combineRadioCheckBoxWithLabel(this.onlinePublicRaido,this.onlinePublicLabel);var a=this._getPortalUrl(),a=v.getServerByUrl(a);this.portalPublicRaido.disabled=!1;this.onlinePublicRaido.disabled=!1;this.portalPublicRaido.checked=!0;var b=!1;v.isArcGIScom(a)?(b=!0,this.portalPublicLabel.innerHTML=
"ArcGIS.com"):(this.portalPublicLabel.innerHTML=a,b=this.showOnlineItems?!1:!0);b&&(this.onlinePublicRaido.disabled=!0,d.setStyle(this.onlinePublicRaido,"display","none"),d.setStyle(this.onlinePublicLabel,"display","none"))},_initSearchQuery:function(){var a="esri_"+(b.locale&&b.locale.slice(0,2)||"en").toLowerCase(),h=k.filter("esri_he esri_fr esri_ja esri_nl esri_th esri_tr esri_nb esri_ro esri_it esri_pl esri_po esri_ru esri_pt esri_en esri_ar esri_et esri_es esri_ko esri_cs esri_da esri_zh esri_sv esri_lt esri_fi esri_lv esri_de esri_vi".split(" "),
e.hitch(this,function(b){return b!==a})),d="";k.forEach(h,e.hitch(this,function(a){d+=" -owner:"+a+" "}));h=" ";this.portal&&(this.portal.user&&this.portal.user.orgId)&&(h=" orgid:"+this.portal.user.orgId+" ");h=h+this._itemTypeQueryString+" AND access:public "+d+" "+this._typeKeywordQueryString;this._allPublicPortalQuery=this._getQuery({sortField:"numViews",sortOrder:"desc",q:h});this._filterPublicPortalQuery=this._getQuery({q:h,basicQ:h});this._allPublicOnlineQuery=this._getQuery({sortField:"numViews",
sortOrder:"desc",q:(this.onlyShowOnlineFeaturedItems?' (group:"c755678be14e4a0984af36a15f5b643e"  OR group:"b8787a74b4d74f7fb9b8fac918735153") ':" ")+this._itemTypeQueryString+" AND access:public "+this._typeKeywordQueryString});this._filterPublicOnlineQuery=this._getQuery({q:this._itemTypeQueryString+" AND access:public "+this._typeKeywordQueryString});this._allOrganizationQuery=this._getQuery();this._filterOrganizationQuery=this._getQuery();this._allMyContentQuery=this._getQuery();this._filterMyContentQuery=
this._getQuery();this._allGroupQuery=this._getQuery();this._filterGroupQuery=this._getQuery()},_getQuery:function(a){return e.mixin({start:1,num:16,f:"json"},a||{})},_getPortalUrl:function(){return v.getStandardPortalUrl(this.portalUrl)},_initItemTables:function(){"function"===typeof this.onCreateItemContent&&(this.mycontentItemTable.onCreateItemContent=this.onCreateItemContent,this.organizationItemTable.onCreateItemContent=this.onCreateItemContent,this.groupItemTable.onCreateItemContent=this.onCreateItemContent,
this.publicPortalItemTable.onCreateItemContent=this.onCreateItemContent,this.publicOnlineItemTable.onCreateItemContent=this.onCreateItemContent);this.own(p(this.publicPortalItemTable,"item-dom-clicked",e.hitch(this,this._onItemDomClicked)));this.own(p(this.publicOnlineItemTable,"item-dom-clicked",e.hitch(this,this._onItemDomClicked)));this.own(p(this.organizationItemTable,"item-dom-clicked",e.hitch(this,this._onItemDomClicked)));this.own(p(this.groupItemTable,"item-dom-clicked",e.hitch(this,this._onItemDomClicked)));
this.own(p(this.mycontentItemTable,"item-dom-clicked",e.hitch(this,this._onItemDomClicked)));this.own(p(this.publicPortalItemTable,"update",e.hitch(this,this._onItemTableUpdate)));this.own(p(this.publicOnlineItemTable,"update",e.hitch(this,this._onItemTableUpdate)));this.own(p(this.organizationItemTable,"update",e.hitch(this,this._onItemTableUpdate)));this.own(p(this.groupItemTable,"update",e.hitch(this,this._onItemTableUpdate)));this.own(p(this.mycontentItemTable,"update",e.hitch(this,this._onItemTableUpdate)));
var a=this._getPortalUrl();this.portalPublicRaido.disabled||(this.publicPortalItemTable.set("portalUrl",a),this.publicPortalItemTable.searchAllItems(this._allPublicPortalQuery),this.publicPortalItemTable.set("filteredQuery",this._filterPublicPortalQuery));this.onlinePublicRaido.disabled||(this.publicOnlineItemTable.set("portalUrl",window.location.protocol+"//www.arcgis.com"),this.publicOnlineItemTable.searchAllItems(this._allPublicOnlineQuery),this.publicOnlineItemTable.set("filteredQuery",this._filterPublicOnlineQuery))},
_initPublic:function(){this.own(p(this.portalPublicRaido,"click",e.hitch(this,this._onPublicRaidoClicked)));this.own(p(this.onlinePublicRaido,"click",e.hitch(this,this._onPublicRaidoClicked)));this._onPublicRaidoClicked()},_onPublicRaidoClicked:function(){this.portalPublicRaido.checked?(this.publicPortalItemTable.show(),this.publicOnlineItemTable.hide()):this.onlinePublicRaido.checked&&(this.publicPortalItemTable.hide(),this.publicOnlineItemTable.show())},_onPublicSearch:function(a){(a=a&&e.trim(a))?
(this.publicPortalItemTable.showFilterItemsSection(),this.publicOnlineItemTable.showFilterItemsSection(),this.portalPublicRaido.checked?(this._filterPublicPortalQuery.q=a+" "+this._filterPublicPortalQuery.basicQ,this._filterPublicPortalQuery.start=1,this.publicPortalItemTable.searchFilteredItems(this._filterPublicPortalQuery)):this.onlinePublicRaido.checked&&(this._filterPublicOnlineQuery.q=a+" "+this._itemTypeQueryString+" AND access:public "+this._typeKeywordQueryString,this._filterPublicOnlineQuery.start=
1,this.publicOnlineItemTable.searchFilteredItems(this._filterPublicOnlineQuery))):(this.publicPortalItemTable.showAllItemsSection(),this.publicOnlineItemTable.showAllItemsSection())},_initPrivate:function(){this._resetPortalMaps();this.own(p(this.groupsSelect,"change",e.hitch(this,this._onGroupsSelectChange)));var a=v.getServerByUrl(this._getPortalUrl());v.isArcGIScom(a);u.userHaveSignInPortal(this._getPortalUrl())&&this._onSignIn()},_onOrganizationSearch:function(a){if(a=a&&e.trim(a)){if(this._allOrganizationQuery){var b=
this._allOrganizationQuery.q;b&&(this._filterOrganizationQuery.q=a+" "+b,this._filterOrganizationQuery.start=1,this.organizationItemTable.searchFilteredItems(this._filterOrganizationQuery))}}else this.organizationItemTable.showAllItemsSection()},_onMyContentSearch:function(a){if(a=a&&e.trim(a)){if(this._allMyContentQuery){var b=this._allMyContentQuery.q;b&&(this._filterMyContentQuery.q=a+" "+b,this._filterMyContentQuery.start=1,this.mycontentItemTable.searchFilteredItems(this._filterMyContentQuery))}}else this.mycontentItemTable.showAllItemsSection()},
_onGroupSearch:function(a){if(a=a&&e.trim(a)){if(this._allGroupQuery){var b=this._allGroupQuery.q;b&&(this._filterGroupQuery.q=a+" "+b,this._filterGroupQuery.start=1,this.groupItemTable.searchFilteredItems(this._filterGroupQuery))}}else this.groupItemTable.showAllItemsSection()},_onSignIn:function(){this._updateUIbySignIn();if(!this._signIn){this._signIn=!0;var a=this._getPortalUrl();h.getPortal(a).getUser().then(e.hitch(this,function(a){this.domNode&&(this._resetPortalMaps(),this._searchOrganization(a),
this._searchMyContent(a),this._searchGroups(a))}))}},_onSignOut:function(){this._signIn=!1;this._resetPortalMaps();this._updateUIbySignIn()},_resetPortalMaps:function(){this.organizationItemTable.clear();this.mycontentItemTable.clear();this._resetGroupsSection()},_searchOrganization:function(a){this.organizationItemTable.clear();a=" orgid:"+a.orgId+" AND "+this._itemTypeQueryString+" AND (access:org OR access:public) "+this._typeKeywordQueryString;var b=this._getPortalUrl();this._allOrganizationQuery=
this._getQuery({q:a});this._filterOrganizationQuery=this._getQuery({q:a});this.organizationItemTable.set("portalUrl",b);this.organizationItemTable.searchAllItems(this._allOrganizationQuery)},_searchMyContent:function(a){this.mycontentItemTable.clear();var b=this._getPortalUrl();a="owner:"+a.username+" AND "+this._itemTypeQueryString+" "+this._typeKeywordQueryString;this._allMyContentQuery=this._getQuery({q:a});this._filterMyContentQuery=this._getQuery({q:a});this.mycontentItemTable.set("portalUrl",
b);this.mycontentItemTable.searchAllItems(this._allMyContentQuery)},_searchGroups:function(a){this._resetGroupsSection();d.setStyle(this.groupsSection,"display","block");a=a.getGroups();if(0<a.length){d.setStyle(this.groupSearch.domNode,"display","block");this.groupItemTable.show();d.empty(this.groupsSelect);for(var b=0;b<a.length;b++){var h=a[b];d.create("option",{value:h.id,innerHTML:h.title},this.groupsSelect)}this._onGroupsSelectChange()}this._updateUIbyGroups(a.length)},_resetGroupsSection:function(){d.setStyle(this.groupsSection,
"display","none");d.empty(this.groupsSelect);d.create("option",{value:"nodata",innerHTML:this.nls.noneGroups},this.groupsSelect);this.groupItemTable.clear();d.setStyle(this.groupSearch.domNode,"display","none");this.groupItemTable.hide();this._updateUIbyGroups(0)},_updateUIbyGroups:function(a){0===a?d.setStyle(this.groupsSection,"top","15px"):d.setStyle(this.groupsSection,"top","50px")},_onGroupsSelectChange:function(){var a=this.groupsSelect.value;this.groupItemTable.clear();if("nodata"===a)d.setStyle(this.groupSearch,
"display","none"),this.groupItemTable.hide();else{d.setStyle(this.groupSearch,"display","block");this.groupItemTable.show();var b=this._getPortalUrl(),a="group:"+a+" AND "+this._itemTypeQueryString+" "+this._typeKeywordQueryString;this._allGroupQuery=this._getQuery({q:a});this._filterGroupQuery=this._getQuery({q:a});this.groupItemTable.set("portalUrl",b);this.groupItemTable.searchAllItems(this._allGroupQuery)}},_onItemTableUpdate:function(){this.emit("update")},_onItemDomClicked:function(a){var b=
d.hasClass(a,"jimu-state-active");r(".item.jimu-state-active",this.domNode).removeClass("jimu-state-active");b&&d.addClass(a,"jimu-state-active");(a=this.getSelectedItem())?this.emit("item-selected",a):this.emit("none-item-selected")},getSelectedItem:function(){var a=null,b=r(".item.jimu-state-active",this.domNode);0<b.length&&(a=e.mixin({},b[0].item));return a}})})},"jimu/dijit/_ItemTable":function(){define("dojo/_base/declare dijit/_WidgetBase dijit/_TemplatedMixin dijit/_WidgetsInTemplateMixin dojo/text!./templates/_ItemTable.html dojo/Evented dojo/_base/lang dojo/_base/array dojo/_base/html dojo/_base/Deferred dojo/query dojo/on jimu/utils jimu/portalUtils jimu/portalUrlUtils jimu/dijit/LoadingIndicator".split(" "),
function(l,n,s,q,g,c,f,e,b,k,d,a,t,r,p,m){return l([n,s,q,c],{templateString:g,declaredClass:"jimu.dijit.ItemTable",baseClass:"jimu-item-table",query:null,filteredQuery:null,portalUrl:null,hidden:!1,nls:null,types:"",typeKeywords:"",_defaultThumbnail:{"Web Mapping Application":"webapp.png","Mobile Application":"mobileapp.png"},postMixInProperties:function(){this.nls=window.jimuNls.itemSelector},postCreate:function(){this.inherited(arguments);this._initSelf()},_initSelf:function(){this.types&&0<this.types.length||
(this.types=[]);(this.hidden=!0===this.hidden)&&this.hide();this.portalUrl&&(this.portalUrl=p.getStandardPortalUrl(this.portalUrl));this.showAllItemsSection();this.searchAllItems()},show:function(){b.setStyle(this.domNode,"display","block")},hide:function(){b.setStyle(this.domNode,"display","none")},searchAllItems:function(a){this.showAllItemsSection();a&&(this.query=f.mixin({},a),this.query.start=1,this.clearAllItemsSection());this.portalUrl&&this.query&&0<this.query.start&&(this.allItemsShelter.show(),
r.getPortal(this.portalUrl).queryItems(this.query).then(f.hitch(this,function(a){this.domNode&&(this.allItemsShelter.hide(),this.query.start=a.nextStart,this._createItems(a,this.allItemTbody))}),f.hitch(this,function(a){console.error(a);this.domNode&&this.allItemsShelter.hide()})))},searchFilteredItems:function(a){this.showFilterItemsSection();a&&(this.filteredQuery=f.clone(a),this.filteredQuery.start=1,this.clearFilteredItemsSection());this.portalUrl&&this.filteredQuery&&0<this.filteredQuery.start&&
(this.filteredItemShelter.show(),r.getPortal(this.portalUrl).queryItems(this.filteredQuery).then(f.hitch(this,function(b){this.domNode&&(this.showFilterItemsSection(),a&&this.clearFilteredItemsSection(),this.filteredQuery.start=b.nextStart,this._createItems(b,this.filteredItemsTbody),this._filterItemCallback())}),f.hitch(this,function(a){console.error(a);this.domNode&&this._filterItemCallback()})))},_filterItemCallback:function(){this.filteredItemShelter.hide();0<this._getItemCount(this.filteredItemsTbody)?
(b.setStyle(this.filteredItemsTableDiv,"display","block"),b.setStyle(this.searchNoneTipSection,"display","none")):(b.setStyle(this.filteredItemsTableDiv,"display","none"),b.setStyle(this.searchNoneTipSection,"display","block"))},clear:function(){this.clearAllItemsSection();this.clearFilteredItemsSection()},clearAllItemsSection:function(){b.empty(this.allItemTbody)},clearFilteredItemsSection:function(){b.empty(this.filteredItemsTbody)},showAllItemsSection:function(){b.setStyle(this.allItemsSection,
"display","block");b.setStyle(this.filteredItemsSection,"display","none")},showFilterItemsSection:function(){b.setStyle(this.allItemsSection,"display","none");b.setStyle(this.filteredItemsSection,"display","block");b.setStyle(this.filteredItemsTableDiv,"display","block");b.setStyle(this.searchNoneTipSection,"display","none")},_onAllItemsSectionScroll:function(){this._isScrollToBottom(this.allItemsTableDiv)&&this.searchAllItems()},_onFilteredItemsSectionScroll:function(){this._isScrollToBottom(this.filteredItemsTableDiv)&&
this.searchFilteredItems()},_isScrollToBottom:function(a){return t.isScrollToBottom(a)},_createItems:function(a,c){var m=a.results,k=e.map(this.types,f.hitch(this,function(a){return a.toLowerCase()})),m=e.filter(m,f.hitch(this,function(a){a=a.type&&a.type.toLowerCase()||"";return 0<=e.indexOf(k,a)}));if(0!==m.length){var p,r=d("td.empty",c),t;if(0<r.length){var g=Math.min(m.length,r.length),l=m.splice(0,g);for(t=0;t<g;t++){var n=r[t];p=this._createItem(l[t]);b.place(p,n);b.removeClass(n,"empty")}}if(0!==
m.length){r=Math.ceil(m.length/2);for(t=0;t<r;t++){p=b.toDom("\x3ctr\x3e\x3ctd\x3e\x3c/td\x3e\x3ctd\x3e\x3c/td\x3e\x3c/tr\x3e");b.place(p,c);g=d("td",p);for(l=0;l<g.length;l++)n=g[l],(p=m[2*t+l])?(p=this._createItem(p),b.place(p,n)):b.addClass(n,"empty")}this.emit("update")}}},_getItemCount:function(a){return d(".item",a).length},_createItem:function(a){var c=b.toDom('\x3cdiv class\x3d"item"\x3e\x3cdiv class\x3d"item-border"\x3e\x3c/div\x3e\x3cdiv class\x3d"item-thumbnail jimu-auto-vertical"\x3e\x3cdiv class\x3d"none-thumbnail-tip jimu-auto-vertical-content"\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d"item-info"\x3e\x3cdiv class\x3d"item-name"\x3e\x3c/div\x3e\x3cdiv class\x3d"item-type-owner"\x3e\x3c/div\x3e\x3cdiv class\x3d"item-date"\x3e\x3c/div\x3e\x3ca class\x3d"item-details" target\x3d"_blank"\x3e\x3c/a\x3e\x3c/div\x3e\x3c/div\x3e');
c.item=a;var m=d(".item-thumbnail",c)[0],e=d(".item-name",c)[0],k=d(".item-type-owner",c)[0],p=d(".item-date",c)[0],f=d(".item-details",c)[0],r=d(".none-thumbnail-tip",c)[0];if(!a.thumbnailUrl){var t=this._defaultThumbnail[a.type];t&&(a.thumbnailUrl=require.toUrl("jimu")+"/images/"+t)}a.thumbnailUrl?b.setStyle(m,"backgroundImage","url("+a.thumbnailUrl+")"):r.innerHTML=this.nls.noneThumbnail;"function"===typeof this.onCreateItemContent?(p=d(".item-info",c)[0],this.onCreateItemContent(a,p)):(e.innerHTML=
a.title,e.title=e.innerHTML,k.innerHTML=a.type+" by "+a.owner,k.title=k.innerHTML,m=new Date,m.setTime(a.modified),p.innerHTML=m.toLocaleString(),p.title=p.innerHTML,f.innerHTML=this.nls.moreDetails,f.href=a.detailsPageUrl||"#");return c},_onItemsTableClicked:function(a){var c=a.target||a.srcElement;a=null;b.hasClass(c,"item-thumbnail")?a=c.parentNode:b.hasClass(c,"none-thumbnail-tip")&&(a=c.parentNode.parentNode);a&&(c=b.hasClass(a,"jimu-state-active"),d(".item.jimu-state-active",this.domNode).removeClass("jimu-state-active"),
c?b.removeClass(a,"jimu-state-active"):b.addClass(a,"jimu-state-active"),this.emit("item-dom-clicked",a))},getSelectedItem:function(){var a=null,b=d(".item.jimu-state-active",this.domNode);0<b.length&&(a=f.mixin({},b[0].item));return a}})})},"jimu/dijit/QueryableServiceBrowser":function(){define(["dojo/_base/declare","./_BasicServiceBrowser","dojo/_base/lang","dojo/_base/array","jimu/serviceBrowserRuleUtils"],function(l,n,s,q,g){return l([n],{declaredClass:"jimu.dijit.QueryableServiceBrowser",baseClass:"jimu-queryable-service-browser",
url:"",multiple:!1,postMixInProperties:function(){this.inherited(arguments);this.rule=g.getQueryableServiceBrowserRule()},getSelectedItems:function(){var c=this.inherited(arguments);return c=q.map(c,s.hitch(this,function(c){return{name:c.name,url:c.url,definition:c.definition}}))}})})},"jimu/dijit/_BasicServiceBrowser":function(){define("dojo/_base/declare dijit/_WidgetBase dijit/_TemplatedMixin dijit/_WidgetsInTemplateMixin dojo/Evented dojo/_base/lang dojo/_base/html dojo/_base/array dojo/Deferred dojo/promise/all dojo/store/Memory dojo/store/Observable dijit/tree/ObjectStoreModel jimu/utils jimu/dijit/_Tree jimu/dijit/LoadingShelter".split(" "),
function(l,n,s,q,g,c,f,e,b,k,d,a,t,r,p){return l([n,s,q,g],{templateString:'\x3cdiv style\x3d"width:100%;"\x3e\x3cdiv data-dojo-attach-point\x3d"shelter"  data-dojo-type\x3d"jimu/dijit/LoadingShelter" data-dojo-props\x3d"hidden:true"\x3e\x3c/div\x3e\x3c/div\x3e',_store:null,_id:0,_currentUrl:"",_treeClass:"service-browser-tree",_def:null,url:"",multiple:!1,rule:null,postMixInProperties:function(){this.nls=window.jimuNls.basicServiceBrowser},postCreate:function(){this.inherited(arguments);f.addClass(this.domNode,
"jimu-basic-service-browser");this.multiple=!!this.multiple;this._createTree();this.url&&"string"===typeof this.url&&this.setUrl(this.url)},reset:function(){this.url="";this._clear()},getSelectedItems:function(){return this.tree.getSelectedItems()},setUrl:function(a){this._def&&(this._def.isFulfilled()||this._def.cancel(),this._def=null);this._def=new b;(!a||!("string"===typeof a&&a.replace(/\/*$/g,"")))&&this._def.reject();a=a.replace(/\/*$/g,"");a=c.trim(a);var h=a.match(/^http(s?):\/\//gi);h&&
0<h.length||(a="http://"+a);if(!(0>=a.search(/\/rest\/services/i))&&(this._clear(),this._currentUrl=a))return a=this._getRootItem(),a=r.isStringEndWith(this._currentUrl,"rest/services")?this._searchBaseServiceUrl(this._currentUrl,a):this._isUrlContainsServiceType(this._currentUrl)?this._searchServiceUrl(this._currentUrl,a):this._searchFolderServiceUrl(this._currentUrl,a),this.shelter.show(),a.then(c.hitch(this,function(a){this.domNode&&this.shelter.hide();var b=this.tree.getAllLeafTreeNodeWidgets();
1===b.length&&b[0].select();this._def.resolve(a)}),c.hitch(this,function(a){this.domNode&&this.shelter.hide();this._showRequestError();this._def.reject(a)})),this._def;this._def.reject()},_getItem:function(a){return this.rule.getItem(a)},_getSubItemUrls:function(a){return this.rule.getSubItemUrls(a)},_getSubItems:function(a){var h=new b;this._getSubItemUrls(a).then(c.hitch(this,function(a){a=e.map(a,c.hitch(this,function(a){return this._getItem(a)}));k(a).then(c.hitch(this,function(a){a=e.filter(a,
c.hitch(this,function(a){return a&&"object"===typeof a}));h.resolve(a)}),c.hitch(this,function(a){h.reject(a)}))}),c.hitch(this,function(a){h.reject(a)}));return h},_selectFirstLeafTreeNodeWidget:function(){var a=this.tree.getAllLeafTreeNodeWidgets();1===a.length&&a[0].select()},isLeafItem:function(a){return 0<=this.rule.leafTypes.indexOf(a.type)},isServiceTypeSupported:function(a){return this.rule.isServiceTypeSupported(a)},_getStringEndWith:function(a,b){var d="",c=a.indexOf(b);0<=c&&(d=a.slice(0,
c+b.length));return d},_isUrlContainsServiceType:function(a){return this.rule.isUrlContainsServiceType(a)},_getBaseServiceUrl:function(){return this._getStringEndWith(this._currentUrl,"rest/services")},_getServiceName:function(a){var b="";a=a.split("/");return b=a[a.length-1]},_searchBaseServiceUrl:function(a,h){var d=new b;this._getRestInfo(a).then(c.hitch(this,function(p){if(this.domNode){var r=[];e.map(p.folders,c.hitch(this,function(d){var k={name:d,type:"folder",url:a+"/"+d,parent:h.id};this._addItem(k);
var p=new b;this._doSearchFolderServiceUrl(k.url,k.id).then(c.hitch(this,function(a){0<a.length?e.forEach(a,c.hitch(this,function(a){a.parent=k.id;this._addItem(a)})):this._removeItem(k.id);p.resolve()}),c.hitch(this,function(a){p.reject(a)}));r.push(p);return p}));e.forEach(p.services,c.hitch(this,function(d){if(this.isServiceTypeSupported(d.type)){d=a+"/"+d.name+"/"+d.type;var e=new b;this.rule.getItem(d).then(c.hitch(this,function(a){a&&(a.parent=h.id,this._addItem(a));e.resolve()}),c.hitch(this,
function(a){console.error(a);e.reject(a)}));r.push(e)}}));k(r).then(c.hitch(this,function(){this.domNode&&d.resolve()}),c.hitch(this,function(a){console.error(a);this.domNode&&d.reject(a)}))}}),c.hitch(this,function(a){console.error(a);this.domNode&&d.reject({errorCode:"NETWORK_ERROR",error:a})}));return d},_searchFolderServiceUrl:function(a,d){var k=new b;this._doSearchFolderServiceUrl(a,d).then(c.hitch(this,function(a){this.domNode&&(e.forEach(a,c.hitch(this,function(a){a.parent=d.id;this._addItem(a)})),
k.resolve())}),c.hitch(this,function(a){console.error(a);this.domNode&&k.reject({errorCode:"NETWORK_ERROR",error:a})}));return k},_doSearchFolderServiceUrl:function(a){var d=new b,p=this._getBaseServiceUrl();this._getRestInfo(a).then(c.hitch(this,function(a){a=a.services;var b=[];a&&0<a.length&&e.forEach(a,c.hitch(this,function(a){this.isServiceTypeSupported(a.type)&&(a=this.rule.getItem(p+"/"+a.name+"/"+a.type),b.push(a))}));k(b).then(c.hitch(this,function(a){a=e.filter(a,c.hitch(this,function(a){return a}));
d.resolve(a)}),c.hitch(this,function(a){console.error(a);d.reject(a)}))}),c.hitch(this,function(a){console.error(a);d.reject(a)}));return d},_searchServiceUrl:function(a,d){var k=new b;this._getSubItems(a).then(c.hitch(this,function(b){b&&0<b.length?(e.forEach(b,c.hitch(this,function(a){a.parent=d.id;this._addItem(a)})),k.resolve()):this._getItem(a).then(c.hitch(this,function(a){a&&(a.parent=d.id,this._addItem(a));k.resolve()}),c.hitch(this,function(a){k.reject(a)}))}),c.hitch(this,function(a){k.reject(a)}));
return k},_getRestInfo:function(a){var d=new b;this.rule.getRestInfo(a).then(c.hitch(this,function(a){this.domNode&&d.resolve(a)}),c.hitch(this,function(a){this.domNode&&d.reject(a)}));return d},_clear:function(){var a=this._store.query({parent:"root"});e.forEach(a,c.hitch(this,function(a){a&&"root"!==a.id&&this._store.remove(a.id)}))},_showRequestError:function(){this.emit("error",this.nls.invalidUrlTip)},_addItem:function(a){this._id++;a.id=this._id.toString();this._store.add(a);return a},_removeItem:function(a){this._store.remove(a)},
_getRootItem:function(){return{id:"root",name:"Services Root",type:"root"}},_createTree:function(){var b=this._getRootItem(),b=new d({data:[b],getChildren:function(a){return this.query({parent:a.id})}});this._store=new a(b);b=new t({store:this._store,query:{id:"root"},mayHaveChildren:c.hitch(this,this._mayHaveChildren)});this.tree=new p({multiple:this.multiple,model:b,showRoot:!1,style:{width:"100%"},isLeafItem:c.hitch(this,this.isLeafItem),onOpen:c.hitch(this,function(a,b){this._onTreeOpen(a,b);
this.emit("tree-open",a,b)}),onClick:c.hitch(this,function(a,b,d){this._onTreeClick(a,b,d);this.emit("tree-click",a,b,d)}),getIconStyle:c.hitch(this,function(a,b){var d=null;if(!a)return null;var c={width:"20px",height:"20px",backgroundRepeat:"no-repeat",backgroundPosition:"center center",backgroundImage:""},m=window.location.protocol+"//"+window.location.host+require.toUrl("jimu"),e=this._getIconImageName(a,b);e||("folder"===a.type?e=b?"folder_open_default.png":"folder_close_default.png":this.isServiceTypeSupported(a.type)&&
(e=b?"folder_open_default.png":"folder_close_default.png"));e&&(c.backgroundImage="url("+m+"/css/images/"+e+")",d=c);return d})});f.addClass(this.tree.domNode,this._treeClass);this.tree.placeAt(this.domNode)},_getIconImageName:function(a,b){var d="";"function"===typeof this.rule.getIconImageName&&(d=this.rule.getIconImageName(a,b));return d},_mayHaveChildren:function(a){return"root"===a.type?!0:!this.isLeafItem(a)},_onTreeOpen:function(a,b){"root"!==a.id&&(!(0<this._store.query({parent:a.id}).length)&&
!a.checking&&!a.checked)&&(a.checking=!0,this._getSubItems(a.url).then(c.hitch(this,function(b){e.forEach(b,c.hitch(this,function(b){b.parent=a.id;this._addItem(b)}));a.checking=!1;a.checked=!0}),c.hitch(this,function(b){console.error(b);a.checking=!1;a.checked=!0})))},_onTreeClick:function(a,b,d){},destroy:function(){this.shelter&&(this.shelter.destroy(),this.shelter=null);this.inherited(arguments)}})})},"jimu/serviceBrowserRuleUtils":function(){define(["dojo/_base/lang","dojo/_base/array","dojo/Deferred",
"jimu/utils","jimu/ServiceBrowserRule"],function(l,n,s,q,g){var c={combineRules:function(c){var e=new g;n.forEach(c,function(b){n.forEach(b.leafTypes,function(b){0>e.leafTypes.indexOf(b)&&e.leafTypes.push(b)});n.forEach(b.serviceTypes,function(b){0>e.serviceTypes.indexOf(b)&&e.serviceTypes.push(b)})});e.getMatchedRule=function(b){var e=null;n.some(c,function(d){return d.isUrlContainsServiceType(b)?(e=d,!0):!1});return e};e.getItem=function(b){var c=null;return c=(c=e.getMatchedRule(b))?c.getItem(b):
e.defaultGetItem(b)};e.getSubItemUrls=function(b){var c=null;return c=(c=e.getMatchedRule(b))?c.getSubItemUrls(b):e.defaultGetSubItemUrls(b)};e.getIconImageName=function(b,c){var d="";if(b.url){var a=e.getMatchedRule(b.url);a&&"function"===typeof a.getIconImageName&&(d=a.getIconImageName(b,c))}return d};return e},getFeaturelayerServiceBrowserRule:function(f,e){var b=l.clone(f),k=["point","polyline","polygon"];l.isArrayLike(b)&&0<b.length?(b=n.filter(b,function(b){return 0<=k.indexOf(b)}),0===b.length&&
(b=k)):b=k;return c._getFeaturelayerServiceBrowserRule(b,e)},_getFeaturelayerServiceBrowserRule:function(c,e){return new g({types:c,leafTypes:["Feature Layer","Table"],serviceTypes:["MapServer","FeatureServer"],_groupLayerType:"Group Layer",_featureLayerType:"Feature Layer",_tableType:"Table",getItem:function(b){var c=new s;this.isUrlEndWithServiceType(b,this.serviceTypes)?c=this.defaultGetItem(b):this.getRestInfo(b).then(l.hitch(this,function(d){d=this._getItemByLayerDefinition(b,d);c.resolve(d)}),
l.hitch(this,function(b){c.reject(b)}));return c},getSubItemUrls:function(b){var c=new s;return c=this.isUrlEndWithServiceType(b)?this._getSubUrlsByServiceUrl(b):this._getSubUrlsByGroupUrl(b)},getIconImageName:function(b,c){var d="";if("MapServer"===b.type||"FeatureServer"===b.type)d=c?"mapserver_open.png":"mapserver_close.png";else if(b.type===this._groupLayerType)d=c?"group_layer2.png":"group_layer1.png";else if(b.type===this._featureLayerType){var a=q.getTypeByGeometryType(b.definition&&b.definition.geometryType);
"point"===a?d="point_layer1.png":"polyline"===a?d="line_layer1.png":"polygon"===a&&(d="polygon_layer1.png")}else b.type===this._tableType?d="table.png":"root"===b.type&&this._currentUrl&&n.some(this.serviceTypes,l.hitch(this,function(a){return q.isStringEndWith(this._currentUrl,"/"+a)}))&&(d=c?"mapserver_open.png":"mapserver_close.png");return d},_getSubUrlsByServiceUrl:function(b){var c=new s;this.getRestInfo(b).then(l.hitch(this,function(d){var a=[];n.forEach(d.layers,l.hitch(this,function(d){0<=
d.parentLayerId||a.push(b+"/"+d.id)}));c.resolve(a)}),l.hitch(this,function(b){c.reject(b)}));return c},_getSubUrlsByGroupUrl:function(b){var c=new s;this.getRestInfo(b).then(l.hitch(this,function(d){var a=[];if(d.type===this._groupLayerType)var e=this._getServiceUrlByLayerUrl(b),a=n.map(d.subLayers||[],l.hitch(this,function(a){return e+"/"+a.id}));c.resolve(a)}),l.hitch(this,function(b){c.reject(b)}));return c},_getItemByLayerDefinition:function(b,c){var d=null,a=c.type;if(a===this._groupLayerType)d=
{name:c.name,type:a,url:b,definition:c};else if(a===this._featureLayerType||a===this._tableType){var f=!1;a===this._featureLayerType?f=this._validateEsriGeometryType(c.geometryType):a===this._tableType&&(f=!0);f&&(f=!1,(f=e?q.isFeaturelayerUrlSupportQuery(b,c.capabilities):!0)&&(d={name:c.name,type:a,url:b,definition:c}))}return d},_validateEsriGeometryType:function(b){b=q.getTypeByGeometryType(b);return 0<=this.types.indexOf(b)},_getServiceUrlByLayerUrl:function(b){for(var c="",d=0;d<this.serviceTypes.length;d++){var a=
this.serviceTypes[d].toLowerCase(),e=b.toLowerCase().lastIndexOf("/"+a+"/");if(0<=e){c=b.slice(0,e+a.length+1);break}}return c}})},getGeocodeServiceBrowserRule:function(){return new g({leafTypes:["GeocodeServer"],serviceTypes:["GeocodeServer"]})},getGpServiceBrowserRule:function(){return new g({leafTypes:["GPTask"],serviceTypes:["GPServer"],getItem:function(c){var e=new s;this.isUrlEndWithServiceType(c)?e=this.defaultGetItem(c):this.getRestInfo(c).then(l.hitch(this,function(b){e.resolve({name:b.displayName||
b.name,type:"GPTask",url:c,definition:b})}),l.hitch(this,function(b){e.reject(b)}));return e},getSubItemUrls:function(c){var e=new s;this.isUrlEndWithServiceType(c)?this.getRestInfo(c).then(l.hitch(this,function(b){b=n.map(b.tasks||[],l.hitch(this,function(b){return c+"/"+b}));e.resolve(b)}),l.hitch(this,function(b){e.reject(b)})):e.resolve([]);return e},getIconImageName:function(c,e){var b="";"GPServer"===c.type?b="toolbox.png":"GPTask"===c.type&&(b="tool.png");return b}})},getImageServiceBrowserRule:function(c){return new g({leafTypes:["ImageServer"],
serviceTypes:["ImageServer"],getItem:function(e){var b=new s;this.isUrlEndWithServiceType(e)?this.defaultGetItem(e).then(l.hitch(this,function(e){c?q.isImageServiceSupportQuery(e.definition.capabilities)?b.resolve(e):b.resolve(null):b.resolve(e)}),l.hitch(this,function(c){b.reject(c)})):b.resolve(null);return b},getIconImageName:function(c,b){var k="";"ImageServer"===c.type&&(k="image_layer.png");return k}})},getQueryableServiceBrowserRule:function(){var f=c.getFeaturelayerServiceBrowserRule(["point",
"polyline","polygon"],!0),e=c.getImageServiceBrowserRule(!0);return c.combineRules([f,e])}};return c})},"jimu/ServiceBrowserRule":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/Deferred jimu/utils esri/request esri/IdentityManager".split(" "),function(l,n,s,q,g,c,f){return l([],{leafTypes:null,serviceTypes:null,_restInfoCache:{},constructor:function(c){n.mixin(this,c);n.isArrayLike(this.leafTypes)||(this.leafTypes=[]);n.isArrayLike(this.serviceTypes)||(this.serviceTypes=
[])},getItem:function(c){return this.defaultGetItem(c)},getSubItemUrls:function(c){return this.defaultGetSubItemUrls(c)},getIconImageName:function(c,b){return""},defaultGetItem:function(c){var b=new q;c=c.replace(/\/*$/g,"");if(this.isUrlEndWithServiceType(c)){var k=c.split("/"),d=k[k.length-1],a=k[k.length-2];this.getRestInfo(c).then(n.hitch(this,function(k){b.resolve({name:a,type:d,url:c,definition:k})}),n.hitch(this,function(a){console.error(a);b.reject({errorCode:"NETWORK_ERROR",error:a})}))}else b.resolve(null);
return b},defaultGetSubItemUrls:function(c){c=new q;c.resolve([]);return c},getRestInfo:function(e){var b=new q;e=e.replace(/\/*$/g,"");var k=this._restInfoCache[e];if(k)b.resolve(k);else{var k={url:e,content:{f:"json"},handleAs:"json",callbackParamName:"callback",timeout:2E4},d=f.findCredential(e);d&&d.token&&(k.content.token=d.token);c(k).then(n.hitch(this,function(a){this._restInfoCache[e]=a;b.resolve(a)}),function(a){b.reject(a)})}return b},isServiceTypeSupported:function(c){c=c.toLowerCase();
return s.some(this.serviceTypes,n.hitch(this,function(b){return b.toLowerCase()===c}))},isUrlEndWithServiceType:function(c){return s.some(this.serviceTypes,n.hitch(this,function(b){return g.isStringEndWith(c,"/"+b)}))},isUrlContainsServiceType:function(c){c=c.toLowerCase();return s.some(this.serviceTypes,n.hitch(this,function(b){b=b.toLowerCase();return 0<=c.indexOf("/"+b)}))}})})},"jimu/dijit/_QueryableServiceChooserContent":function(){define(["dojo/_base/declare","./_BasicServiceChooserContent",
"./QueryableServiceBrowser"],function(l,n,s){return l([n],{baseClass:"jimu-queryable-service-chooser-content",_examples:["http://myserver/arcgis/rest/services","http://myserver/arcgis/rest/services/myservice/MapServer","http://myserver/arcgis/rest/services/myservice/FeatureServer","http://myserver/arcgis/rest/services/myservice/ImageServer"],_createServiceBrowser:function(l){return new s(l)}})})},"jimu/dijit/_BasicServiceChooserContent":function(){define("dojo/_base/declare dijit/_WidgetBase dijit/_TemplatedMixin dijit/_WidgetsInTemplateMixin dojo/text!./templates/_BasicServiceChooserContent.html dojo/Evented dojo/Deferred dojo/_base/html dojo/_base/array dojo/_base/lang dojo/on dojo/aspect dojo/promise/all jimu/dijit/URLInput jimu/dijit/LoadingIndicator".split(" "),
function(l,n,s,q,g,c,f,e,b,k,d,a,t,r,p){return l([n,s,q,c],{templateString:g,_examples:["http://myserver/arcgis/rest/services","http://myserver/arcgis/rest/services/folder","http://myserver/arcgis/rest/services/myservice/servicetype"],multiple:!1,url:"",getSelectedItems:function(){return this.serviceBrowser.getSelectedItems()},postMixInProperties:function(){this.nls=k.mixin({},window.jimuNls.common);this.nls=k.mixin(this.nls,window.jimuNls.basicServiceChooser)},postCreate:function(){this.inherited(arguments);
e.addClass(this.domNode,"jimu-basic-service-chooser-content");this.multiple=!!this.multiple;this._initSelf();this.exampleTd.innerHTML=this.exampleTd.innerHTML},setUrl:function(a){var b=new f;(this.url=a)&&"string"===typeof this.url?(this.urlInput.set("value",this.url),b=this._onBtnValidateClick()):b.reject();return b},focusInput:function(){this.urlInput.focus()},_initSelf:function(){this._examples&&0<this._examples.length?b.forEach(this._examples,k.hitch(this,function(a){e.create("div",{innerHTML:a,
"class":"example-url"},this.exampleTd)})):e.setStyle(this.exampleTr,"display","none");var c={multiple:this.multiple,_onTreeClick:k.hitch(this,this._onTreeClick)};this.serviceBrowser=this._createServiceBrowser(c);this.serviceBrowser.placeAt(this.serviceBrowserContainer);this.serviceBrowser.startup();this.own(a.after(this.urlInput,"validator",k.hitch(this,this._afterUrlValidate)));this.url&&"string"===typeof this.url&&this.urlInput.set("value",this.url);this.own(d(this.serviceBrowser,"error",k.hitch(this,
this._onServiceBrowserError)))},_createServiceBrowser:function(a){},_validateUrl:function(a){a=a.replace(/\/*$/g,"");if((a=a.match(/\/rest\/services\/*(.*)/gi))&&0<a.length)if(a=a[0].replace(/\/rest\/services\/*/,"")){var b=a.split("/");if(1===b.length)return!0;if(2===b.length)return this.serviceBrowser.isServiceTypeSupported(b[1]);if(3<=b.length)return a=this.serviceBrowser.isServiceTypeSupported(b[1]),b=this.serviceBrowser.isServiceTypeSupported(b[2]),a||b}else return!0;else return!1},_afterUrlValidate:function(a){a&&
(a=this.urlInput.get("value"),a=this._validateUrl(a));a?e.removeClass(this.btnValidate,"jimu-state-disabled"):e.addClass(this.btnValidate,"jimu-state-disabled");return a},_onServiceBrowserError:function(a){this._showErrorMessage(a)},_showErrorMessage:function(a){a&&"string"===typeof a?(this.errorNode.innerHTML=a,e.addClass(this.errorSection,"visible")):e.removeClass(this.errorSection,"visible")},_clearErrorMessage:function(){this.errorNode.innerHTML="";e.removeClass(this.errorSection,"visible")},
_onBtnValidateClick:function(){this._clearErrorMessage();var a=new f;if(this.urlInput.validate()){var b=this.urlInput.get("value");this.serviceBrowser.setUrl(b).then(k.hitch(this,function(){this.domNode&&this._checkSelectedItemsNumber();a.resolve()}),k.hitch(this,function(){this.domNode&&this._checkSelectedItemsNumber();a.reject()}));this.emit("validate-click")}else a.reject();return a},_checkSelectedItemsNumber:function(){0<this.getSelectedItems().length?e.removeClass(this.btnOk,"jimu-state-disabled"):
e.addClass(this.btnOk,"jimu-state-disabled")},_onTreeClick:function(){this._checkSelectedItemsNumber()},_onBtnOkClick:function(){var a=this.getSelectedItems();0<a.length&&this.emit("ok",a)},_onBtnCancelClick:function(){this.emit("cancel")}})})},"widgets/Query/utils":function(){define("dojo/_base/lang dojo/_base/array dojo/_base/Deferred jimu/utils jimu/portalUrlUtils jimu/LayerInfos/LayerInfos esri/request esri/kernel".split(" "),function(l,n,s,q,g,c,f,e){return{getDefaultPopupInfo:function(b,c,d){var a=
{title:"",fieldInfos:[],description:null,showAttachments:!1,mediaInfos:[]};d=!!d;if(b.displayField){var e=this._getRealFieldName(b.displayField,b);a.title="{"+e+"}"}else if(e=q.getObjectIdField(b))a.title="{"+e+"}";a.showAttachments=!!b.hasAttachments;e=b=b.fields;c||(e=n.filter(b,l.hitch(this,function(a){return"esriFieldTypeGeometry"!==a.type})));c=n.map(e,l.hitch(this,function(a){a=q.getDefaultPortalFieldInfo(a);a.visible=d;return a}));a.fieldInfos=c;return a},_getRealFieldName:function(b,c){b=
b.toUpperCase();if(c.fields&&0<c.fields.length)for(var d=0;d<c.fields.length;d++)if(c.fields[d].name.toUpperCase()===b)return c.fields[d].name;return""},getPortalFieldInfosWithoutShape:function(b,c){return n.filter(c,l.hitch(this,function(c){return"esriFieldTypeGeometry"!==q.getFieldInfoByFieldName(b.fields,c.fieldName).type}))},getPopupInfoByAttributes:function(b,c){var d=this.getDefaultPopupInfo(b,!1),a=[],e={},r;for(r in c){a.push(r);var p=q.getFieldInfoByFieldName(b.fields,r).type;if("esriFieldTypeSingle"===
p||"esriFieldTypeDouble"===p)p=c[r],null!==p&&void 0!==p&&(p=parseFloat(p),isNaN(p)||(p=p.toString().split("."),2===p.length&&(e[r]=p[1].length)))}d.fieldInfos=n.filter(d.fieldInfos,l.hitch(this,function(b){var c=b.fieldName;e.hasOwnProperty(c)&&(b.format.places=e[c]);return a.indexOf(c)}));return d},upgradePopupToPopupInfo:function(b,c){var d=this.getDefaultPopupInfo(b,!1,!1);d.title=c.title||"";d.title=d.title.replace("${","{");if(c.fields){var a={};n.forEach(c.fields,l.hitch(this,function(b){a[b.name]=
b}));n.forEach(d.fieldInfos,l.hitch(this,function(b){var c=b.fieldName,e=a[c];e&&(b.label=e.alias||b.label,b.visible=!0,"image"===e.specialType&&(c="{"+c+"}",d.mediaInfos.push({title:"",type:"image",caption:b.label,value:{sourceURL:c,linkURL:c}})))}))}return d},isImageServiceLayer:function(b){return b.url&&-1<b.url.indexOf("/ImageServer")},isTable:function(b){return"Table"===b.type},getConfigWithValidDataSource:function(b){var e={hideLayersAfterWidgetClosed:b.hideLayersAfterWidgetClosed,queries:[]},
d=c.getInstanceSync();e.queries=n.filter(b.queries,l.hitch(this,function(a){return(a=a.webMapLayerId)?d.getLayerInfoById(a)?!0:!!d.getTableInfoById(a):!0}));return e},removePopupInfoUnsupportFields:function(b,c){var d=n.map(b.fields,l.hitch(this,function(a){return a.name}));c.fieldInfos&&0<c.fieldInfos.length&&(c.fieldInfos=n.filter(c.fieldInfos,l.hitch(this,function(a){return 0<=d.indexOf(a.fieldName)})))},overridePopupTemplateMethodGetAttachments:function(b,c,d){b.getAttachments=function(a){var b=
new s;try{var r=a.attributes[d],p=c+"/"+r+"/attachments";a={url:p,content:{f:"json"},callbackParamName:"callback"};var m="",h=e.id.findCredential(c);h&&h.token&&(m="?token\x3d"+h.token);f(a).then(function(a){a=a.attachmentInfos;n.forEach(a,function(a){a.url=p+"/"+a.id+m;a.objectId=r});b.resolve(a)},function(a){b.reject(a)})}catch(g){console.error(g)}return b}},isServiceSupportsOrderBy:function(b){var c=!1;b.advancedQueryCapabilities&&b.advancedQueryCapabilities.supportsOrderBy&&(c=!0);return c},isServiceSupportsPagination:function(b){var c=
!1;b.advancedQueryCapabilities&&b.advancedQueryCapabilities.supportsPagination&&(c=!0);return c},isSupportObjectIds:function(b){var c=0;b.currentVersion&&(c=parseFloat(b.currentVersion));return 10<=c||b.hasOwnProperty("typeIdField")},getQueryType:function(b){var c=-1;return c=this.isServiceSupportsOrderBy(b)&&this.isServiceSupportsPagination(b)?1:this.isSupportObjectIds(b)?2:3},getWebMapPopupInfoByUrl:function(b,c){var d=null;c=c.replace(/\/*$/g,"");var a=g.removeProtocol(c);n.some(b.operationalLayers,
l.hitch(this,function(b){var c=g.removeProtocol(b.url.replace(/\/*$/g,""));if(b.popupInfo){if(c===a)return d=b.popupInfo,!0}else if(b.layers&&0<b.layers.length)return n.some(b.layers,l.hitch(this,function(e){return c+"/"+e.id===a?(d=b.popupInfo,!0):!1}));return!1}));return d},getPopupInfoForRelatedLayer:function(b,c,d){(b=this.getWebMapPopupInfoByUrl(b,c))||(b=this.getDefaultPopupInfo(d,!1,!0));if(!b.title&&(d=q.getObjectIdField(d)))b.title="{"+d+"}";return b}}})},"widgets/Query/setting/SingleQuerySetting":function(){define("dojo/_base/declare dijit/_WidgetBase dijit/_TemplatedMixin dijit/_WidgetsInTemplateMixin dojo/text!./SingleQuerySetting.html dojo/_base/lang dojo/_base/html dojo/on dojo/query dojo/Evented dojo/Deferred jimu/utils jimu/dijit/Popup jimu/dijit/CheckBox jimu/dijit/TabContainer3 jimu/dijit/Message jimu/dijit/_QueryableLayerSourcePopup ../utils ./PopupConfig ./SpatialFilterConfig esri/request esri/symbols/jsonUtils jimu/dijit/Filter jimu/dijit/SymbolPicker jimu/dijit/LoadingShelter jimu/dijit/ImageChooser dijit/form/ValidationTextBox".split(" "),
function(l,n,s,q,g,c,f,e,b,k,d,a,t,r,p,m,h,u,v,B,x,A,y){return l([n,s,q,k],{baseClass:"jimu-widget-single-query-setting",templateString:g,popupConfig:null,spatialFilterConfig:null,jimuNls:null,_webMapLayerId:null,_defaultTaskIcon:null,map:null,nls:null,target:null,tr:null,appConfig:null,folderUrl:null,_layerDefinition:null,postMixInProperties:function(){this.inherited(arguments);this._defaultTaskIcon=this.folderUrl+"css/images/default_task_icon.png";this.jimuNls=window.jimuNls},postCreate:function(){this.inherited(arguments);
this._initSelf()},destroy:function(){this.target=null;this.emit("before-destroy");this.inherited(arguments)},setConfig:function(a){this.config=a;if(this._isObject(this.config)){var b=a.url||"";b&&"string"===typeof b&&(this.showBigShelter(),this.tab.showShelter(),this._layerDefinition&&this._layerDefinition.url===b?this._resetByConfig(this.config,this._layerDefinition).promise.always(c.hitch(this,function(){this.hideBigShelter();this.tab.hideShelter()})):(this._layerDefinition=null,x({url:b,handAs:"json",
content:{f:"json"},callbackParamName:"callback"}).then(c.hitch(this,function(a){this.domNode&&(this._layerDefinition=a,this._layerDefinition.url=b,this._resetByConfig(this.config,this._layerDefinition).promise.always(c.hitch(this,function(){this.hideBigShelter();this.tab.hideShelter()})))}),c.hitch(this,function(a){console.error(a);this.domNode&&this.hideBigShelter()}))))}},getConfig:function(){var b={url:"",name:"",icon:"",filter:null,showSQL:!1,spatialFilter:null,popupInfo:"",orderByFields:[],useLayerSymbol:!0,
resultsSymbol:"",keepResultsOnMapAfterCloseWidget:!0,enableExport:!1,singleResultLayer:!0,webMapLayerId:this._webMapLayerId};if(!this._layerDefinition)return this.scrollToDom(this.generalTable),new m({message:this.nls.setSourceTip}),null;b.url=this._layerDefinition.url;if(!this.queryNameTextBox.validate())return a.showValidationErrorTipForFormDijit(this.queryNameTextBox),null;b.name=this.queryNameTextBox.get("value");var c=this.imageChooser.getImageData();c===this._defaultTaskIcon&&(c="");b.icon=
c;c=this.filter.toJson();if(!c)return new m({message:this.nls.setFilterTip}),null;b.filter=c;b.showSQL=this.cbxShowSQL.getValue();if(u.isTable(this._layerDefinition))b.spatialFilter=null;else{c=this.spatialFilterConfig.getConfig();if(!c)return null;b.spatialFilter=c}c=this.popupConfig.getConfig();if(!c)return null;b.orderByFields=c.orderByFields;b.popupInfo=c.popupInfo;c=null;if(u.isTable(this._layerDefinition))b.useLayerSymbol=!1,b.resultsSymbol=null;else if(u.isImageServiceLayer(this._layerDefinition))if(b.useLayerSymbol=
!1,c=this.layerSymbolPicker.getSymbol())b.resultsSymbol=c.toJson();else return console.error("Can't get symbol from SymbolPicker"),null;else if(this.radioCustomSymbol.checked)if(b.useLayerSymbol=!1,c=this.layerSymbolPicker.getSymbol())b.resultsSymbol=c.toJson();else return console.error("Can't get symbol from SymbolPicker"),null;else b.useLayerSymbol=!0,b.resultsSymbol=null;b.singleResultLayer=this.radioOneLayerPerTask.checked;b.enableExport=this.cbxExport.getValue();this.target._layerDefinition=
this._layerDefinition;return this.target.singleConfig=b},scrollToDom:function(a){a=f.coords(a).y;var b=f.coords(this.domNode).y;this.domNode.parentNode.scrollTop=a-b},showBigShelter:function(){this.emit("loading")},hideBigShelter:function(){this.emit("unloading")},showQueryDefinition:function(){this.tab.selectTab(this.nls.queryDefinition)},showResultsSetting:function(){this.tab.selectTab(this.nls.results)},_initSelf:function(){this._initTabs();this._initInfoTab();this._initFilterTab();this._initResultSettingTab();
this._initOptionsTab()},_initTabs:function(){this.tab=new p({tabs:[{title:this.nls.infoText,content:this.infoTabNode},{title:this.nls.filters,content:this.definitionTabNode},{title:this.nls.results,content:this.resultsTabNode},{title:this.nls.optionsText,content:this.optionsTabNode}]});this.tab.placeAt(this.detailSection);this.tab.showShelter();this.own(e(this.tab,"tabChanged",c.hitch(this,function(a){a===this.nls.filters&&this._updateSqlDivByFilter()})))},_initInfoTab:function(){this._setDefaultTaskIcon()},
_onImageChooserDivClicked:function(b){this.imageChooser.mask&&(b=b.target||b.srcElement,b!==this.imageChooser.mask&&b!==this.imageChooser.fileInput&&a.simulateClickEvent(this.imageChooser.mask))},_initFilterTab:function(){this.filter=new y({enableAskForValues:!0,noFilterTip:this.nls.noFilterTip,style:"width:100%;"});this.filter.placeAt(this.filterDiv);this.cbxShowSQL=new r({label:this.nls.displaySQLTip});this.cbxShowSQL.labelNode&&f.addClass(this.cbxShowSQL.labelNode,"light-stress");this.cbxShowSQL.check();
this.cbxShowSQL.placeAt(this.showSQLSection);this._initSpatialFilterConfig()},_resetAttributeFilter:function(){this.filter.reset();this._updateSqlDivByFilter()},_updateSqlDivByFilter:function(){var a="",b=this.filter.toJson();b?a=b.expr?"1\x3d1"===b.expr?this.nls.noExpressionDefinedTip:b.expr:this.nls.specifyFilterAtRuntimeTip:console.log("can't get partsObj from filter");a&&(this.sqlDiv.innerHTML=a)},_onBtnFilterClicked:function(){var a=new t({width:680,height:485,content:this.filter,buttons:[{label:this.nls.ok,
onClick:c.hitch(this,function(){this.filter.toJson()&&(a.content=null,f.place(this.filter.domNode,this.filterDiv),this._updateSqlDivByFilter(),a.close())})},{label:this.nls.cancel,onClick:c.hitch(this,function(){a.content=null;f.place(this.filter.domNode,this.filterDiv);a.close()})}]})},_initSpatialFilterConfig:function(){this.spatialFilterConfig=new B({nls:this.nls});this.spatialFilterConfig.placeAt(this.spatialFilterDiv)},_initResultSettingTab:function(){this._initPopupConfig();a.combineRadioCheckBoxWithLabel(this.radioServiceSymbol,
this.labelServiceSymbol);a.combineRadioCheckBoxWithLabel(this.radioCustomSymbol,this.labelCustomSymbol);a.groupRadios([this.radioServiceSymbol,this.radioCustomSymbol])},_initPopupConfig:function(){this.popupConfig=new v({nls:this.nls,sqs:this});this.popupConfig.placeAt(this.popupContainer)},_showSymbolSection:function(){f.removeClass(this.symbolSection,"not-visible")},_hideSymbolSection:function(){f.addClass(this.symbolSection,"not-visible")},_initOptionsTab:function(){this.cbxExport=new r({label:this.nls.exportTip});
this.cbxExport.placeAt(this.exportSection);a.combineRadioCheckBoxWithLabel(this.radioOneLayerPerTask,this.labelOneLayerPerTask);a.combineRadioCheckBoxWithLabel(this.radioMultipleLayerPerTask,this.labelMultipleLayerPerTask);a.groupRadios([this.radioOneLayerPerTask,this.radioMultipleLayerPerTask])},_onQueryNameChanged:function(){var a=b(".label",this.target)[0],c=this.queryNameTextBox.get("value");a.innerHTML=c;a.title=c},_clear:function(){this.urlTextBox.set("value","");this._layerDefinition=null;
this.queryNameTextBox.set("value","");this._setDefaultTaskIcon();this._resetAttributeFilter();f.removeClass(this.spatialFilterDiv,"not-visible");this.spatialFilterConfig.reset();this.cbxShowSQL.check();this.tab.showShelter();this.popupConfig.onLayerChange(!0);this.radioServiceSymbol.disabled=!1;this.radioCustomSymbol.checked=!0;this.layerSymbolPicker.reset();this.radioOneLayerPerTask.checked=!0;this.cbxExport.uncheck()},_onBtnSetSourceClicked:function(){var a=new h({titleLabel:this.nls.setDataSource,
dijitArgs:{multiple:!1,createMapResponse:this.map.webMapResponse,portalUrl:this.appConfig.portalUrl,style:{height:"100%"}}});this.own(e(a,"ok",c.hitch(this,function(b){var c=a.getSelectedRadioType();a.close();a=null;this.setNewLayerDefinition(b,c,null)})));this.own(e(a,"cancel",c.hitch(this,function(){a.close();a=null})));a.startup()},setNewLayerDefinition:function(a,b,c){a.definition.name=a.name;a.definition.url=a.url;a.url!==(this._layerDefinition&&this._layerDefinition.url)&&this._resetByNewLayerDefinition(a,
b,c)},_resetByNewLayerDefinition:function(a,b,d){var h=a.definition;this._clear();if(h){var e=null;"map"===b&&a.layerInfo&&(e=a.layerInfo.id);this._layerDefinition=h;this._webMapLayerId=e;a=h.url;this.urlTextBox.set("value",a);this.queryNameTextBox.set("value",d||h.name);this.tab.hideShelter();this._resetAttributeFilter();this._layerDefinition&&this.filter.buildByExpr(a,"1\x3d1",this._layerDefinition).promise.always(c.hitch(this,function(){this._updateSqlDivByFilter()}));u.isTable(this._layerDefinition)?
f.addClass(this.spatialFilterDiv,"not-visible"):f.removeClass(this.spatialFilterDiv,"not-visible");this.popupConfig.onLayerChange(!!this._webMapLayerId);this._webMapLayerId&&this.popupConfig.setConfig({popupInfo:{readFromWebMap:!0},orderByFields:[]});this._handleSymbolSection(h)}},_handleSymbolSection:function(b,c){var d="";this._showSymbolSection();if(u.isTable(b))this.radioServiceSymbol.disabled=!0,this._hideSymbolSection(),this.layerSymbolPicker.reset();else if(u.isImageServiceLayer(b))this.radioServiceSymbol.disabled=
!0,this.radioCustomSymbol.checked=!0,d="fill";else if(this.radioServiceSymbol.disabled=!1,b.geometryType){var h=a.getTypeByGeometryType(b.geometryType);"point"===h?d="marker":"polyline"===h?d="line":"polygon"===h&&(d="fill")}d&&(this.layerSymbolPicker.showByType(d),c&&this.layerSymbolPicker.showBySymbol(c))},_setDefaultTaskIcon:function(){this.imageChooser.setDefaultSelfSrc(this._defaultTaskIcon)},_resetByConfig:function(a,b){var h=new d,e=c.clone(a);this._upgradeConfigForLowerVersion(b,e);this._webMapLayerId=
e.webMapLayerId;this.urlTextBox.set("value",e.url);this.queryNameTextBox.set("value",e.name||"");e.icon?this.imageChooser.setDefaultSelfSrc(e.icon):this._setDefaultTaskIcon();var m=e.filter;this._resetAttributeFilter();var p=null,p=this._isObject(m)?this.filter.buildByFilterObj(b.url,m,b):this.filter.buildByExpr(b.url,"1\x3d1",b);p.promise.always(c.hitch(this,function(){this._updateSqlDivByFilter();h.resolve()}));this.cbxShowSQL.setValue(e.showSQL);this.spatialFilterConfig.reset();u.isTable(this._layerDefinition)?
f.addClass(this.spatialFilterDiv,"not-visible"):(f.removeClass(this.spatialFilterDiv,"not-visible"),e.spatialFilter&&this.spatialFilterConfig.setConfig(e.spatialFilter));this.popupConfig.onLayerChange(!!this._webMapLayerId);this.popupConfig.setConfig({popupInfo:e.popupInfo,orderByFields:e.orderByFields});m=null;if(e.resultsSymbol)try{m=A.fromJson(e.resultsSymbol)}catch(r){console.error(r)}this._handleSymbolSection(b,m);e.useLayerSymbol&&(this.radioServiceSymbol.checked=!0);e.singleResultLayer?this.radioOneLayerPerTask.checked=
!0:this.radioMultipleLayerPerTask.checked=!0;this.cbxExport.setValue(e.enableExport);return h},_upgradeConfigForLowerVersion:function(a,b){b.popup&&!b.popupInfo&&(b.popupInfo=u.upgradePopupToPopupInfo(a,b.popup))},_isObject:function(a){return a&&"object"===typeof a}})})},"widgets/Query/setting/PopupConfig":function(){define("dojo/_base/declare dijit/_WidgetBase dijit/_TemplatedMixin dijit/_WidgetsInTemplateMixin dojo/text!./PopupConfig.html dojo/_base/lang dojo/_base/html dojo/_base/array dojo/on dojo/query jimu/utils jimu/dijit/SimpleTable jimu/dijit/Popup dijit/TooltipDialog dijit/Menu dijit/MenuItem dijit/popup ./SortFields ../utils".split(" "),
function(l,n,s,q,g,c,f,e,b,k,d,a,t,r,p,m,h,u,v){return l([n,s,q],{baseClass:"jimu-query-setting-popup-config",templateString:g,_currentOrderByFields:null,_validSortFieldTypes:"esriFieldTypeOID esriFieldTypeString esriFieldTypeDate esriFieldTypeSmallInteger esriFieldTypeInteger esriFieldTypeSingle esriFieldTypeDouble".split(" "),nls:null,sqs:null,postCreate:function(){this.inherited(arguments);d.combineRadioCheckBoxWithLabel(this.portalRadio,this.portalLabel);d.combineRadioCheckBoxWithLabel(this.customRadio,
this.customLabel);var a=d.groupRadios([this.portalRadio,this.customRadio],c.hitch(this,this._updateClassWhenRadioChanged));e.forEach(a,c.hitch(this,function(a){this.own(a)}));this._currentOrderByFields=[];this._initFieldsTable();this._initAddFields();this.onLayerChange(!0);this._updateClassWhenRadioChanged()},onLayerChange:function(a){this._clear();this.portalRadio.disabled=a?!1:!0;this._updateClassWhenRadioChanged();if(a=this._getLayerDefinition()){this._clear();var b={popupInfo:null,orderByFields:[]};
b.popupInfo=this._getDefaultPopupInfo();this.setConfig(b);this._updateSortingIcon(a)}},setConfig:function(a){this._clear();this.config=c.clone(a);var b=this._getLayerDefinition();b&&(this._updateSortingIcon(b),this._setPopupInfoForUI(a.popupInfo),this._setOrderByFields(a.orderByFields))},getConfig:function(){var a={popupInfo:this._getPopupInfoByUI(),orderByFields:this._getOrderByFields()};return!a.popupInfo?null:a},destroy:function(){this.sqs=null;this.titleTextBox.focusNode.blur();this.inherited(arguments)},
_clear:function(){f.addClass(this.sortFieldsIcon,"jimu-state-disabled");this._currentOrderByFields=[];this.titleTextBox.set("value","");this.displayFieldsTextBox.set("value","");this.fieldsTable.clear();this._resetMenu();this._addEmptyMenuItem()},_getLayerDefinition:function(){return this.sqs._layerDefinition},_updateClassWhenRadioChanged:function(){!this.portalRadio.disabled&&this.portalRadio.checked?f.addClass(this.domNode,"portal-radio-selected"):f.removeClass(this.domNode,"portal-radio-selected")},
_setPopupInfoForUI:function(a){var b=this._getDefaultPopupInfo();this._setCustomPopupInfoForUI(b);!this.portalRadio.disabled&&a.readFromWebMap?(this.customRadio.checked=!1,this.portalRadio.checked=!0):(this.portalRadio.checked=!1,this.customRadio.checked=!0,this._setCustomPopupInfoForUI(a));this._updateClassWhenRadioChanged()},_setCustomPopupInfoForUI:function(a){var b=this._getLayerDefinition(),d=v.getPortalFieldInfosWithoutShape(b,a.fieldInfos);a.title&&"string"===typeof a.title?this.titleTextBox.set("value",
a.title||""):this.titleTextBox.set("value","");this._updateDisplayFieldsTextBox(d);var h=[],m=e.map(b.fields,c.hitch(this,function(a){return a.name}));e.forEach(a.mediaInfos,c.hitch(this,function(a){if(0<m.length&&"image"===a.type&&a.value){var b=a.value.sourceURL,d=null;e.some(m,c.hitch(this,function(a){return"{"+a+"}"===b?(d=a,!0):!1}));d&&h.push(d)}}));this._resetMenu();this.fieldsTable.clear();0<d.length?e.forEach(d,c.hitch(this,function(a){this._addMenuItem(a);var b=0<=h.indexOf(a.fieldName);
this._addRow(a,b)})):this._addEmptyMenuItem()},_updateDisplayFieldsTextBox:function(a){a=e.filter(a,c.hitch(this,function(a){return a.visible}));a=e.map(a,function(a){return a.label}).join(";  ");this.displayFieldsTextBox.set("value",a)},_addRow:function(a,b){var d=c.clone(a);d.specialType=b?"image":"none";this.fieldsTable.addRow(d)},_addMenuItem:function(a){var b=new m({label:a.fieldName+" {"+a.fieldName+"}",onClick:c.hitch(this,function(){var b=this.titleTextBox.get("value")+"{"+a.fieldName+"}";
this.titleTextBox.set("value",b);b=this.menu.getParent();f.setStyle(b.domNode.parentNode,"display","none")})});this.menu.addChild(b)},_addEmptyMenuItem:function(){var a=new m({label:this.nls.noField,onClick:c.hitch(this,function(){var a=this.menu.getParent();f.setStyle(a.domNode.parentNode,"display","none")})});this.menu.addChild(a)},_getPopupInfoByUI:function(){var a=null;if(this.customRadio.checked){if(a=this._getCustomPopupInfoByUI())a.readFromWebMap=!1}else a={readFromWebMap:!0};return a},_getCustomPopupInfoByUI:function(){var a=
{title:"",fieldInfos:[],description:null,showAttachments:!1,mediaInfos:[]},b=this._getLayerDefinition();if(!this.titleTextBox.validate())return this.sqs.showResultsSetting(),this.sqs.scrollToDom(this.titleTextBox.domNode),d.showValidationErrorTipForFormDijit(this.titleTextBox),null;a.title=this.titleTextBox.get("value");a.showAttachments=!!b.hasAttachments;b=this._getPortalFieldInfosAndMediaInfosByUI();a.fieldInfos=b.portalFieldInfos;a.mediaInfos=b.mediaInfos;return a},_getPortalFieldInfosAndMediaInfosByUI:function(){var a=
this.fieldsTable.getData(),b=[];return{portalFieldInfos:e.map(a,c.hitch(this,function(a){var c=a.fieldName,d=this._getDefaultPortalFieldInfo(c);d.label=a.label||d.label;if((d.visible=a.visible)&&"image"===a.specialType)a="{"+c+"}",b.push({title:"",type:"image",caption:c,value:{sourceURL:a,linkURL:a}});return d})),mediaInfos:b}},_getDefaultPopupInfo:function(){var a=this._getLayerDefinition();return v.getDefaultPopupInfo(a,!1)},_getDefaultPortalFieldInfo:function(a){a=this._getServiceFildInfo(a);return d.getDefaultPortalFieldInfo(a)},
_getServiceFildInfo:function(a){var b=null,b=this._getLayerDefinition();return b=d.getFieldInfoByFieldName(b.fields,a)},_getSortedFieldInfos:function(a,b){var d=[],h={};e.forEach(b,c.hitch(this,function(a){h[a.name]=a}));var m=[],m=m.concat(a);e.forEach(b,c.hitch(this,function(a){a=a.name;0>m.indexOf(a)&&m.push(a)}));return d=e.map(m,c.hitch(this,function(a){return h[a]}))},_onBtnSetDisplayFieldsClicked:function(){var a=new t({width:640,height:380,titleLabel:this.nls.setDisplayFields,content:this.displayFieldsDiv,
onClose:c.hitch(this,function(){f.place(this.displayFieldsDiv,this.displayFieldsSection);a.content=""}),buttons:[{label:this.nls.ok,onClick:c.hitch(this,function(){var b=this._getPortalFieldInfosAndMediaInfosByUI().portalFieldInfos;this._updateDisplayFieldsTextBox(b);a.close()})},{label:this.nls.cancel,onClick:c.hitch(this,function(){a.close()})}]})},_setOrderByFields:function(a){a=a||[];var b=this.sortFieldsDiv.innerHTML="";a=e.map(a,c.hitch(this,function(c,d){var h=c.split(" "),e=h[0],m="ASC";h[1]&&
"string"===typeof h[1]&&(h[1]=h[1].toUpperCase(),"DESC"===h[1]&&(m="DESC"));h=m.toLowerCase();h="\x3cspan\x3e"+e+'\x3c/span\x3e\x3cspan class\x3d"sort-arrow '+h+'"\x3e\x3c/span\x3e';d!==a.length-1&&(h+="\x3cspan\x3e,\x26nbsp;\x3c/span\x3e");b+=h;return e+" "+m}));b&&(b="\x3cspan\x3e\x26nbsp;\x26nbsp;\x3c/span\x3e"+b);this.sortFieldsDiv.innerHTML=b;this._currentOrderByFields=a},_getOrderByFields:function(){var a=this._getLayerDefinition();return this._shouldEnableSorting(a)?this._currentOrderByFields:
[]},_updateSortingIcon:function(a){this._shouldEnableSorting(a)?f.removeClass(this.sortFieldsIcon,"jimu-state-disabled"):f.addClass(this.sortFieldsIcon,"jimu-state-disabled")},_shouldEnableSorting:function(a){return this._isServiceSupportsPagination(a)&&this._isServiceSupportsOrderBy(a)},_onBtnSortFieldsClicked:function(){var a=this._getLayerDefinition();if(a&&this._shouldEnableSorting(a))var b=new u({nls:this.nls,layerDefinition:a,orderByFields:c.clone(this._currentOrderByFields),validSortFieldTypes:this._validSortFieldTypes}),
d=new t({width:640,height:380,titleLabel:this.nls.setSortingFields,content:b,onClose:c.hitch(this,function(){b.destroy()}),buttons:[{label:this.nls.ok,onClick:c.hitch(this,function(){var a=b.getOrderByFields();this._setOrderByFields(a);d.close()})},{label:this.nls.cancel,onClick:c.hitch(this,function(){d.close()})}]})},_initFieldsTable:function(){var b={autoHeight:!1,style:"height:187px",fields:[{name:"visible",title:this.nls.visibility,type:"checkbox"},{name:"fieldName",title:this.nls.name,type:"text",
editable:!1},{name:"label",title:this.nls.alias,type:"text",editable:!0},{name:"specialType",title:this.nls.specialType,type:"extension",create:c.hitch(this,this._createSpecialType),setValue:c.hitch(this,this._setValue4SpecialType),getValue:c.hitch(this,this._getValueOfSpecialType)},{name:"actions",title:this.nls.actions,type:"actions",actions:["up","down"]}]};this.fieldsTable=new a(b);this.fieldsTable.placeAt(this.fieldsContainer);this.fieldsTable.startup()},_createSpecialType:function(a){a=f.create("select",
{},a);f.create("option",{value:"none",label:this.nls.none,selected:!0,innerHTML:this.nls.none},a);f.create("option",{value:"image",label:this.nls.image,innerHTML:this.nls.image},a)},_setValue4SpecialType:function(a,b){k("select",a)[0].value=b},_getValueOfSpecialType:function(a){return k("select",a)[0].value},_initAddFields:function(){var a=f.create("div");this.tooltipDialog=new r({style:"cursor:pointer",content:a});this.menu=new p;this.menu.placeAt(a);this.own(b(document.body,"click",c.hitch(this,
function(){h.close(this.tooltipDialog)})))},_onAddClicked:function(a){a.stopPropagation();a.preventDefault();h.close(this.tooltipDialog);h.open({popup:this.tooltipDialog,around:this.btnAddFields})},_resetMenu:function(){var a=this.menu.getChildren();e.forEach(a,c.hitch(this,function(a){this.menu.removeChild(a)}))},_isServiceSupportsPagination:function(a){var b=!1;a.advancedQueryCapabilities&&a.advancedQueryCapabilities.supportsPagination&&(b=!0);return b},_isServiceSupportsOrderBy:function(a){var b=
!1;a.advancedQueryCapabilities&&a.advancedQueryCapabilities.supportsOrderBy&&(b=!0);return b}})})},"widgets/Query/setting/SortFields":function(){define("dojo/_base/declare dijit/_WidgetBase dijit/_TemplatedMixin dijit/_WidgetsInTemplateMixin dijit/registry dijit/form/Select dojo/text!./SortFields.html dojo/on dojo/query dojo/_base/lang dojo/_base/array dojo/_base/html jimu/dijit/SimpleTable".split(" "),function(l,n,s,q,g,c,f,e,b,k,d,a,t){return l([n,s,q],{baseClass:"jimu-query-setting-sort-fields",
templateString:f,_allFieldNames:null,_sortTipClassName:"sort-tip",_fieldNameSelectClassName:"field-name-select",_sortTypeSelectClassName:"sort-type-select",nls:null,layerDefinition:null,orderByFields:null,validSortFieldTypes:[],postCreate:function(){this.inherited(arguments);var a=d.filter(this.layerDefinition.fields,k.hitch(this,function(a){return 0<=this.validSortFieldTypes.indexOf(a.type)}));this._allFieldNames=d.map(a,function(a){return a.name});this._initTable();this.orderByFields?this._setOrderByFields(this.orderByFields):
this.orderByFields=[]},_initTable:function(){var a={autoHeight:!1,style:"height:187px",fields:[{name:"sortTip",title:this.nls.field,type:"text",width:"100px"},{name:"fieldName",title:"",type:"extension",create:k.hitch(this,this._create4FieldName),setValue:k.hitch(this,this._setValue4FieldName),getValue:k.hitch(this,this._getValue4FieldName)},{name:"sortType",title:this.nls.sortingOrder,type:"extension",create:k.hitch(this,this._create4SortType),setValue:k.hitch(this,this._setValue4SortType),getValue:k.hitch(this,
this._getValue4SortType)},{name:"actions",title:this.nls.actions,type:"actions",actions:["up","down","delete"],width:"120px"}]};this.table=new t(a);this.own(e(this.table,"row-up",k.hitch(this,this._onTableRowUp)));this.own(e(this.table,"row-down",k.hitch(this,this._onTableRowDown)));this.table.placeAt(this.tableDiv);this.table.startup()},getOrderByFields:function(){var a=this.table.getData();return d.map(a,k.hitch(this,function(a){return a.fieldName+" "+a.sortType}))},_getFieldAlias:function(a){for(var b=
a,c=this.layerDefinition.fields,d=0;d<c.length;d++)if(c[d].name===a){b=c[d].alias||a;break}return b},_getRestFields:function(){var a=this._getAllFieldSelects(),b=d.map(a,k.hitch(this,function(a){return a.get("value")}));return d.filter(this._allFieldNames,k.hitch(this,function(a){return 0>b.indexOf(a)}))},_onAddNewClicked:function(){var a=this._getRestFields();if(0!==a.length){var b="",b=0===this.table.getRows().length?this.nls.sortBy:this.nls.thenBy;this.table.addRow({sortTip:b,fieldName:a[0],sortType:"ASC"})}},
_setOrderByFields:function(a){this.table.clear();a=a||[];d.forEach(a,k.hitch(this,function(a,b){var c=a.split(" "),d=c[0],e="ASC";c[1]&&"string"===typeof c[1]&&(c[1]=c[1].toUpperCase(),"DESC"===c[1]&&(e="DESC"));c="";c=0===b?this.nls.sortBy:this.nls.thenBy;this.table.addRow({sortTip:c,fieldName:d,sortType:e})}))},_getAllFieldSelects:function(){var a=b("."+this._fieldNameSelectClassName,this.table.tbody);return d.map(a,k.hitch(this,function(a){return g.byNode(a)}))},_getSelectFromTd:function(a,c){var d=
b("."+c,a)[0];return g.byNode(d)},_onTableRowUp:function(){this._resetSortTips()},_onTableRowDown:function(){this._resetSortTips()},_getAllSortTipDivs:function(){return b(".sortTip .normal-text-div",this.table.tbody)},_resetSortTips:function(){var a=this.table.getRows();d.forEach(a,k.hitch(this,function(a,b){var c="",c=0===b?this.nls.sortBy:this.nls.thenBy;this.table.editRow(a,{sortTip:c})}));a=this._getAllSortTipDivs();d.forEach(a,k.hitch(this,function(a,b){a.innerHTML=0===b?this.nls.sortBy:this.nls.thenBy}))},
_create4FieldName:function(b){var p=this._getRestFields(),m=new c({style:"width:120px;height:20px;"});a.addClass(m.domNode,this._fieldNameSelectClassName);m.placeAt(b);d.forEach(p,k.hitch(this,function(a){var b=this._getFieldAlias(a);m.addOption({value:a,label:b})}));this.own(e(m,"change",k.hitch(this,this._onFieldNameSelectChanged)))},_setValue4FieldName:function(a,b){this._getSelectFromTd(a,this._fieldNameSelectClassName).set("value",b)},_getValue4FieldName:function(a){return this._getSelectFromTd(a,
this._fieldNameSelectClassName).get("value")},_onFieldNameSelectChanged:function(){var a=this._getAllFieldSelects();d.forEach(a,k.hitch(this,function(a){var b=a.get("value"),c=a.getOptions(),c=d.filter(c,k.hitch(this,function(a){return a.value!==b}));a.removeOption(c);c=this._getRestFields();d.forEach(c,k.hitch(this,function(c){if(c!==b){var d=this._getFieldAlias(c);a.addOption({value:c,label:d})}}))}))},_create4SortType:function(b){var d=new c({style:"width:120px;height:20px;"});a.addClass(d.domNode,
this._sortTypeSelectClassName);d.placeAt(b);d.addOption({value:"ASC",label:this.nls.ascending,selected:!0});d.addOption({value:"DESC",label:this.nls.descending})},_setValue4SortType:function(a,b){var c=this._getSelectFromTd(a,this._sortTypeSelectClassName);("ASC"===b||"DESC"===b)&&c.set("value",b)},_getValue4SortType:function(a){return this._getSelectFromTd(a,this._sortTypeSelectClassName).get("value")}})})},"widgets/Query/setting/SpatialFilterConfig":function(){define("dojo/_base/declare dijit/_WidgetBase dijit/_TemplatedMixin dijit/_WidgetsInTemplateMixin dojo/text!./SpatialFilterConfig.html dojo/on dojo/query dojo/_base/lang dojo/_base/html dojo/_base/array ./SearchDistance ./RelationshipsSelector jimu/utils jimu/dijit/Popup jimu/dijit/CheckBox".split(" "),
function(l,n,s,q,g,c,f,e,b,k,d,a,t,r,p){return l([n,s,q],{baseClass:"jimu-query-setting-spatialfilter-config",templateString:g,_allRelationshipInfos:null,nls:null,config:null,postCreate:function(){this.inherited(arguments);this._allRelationshipInfos=[{relationship:"SPATIAL_REL_WITHIN",nls:this.nls.contain,label:this.nls.contain},{relationship:"SPATIAL_REL_CROSSES",nls:this.nls.cross,label:this.nls.cross},{relationship:"SPATIAL_REL_ENVELOPEINTERSECTS",nls:this.nls.envelopeIntersect,label:this.nls.envelopeIntersect},
{relationship:"SPATIAL_REL_INDEXINTERSECTS",nls:this.nls.indexIntersect,label:this.nls.indexIntersect},{relationship:"SPATIAL_REL_INTERSECTS",nls:this.nls.intersect,label:this.nls.intersect},{relationship:"SPATIAL_REL_OVERLAPS",nls:this.nls.overlap,label:this.nls.overlap},{relationship:"SPATIAL_REL_TOUCHES",nls:this.nls.touch,label:this.nls.touch},{relationship:"SPATIAL_REL_CONTAINS",nls:this.nls.within,label:this.nls.within}];this._initSelf();this.reset();this.config&&this.setConfig(this.config)},
setConfig:function(a){this.reset();this.config=e.clone(a);this.config.currentMapExtent?(this.cbxMapExtent.check(),this.config.currentMapExtent["default"]?this._makeDefaultItem(this.mapExtentSection):this._makeNotDefaultItem(this.mapExtentSection)):this.cbxMapExtent.uncheck();this.config.drawing?(this.cbxDrawGraphic.check(),this.config.drawing["default"]?this._makeDefaultItem(this.drawGraphicSection):this._makeNotDefaultItem(this.drawGraphicSection),this._selectDrawingTools(this.config.drawing.geometryTypes),
this.config.drawing.buffer?(this.cbxDrawBufferSetting.check(),this.drawingSearchDistance.setConfig(this.config.drawing.buffer)):this.cbxDrawBufferSetting.uncheck()):this.cbxDrawGraphic.uncheck();this.config.useFeatures?(this.cbxUseFeatures.check(),this.config.useFeatures["default"]?this._makeDefaultItem(this.useFeaturesSection):this._makeNotDefaultItem(this.useFeaturesSection),this._setRelationshipsForTextBox(this.config.useFeatures.relationships),this.config.useFeatures.buffer?(this.cbxFeatureBufferSetting.check(),
this.featuresSearchDistance.setConfig(this.config.useFeatures.buffer)):this.cbxFeatureBufferSetting.uncheck()):this.cbxUseFeatures.uncheck();this.config.fullLayerExtent?(this.cbxLayerExtent.check(),this.config.fullLayerExtent["default"]?this._makeDefaultItem(this.layerExtentSection):this._makeNotDefaultItem(this.layerExtentSection)):this.cbxLayerExtent.uncheck();k.forEach([this.cbxMapExtent,this.cbxDrawGraphic,this.cbxUseFeatures,this.cbxLayerExtent],e.hitch(this,function(a){a.labelNode&&b.addClass(a.labelNode,
"light-stress")}));this._hideDrawGraphicSettting();this._hideFeaturesSetting()},getConfig:function(){var a={currentMapExtent:null,drawing:null,useFeatures:null,fullLayerExtent:null};this.cbxMapExtent.getValue()&&(a.currentMapExtent={"default":this._isDefaultItem(this.mapExtentSection)});if(this.cbxDrawGraphic.getValue()&&(a.drawing={"default":!1,geometryTypes:[],buffer:null},a.drawing["default"]=this._isDefaultItem(this.drawGraphicSection),a.drawing.geometryTypes=this._getSelectedDrawingTools(),this.cbxDrawBufferSetting.getValue())){var b=
this.drawingSearchDistance.getConfig();if(!b)return;a.drawing.buffer=b}if(this.cbxUseFeatures.getValue()&&(a.useFeatures={"default":!1,relationships:[],buffer:null},a.useFeatures["default"]=this._isDefaultItem(this.useFeaturesSection),a.useFeatures.relationships=this._getRelationshipsFromTextBox(),this.cbxFeatureBufferSetting.getValue())){b=this.featuresSearchDistance.getConfig();if(!b)return;a.useFeatures.buffer=b}this.cbxLayerExtent.getValue()&&(a.fullLayerExtent={"default":this._isDefaultItem(this.layerExtentSection)});
return a},reset:function(){this.cbxMapExtent.uncheck();this.cbxDrawGraphic.uncheck();this._selectDrawingTools(["POINT","POLYLINE","EXTENT"]);this.drawingSearchDistance.reset();this._hideDrawGraphicSettting();this.cbxUseFeatures.uncheck();this._resetToDefaultRelationshipForTextBox();this.featuresSearchDistance.reset();this._hideFeaturesSetting();this.cbxLayerExtent.uncheck()},_initSelf:function(){this.cbxMapExtent=new p({label:this.nls.useCurrentExtentTip,onChange:e.hitch(this,function(){this._onCbxChanged(this.cbxMapExtent,
this.mapExtentSection)})});this.cbxMapExtent.placeAt(this.cbxMapExtentDiv);this.cbxDrawGraphic=new p({label:this.nls.useDrawGraphicTip,onChange:e.hitch(this,function(a){a?this._showDrawGraphicSettting():this._hideDrawGraphicSettting();this._onCbxChanged(this.cbxDrawGraphic,this.drawGraphicSection)})});this.cbxDrawGraphic.placeAt(this.cbxDrawGraphicDiv);this.cbxUseFeatures=new p({label:this.nls.useFeaturesTip,onChange:e.hitch(this,function(a){a?this._showFeaturesSetting():this._hideFeaturesSetting();
this._onCbxChanged(this.cbxUseFeatures,this.useFeaturesSection)})});this.cbxUseFeatures.placeAt(this.cbxUseFeaturesDiv);this.cbxLayerExtent=new p({label:this.nls.noSpatialLimitTip,onChange:e.hitch(this,function(){this._onCbxChanged(this.cbxLayerExtent,this.layerExtentSection)})});this.cbxLayerExtent.placeAt(this.cbxLayerExtentDiv);this.drawingSearchDistance=new d({nls:this.nls});this.drawingSearchDistance.placeAt(this.drawingSearchDistanceDiv);this.cbxDrawBufferSetting=new p({label:this.nls.bufferSettings});
b.addClass(this.cbxDrawBufferSetting.domNode,"buffer-checkbox");this.own(c(this.cbxDrawBufferSetting,"change",e.hitch(this,function(){this.cbxDrawBufferSetting.getValue()?this.drawingSearchDistance.enable():this.drawingSearchDistance.disable()})));this.cbxDrawBufferSetting.placeAt(this.drawBufferSettingCbxDiv);this.featuresSearchDistance=new d({nls:this.nls});this.featuresSearchDistance.placeAt(this.featuresSearchDistanceDiv);this.cbxFeatureBufferSetting=new p({label:this.nls.bufferSettings});b.addClass(this.cbxFeatureBufferSetting.domNode,
"buffer-checkbox");this.own(c(this.cbxFeatureBufferSetting,"change",e.hitch(this,function(){this.cbxFeatureBufferSetting.getValue()?this.featuresSearchDistance.enable():this.featuresSearchDistance.disable()})));this.cbxFeatureBufferSetting.placeAt(this.featureBufferSettingCbxDiv)},_onCbxChanged:function(a,b){a.getValue()?0===f(".spatial-filter-item.default",this.domNode).length&&this._makeDefaultItem(b):this._makeNotDefaultItem(b)},_onBtnMakeDefaultClicked:function(a){if(a=t.getAncestorDom(a.target||
a.srcElement,e.hitch(this,function(a){return b.hasClass(a,"spatial-filter-item")}),this.domNode)){var c=this._getCbxBySpatialFiterItemDom(a);c&&(c.getValue()?this._makeDefaultItem(a):this._makeNotDefaultItem(a))}},_isDefaultItem:function(a){return b.hasClass(a,"default")},_makeDefaultItem:function(a){var c=this._getCbxBySpatialFiterItemDom(a);c&&c.getValue()&&(f(".spatial-filter-item",this.domNode).removeClass("default"),b.addClass(a,"default"))},_makeNotDefaultItem:function(a){var c=k.filter([{spatialFilterItemDom:this.mapExtentSection,
cbx:this.cbxMapExtent},{spatialFilterItemDom:this.drawGraphicSection,cbx:this.cbxDrawGraphic},{spatialFilterItemDom:this.useFeaturesSection,cbx:this.cbxUseFeatures},{spatialFilterItemDom:this.layerExtentSection,cbx:this.cbxLayerExtent}],function(a){return a.cbx.getValue()});0===c.length?f(".spatial-filter-item",this.domNode).removeClass("default"):1===c.length?this._makeDefaultItem(c[0].spatialFilterItemDom):2<=c.length&&(c=k.filter(c,function(b){return b.spatialFilterItemDom!==a}),k.some(c,function(a){return b.hasClass(a.spatialFilterItemDom,
"default")})||this._makeDefaultItem(c[0].spatialFilterItemDom))},_getCbxBySpatialFiterItemDom:function(a){var b=null;a===this.mapExtentSection?b=this.cbxMapExtent:a===this.drawGraphicSection?b=this.cbxDrawGraphic:a===this.useFeaturesSection?b=this.cbxUseFeatures:a===this.layerExtentSection&&(b=this.cbxLayerExtent);return b},_onDrawGraphicArrowIconClicked:function(){b.hasClass(this.drawGraphicSettting,"hidden-setting")?this._showDrawGraphicSettting():this._hideDrawGraphicSettting()},_showDrawGraphicSettting:function(){b.removeClass(this.drawGraphicSettting,
"hidden-setting");this._updateDrawGraphicArrowIcon();b.addClass(this.featuresSetting,"hidden-setting");this._updateFeaturesArrowIcon()},_hideDrawGraphicSettting:function(){b.addClass(this.drawGraphicSettting,"hidden-setting");this._updateDrawGraphicArrowIcon()},_updateDrawGraphicArrowIcon:function(){b.hasClass(this.drawGraphicSettting,"hidden-setting")?b.removeClass(this.arrowIconDrawGraphic,"opened"):b.addClass(this.arrowIconDrawGraphic,"opened")},_onFeaturesArrowIconClicked:function(){b.hasClass(this.featuresSetting,
"hidden-setting")?this._showFeaturesSetting():this._hideFeaturesSetting()},_showFeaturesSetting:function(){b.addClass(this.drawGraphicSettting,"hidden-setting");this._updateDrawGraphicArrowIcon();b.removeClass(this.featuresSetting,"hidden-setting");this._updateFeaturesArrowIcon()},_hideFeaturesSetting:function(){b.addClass(this.featuresSetting,"hidden-setting");this._updateFeaturesArrowIcon()},_updateFeaturesArrowIcon:function(){b.hasClass(this.featuresSetting,"hidden-setting")?b.removeClass(this.arrowIconFeatures,
"opened"):b.addClass(this.arrowIconFeatures,"opened")},_onDrawingToolsContainerClicked:function(a){a=a.target||a.srcElement;var c=null;b.hasClass(a,"draw-item")?c=a:b.hasClass(a,"draw-item-icon")&&(c=a.parentNode);c&&(b.toggleClass(c,"selected"),0===f(".selected",this.drawingToolsContainer).length&&b.addClass(c,"selected"))},_selectDrawingTools:function(a){var c=f(".draw-item",this.drawingToolsContainer);k.forEach(c,e.hitch(this,function(c){var d=c.getAttribute("data-geotype");0<=a.indexOf(d)?b.addClass(c,
"selected"):b.removeClass(c,"selected")}))},_getSelectedDrawingTools:function(){var a=[],a=f(".draw-item.selected",this.drawingToolsContainer);return a=k.map(a,e.hitch(this,function(a){return a.getAttribute("data-geotype")}))},_onBtnRelationshipClicked:function(){var b=this._getRelationshipsFromTextBox(),c=new a({nls:this.nls,allRelationshipInfos:e.clone(this._allRelationshipInfos)}),d=new r({width:640,height:405,titleLabel:this.nls.setSpatialRelationships,content:c,onClose:e.hitch(this,function(){c.destroy();
c=null}),buttons:[{label:this.nls.ok,onClick:e.hitch(this,function(){var a=c.getSelectedRelationships();this._setRelationshipsForTextBox(a);d.close()})},{label:this.nls.cancel,onClick:e.hitch(this,function(){d.close()})}]});c.setSelectedRelationshipInfos(b)},_resetToDefaultRelationshipForTextBox:function(){this._setRelationshipsForTextBox([{relationship:"SPATIAL_REL_INTERSECTS",label:this.nls.intersect}])},_setRelationshipsForTextBox:function(a){this.relationshipTextBox.relationships=e.clone(a);a=
k.map(a,function(a){return a.label}).join("; ");this.relationshipTextBox.set("value",a);this.relationshipTextBox.domNode.title=a},_getRelationshipsFromTextBox:function(){var a=[];this.relationshipTextBox.relationships&&(a=k.map(this.relationshipTextBox.relationships,function(a){return{relationship:a.relationship,label:a.label}}));return a}})})},"widgets/Query/setting/SearchDistance":function(){define("dojo/_base/declare dijit/_WidgetBase dijit/_TemplatedMixin dijit/_WidgetsInTemplateMixin dojo/text!./SearchDistance.html dojo/_base/lang jimu/utils dijit/form/Select dijit/form/NumberTextBox".split(" "),
function(l,n,s,q,g,c,f){return l([n,s,q],{baseClass:"jimu-query-setting-searchdistance",templateString:g,_allUnitInfos:null,nls:null,config:null,postCreate:function(){this.inherited(arguments);this.reset();this.config&&this.setConfig(this.config)},setConfig:function(e){this.reset();this.config=c.clone(e);this.numberTextBox.set("value",this.config.defaultDistance);this.defaultUnitSelect.set("value",this.config.defaultUnit)},getConfig:function(){var c={defaultDistance:0,defaultUnit:""};if(this.numberTextBox.validate())return c.defaultDistance=
this.numberTextBox.get("value"),c.defaultUnit=this.defaultUnitSelect.get("value"),c;f.showValidationErrorTipForFormDijit(this.numberTextBox)},reset:function(){this.numberTextBox.set("value",0);this.defaultUnitSelect.set("value","MILES")},enable:function(){this.numberTextBox.set("disabled",!1);this.defaultUnitSelect.set("disabled",!1)},disable:function(){this.numberTextBox.set("disabled",!0);this.defaultUnitSelect.set("disabled",!0)}})})},"widgets/Query/setting/RelationshipsSelector":function(){define("dojo/_base/declare dijit/_WidgetBase dijit/_TemplatedMixin dijit/_WidgetsInTemplateMixin dojo/_base/lang dojo/_base/array jimu/dijit/SimpleTable".split(" "),
function(l,n,s,q,g,c,f){return l([n,s,q],{baseClass:"jimu-query-setting-relationships-selector",templateString:'\x3cdiv\x3e\x3cdiv data-dojo-attach-point\x3d"tableDiv"\x3e\x3c/div\x3e\x3c/div\x3e',nls:null,allRelationshipInfos:null,postCreate:function(){this.inherited(arguments);this._initTable()},setSelectedRelationshipInfos:function(e){if(e&&0<=e.length){var b=g.clone(e),f=c.map(b,function(a){return a.relationship});e=this.table.getRows();var d={};c.forEach(e,g.hitch(this,function(a){var c=this.table.getRowData(a),
c=f.indexOf(c.relationship);0<=c?(this.table.editRow(a,{cbx:!0,label:b[c].label}),d[c]=a):this.table.editRow(a,{cbx:!1})}));for(e=f.length-1;0<=e;e--)d[e]&&this.table.moveToTop(d[e])}},getSelectedRelationships:function(){var e=this.table.getData(),e=c.filter(e,g.hitch(this,function(b){return b.cbx}));return c.map(e,g.hitch(this,function(b){return{relationship:b.relationship,label:b.label}}))},_initTable:function(){this.table=new f({autoHeight:!1,style:"height:277px",fields:[{name:"cbx",title:"",type:"checkbox",
width:"40px"},{name:"relationship",title:"",type:"text",hidden:!0},{name:"nls",title:this.nls.relationship,type:"text"},{name:"label",title:this.nls.label,type:"text",editable:!0},{name:"actions",title:this.nls.actions,type:"actions",actions:["up","down"],width:"120px"}]});this.table.placeAt(this.tableDiv);var e=c.map(this.allRelationshipInfos,g.hitch(this,function(b){return{cbx:!0,relationship:b.relationship,nls:b.nls,label:b.label}}));this.table.addRows(e)}})})},"jimu/dijit/Filter":function(){define("dojo/Evented dojo/_base/declare dijit/_WidgetBase dijit/_TemplatedMixin dijit/_WidgetsInTemplateMixin dojo/text!./templates/Filter.html jimu/filterUtils jimu/utils dijit/registry dojo/_base/lang dojo/_base/html dojo/_base/array dojo/aspect dojo/query dojo/Deferred esri/request ./_SingleFilter ./_FilterSet ./LoadingIndicator".split(" "),
function(l,n,s,q,g,c,f,e,b,k,d,a,t,r,p,m,h,u){return n([s,q,g,f,l],{templateString:c,baseClass:"jimu-filter",declaredClass:"jimu.dijit.Filter",nls:null,_validOptions:!1,_layerDefinition:null,_def:null,noFilterTip:"",enableAskForValues:!1,postMixInProperties:function(){this.nls=window.jimuNls.filterBuilder;var a=this.nls.matchMsg.split("${any_or_all}");this.nls.strMatchMsgPart1=a[0]||"";this.nls.strMatchMsgPart2=a[1]||"";this.inherited(arguments)},postCreate:function(){this.inherited(arguments);this.noFilterTip&&
"string"===typeof this.noFilterTip&&(this.noFilterTipSection.innerHTML=this.noFilterTip)},reset:function(){this.isBuilding()||(this.removeAllFilters(),this.url=null,this.isHosted=!1,this.partsObj=this.expr=this._layerDefinition=null)},isBuilding:function(){return this._def&&!this._def.isFulfilled()},buildByExpr:function(a,b,c){var d=new p;this.isBuilding()?d.reject("Filter is already building."):(this._def=null,this.reset(),this.url=a,this.isHosted=e.isHostedService(this.url),this.expr=b||"1\x3d1",
this._layerDefinition=c,d=this._def=this._init("expr"));return d},buildByFilterObj:function(a,b,c){var d=new p;this.isBuilding()?d.reject("Filter is already building."):(this._def=null,this.reset(),this.url=a,this.isHosted=e.isHostedService(this.url),this.partsObj=b,this._layerDefinition=c,d=this._def=this._init("partsObj"));return d},removeAllFilters:function(){this._destroyAllFilters()},_validateLayerDefinition:function(a){return this._isObject(a)},_init:function(b){var c=new p;if(!this._isString(this.url))return c.reject(),
c;var h=k.hitch(this,function(){setTimeout(k.hitch(this,function(){c.resolve()}),1500)}),e=k.hitch(this,function(){d.setStyle(this.contentSection,"display","block");d.setStyle(this.errorSection,"display","none");this.removeAllFilters();var e=this._layerDefinition.fields;e&&0<e.length?(e=a.filter(e,k.hitch(this,function(a){return 0<=this._supportFieldTypes.indexOf(a.type)})))&&0<e.length?(this._validOptions=!0,d.removeClass(this.btnAddSet,"jimu-state-disabled"),d.removeClass(this.btnAddExp,"jimu-state-disabled"),
d.removeClass(this.iconAddExp,"jimu-state-disabled"),d.removeClass(this.iconAddSet,"jimu-state-disabled"),this.createFieldsStore(),"expr"===b?this._isString(this.expr)?("1\x3d1"===this.expr.replace(/\s/gi,"")&&this.removeAllFilters(),this._parseExpr(this.expr)?h():c.reject()):c.reject():"partsObj"===b?this._validatePartsObj(this.partsObj)?(this._parsePartsObj(this.partsObj),h()):c.reject():this._validatePartsObj(this.partsObj)?(this._parsePartsObj(this.partsObj),h()):this._isString(this.expr)?this._parseExpr(this.expr)?
h():c.reject():(this.removeAllFilters(),h())):(this._showErrorOptions(this.nls.error.noFilterFields),c.reject()):c.reject()});this._validateLayerDefinition(this._layerDefinition)?e():(this.loading.show(),m({url:this.url,content:{f:"json"},handleAs:"json",callbackParamName:"callback"}).then(k.hitch(this,function(a){this.domNode?(this.loading.hide(),this._layerDefinition=a,e()):c.reject()}),k.hitch(this,function(a){console.error(a);c.reject();this.domNode&&this.loading.hide()})));return c},toJson:function(){var b=
{logicalOperator:this.allAnySelect.value,parts:[]},c=this._getAllSingleFiltersAndFilterSets();if(0===c.length)return b.expr="1\x3d1",b;a.forEach(c,k.hitch(this,function(a){a=a.toJson();b.parts.push(a)}));return a.every(b.parts,k.hitch(this,function(a){return!!a}))&&0<b.parts.length?(b.expr=this.getExprByFilterObj(b),b):null},createFieldsStore:function(){if(!this._layerDefinition.fields||0===this._layerDefinition.fields.length)this._showErrorOptions(this.nls.error.noFilterFields);else{var a=k.clone(this._layerDefinition).fields;
0===this.setFieldsStoreByFieldInfos(a)&&this._showErrorOptions(this.nls.error.noFilterFields)}},_parsePartsObj:function(a){this._validatePartsObj(a)&&(this.removeAllFilters(),this._buildEditUIByPartsObj(a))},_parseExpr:function(a){this._destroyAllFilters();var b=null;if(!this._validateLayerDefinition(this._layerDefinition))return b;if(!a||"string"!==typeof a)return this._showErrorOptions(this.nls.error.invalidSQL),b;if("1\x3d1"===this.expr.replace(/\s/gi,""))return b={expr:"1\x3d1",parts:[],logicalOperator:"AND"};
try{b=this.getFilterObjByExpr(a)}catch(c){b=null,console.error(c)}b?this._buildEditUIByPartsObj(b):this._showErrorOptions(this.nls.error.cantParseSQL);return b},_buildEditUIByPartsObj:function(b){b&&(this._destroyAllFilters(),this.allAnySelect.value=b.logicalOperator,a.forEach(b.parts,k.hitch(this,function(a){a.parts?this._addFilterSet(a):a.fieldObj&&(a.operator&&a.valueObj)&&this._addSingleFilter(a)})))},_addSingleFilter:function(a){a={url:this.url,layerInfo:this._layerDefinition,stringFieldType:this._stringFieldType,
dateFieldType:this._dateFieldType,numberFieldTypes:this._numberFieldTypes,part:a,OPERATORS:k.mixin({},this.OPERATORS),enableAskForValues:this.enableAskForValues,isHosted:this.isHosted};a=new h(a);a.placeAt(this.allExpsBox);a.startup();this.own(t.after(a,"_destroySelf",k.hitch(this,this._checkFilterNumbers)));this._checkFilterNumbers()},_addFilterSet:function(a){a={url:this.url,layerInfo:this._layerDefinition,stringFieldType:this._stringFieldType,dateFieldType:this._dateFieldType,numberFieldTypes:this._numberFieldTypes,
partsObj:a,OPERATORS:k.mixin({},this.OPERATORS),enableAskForValues:this.enableAskForValues,isHosted:this.isHosted};a=new u(a);a.placeAt(this.allExpsBox);a.startup();this.own(t.after(a,"_destroySelf",k.hitch(this,this._checkFilterNumbers)));this._checkFilterNumbers()},_destroyAllFilters:function(){for(var a=this._getAllSingleFiltersAndFilterSets();0<a.length;)a[0].destroy(),a.splice(0,1);this._checkFilterNumbers()},_getAllSingleFiltersAndFilterSetsDoms:function(){return r(".allExpsBox\x3e.jimu-single-filter,.allExpsBox\x3e.jimu-filter-set",
this.contentSection)},_getAllSingleFiltersAndFilterSets:function(){var c=this._getAllSingleFiltersAndFilterSetsDoms();return a.map(c,k.hitch(this,function(a){return b.byNode(a)}))},_checkFilterNumbers:function(){var b=this._getAllSingleFiltersAndFilterSetsDoms();1<b.length?d.setStyle(this.matchMsg,"display","block"):d.setStyle(this.matchMsg,"display","none");0<b.length?d.setStyle(this.noFilterTipSection,"display","none"):d.setStyle(this.noFilterTipSection,"display","block");a.forEach(b,k.hitch(this,
function(a,b){d.removeClass(a,"even-filter");d.removeClass(a,"odd-filter");d.addClass(a,0===(b+1)%2?"even-filter":"odd-filter")}));this.emit("filter-number-change")},_showErrorOptions:function(a){console.error(a);d.setStyle(this.errorSection,"display","none");this.errorTip.innerHTML=a;this.loading.hide()},_onBtnAddSetClick:function(){this._layerDefinition&&this._validOptions&&this._addFilterSet()},_onBtnAddExpClick:function(){this._layerDefinition&&this._validOptions&&this._addSingleFilter()}})})},
"jimu/dijit/_SingleFilter":function(){define("dojo/_base/declare dijit/_WidgetBase dijit/_TemplatedMixin dijit/_WidgetsInTemplateMixin dojo/text!./templates/_SingleFilter.html dojo/_base/lang dojo/_base/html dojo/_base/array dojo/on dojo/store/Memory jimu/utils jimu/dijit/CheckBox dijit/form/Select dijit/form/FilteringSelect dijit/form/ValidationTextBox dijit/form/DateTextBox dijit/form/NumberTextBox".split(" "),function(l,n,s,q,g,c,f,e,b,k,d){return l([n,s,q],{templateString:g,baseClass:"jimu-single-filter",
declaredClass:"jimu.dijit._SingleFilter",nls:null,url:null,layerInfo:null,stringFieldType:"",dateFieldType:"",numberFieldTypes:[],supportFieldTypes:[],part:null,OPERATORS:null,enableAskForValues:!1,isHosted:!1,postMixInProperties:function(){this.supportFieldTypes=[];this.supportFieldTypes.push(this.stringFieldType);this.supportFieldTypes.push(this.dateFieldType);this.supportFieldTypes=this.supportFieldTypes.concat(this.numberFieldTypes);this.nls=window.jimuNls.filterBuilder;this.nls.caseSensitive||
(this.nls.caseSensitive="Case Sensitive")},postCreate:function(){this.inherited(arguments);this._initSelf()},toJson:function(){var a=null,b=this._isUseAskForValues(),c=this._getSelectedFilteringItem(this.fieldsSelect);if(!c)return null;a={fieldObj:"",operator:"",valueObj:"",interactiveObj:"",caseSensitive:!1};if(b){if(!this.promptTB.validate())return this._showValidationErrorTip(this.promptTB),null;a.interactiveObj={prompt:this.promptTB.get("value"),hint:this.hintTB.get("value"),cascade:!1};this.uniqueRadio&&
(this.uniqueRadio.checked&&this.cbxCascade.getValue())&&(a.interactiveObj.cascade=!0)}a.fieldObj={name:c.name,label:c.name,shortType:c.shortType,type:c.type};if("none"===this.operatorsSelect.get("value"))return null;a.operator=this.operatorsSelect.get("value");a.valueObj={isValid:!0,type:""};var e=c.shortType;if(this.valueRadio.checked)if(a.valueObj.type="value","string"===e)if(a.operator===this.OPERATORS.stringOperatorIsBlank||a.operator===this.OPERATORS.stringOperatorIsNotBlank)a.valueObj.value=
null;else if(this._isFieldCoded(c)&&a.operator===this.OPERATORS.stringOperatorIs){if(!this.stringCodedValuesFS.validate())return this._showValidationErrorTip(this.stringCodedValuesFS),null;b=this._getSelectedFilteringItem(this.stringCodedValuesFS);a.valueObj.value=b?b.code:""}else{if(!this.stringTextBox.validate())return this._showValidationErrorTip(this.stringTextBox),null;a.valueObj.value=this.stringTextBox.get("value")}else if("number"===e)if(a.operator===this.OPERATORS.numberOperatorIsBlank||
a.operator===this.OPERATORS.numberOperatorIsNotBlank)a.valueObj.value=null;else if(a.operator===this.OPERATORS.numberOperatorIsBetween||a.operator===this.OPERATORS.numberOperatorIsNotBetween){if(!this.numberTextBox1.validate())return this._showValidationErrorTip(this.numberTextBox1),null;if(!this.numberTextBox2.validate())return this._showValidationErrorTip(this.numberTextBox2),null;a.valueObj.value1=this._getValueForNumberTextBox(this.numberTextBox1);a.valueObj.value2=this._getValueForNumberTextBox(this.numberTextBox2);
a.valueObj.isValid=d.isValidNumber(a.valueObj.value1)&&d.isValidNumber(a.valueObj.value2)}else{if(this._isFieldCoded(c)&&a.operator===this.OPERATORS.numberOperatorIs){if(!this.numberCodedValuesFS.validate())return this._showValidationErrorTip(this.numberCodedValuesFS),null;b=this._getSelectedFilteringItem(this.numberCodedValuesFS);a.valueObj.value=b?parseFloat(b.code):null}else{if(!this.numberTextBox.validate())return this._showValidationErrorTip(this.numberTextBox),null;a.valueObj.value=this._getValueForNumberTextBox(this.numberTextBox)}a.valueObj.isValid=
d.isValidNumber(a.valueObj.value)}else{if("date"===e)if(a.operator===this.OPERATORS.dateOperatorIsBlank||a.operator===this.OPERATORS.dateOperatorIsNotBlank)a.valueObj.value=null;else if(a.operator===this.OPERATORS.dateOperatorIsBetween||a.operator===this.OPERATORS.dateOperatorIsNotBetween){if(!this.dateTextBox1.validate())return this._showValidationErrorTip(this.dateTextBox1),null;if(!this.dateTextBox2.validate())return this._showValidationErrorTip(this.dateTextBox2),null;a.valueObj.value1=this.dateTextBox1.get("value").toDateString();
a.valueObj.value2=this.dateTextBox2.get("value").toDateString()}else{if(!this.dateTextBox.validate())return this._showValidationErrorTip(this.dateTextBox),null;a.valueObj.value=this.dateTextBox.get("value").toDateString()}}else if(this.fieldRadio.checked){b=this._getSelectedFilteringItem(this.fieldsSelect2);if(!b)return this._showValidationErrorTip(this.fieldsSelect2),null;a.valueObj.value=b.name;a.valueObj.label=b.name;a.valueObj.type="field"}else if(this.uniqueRadio&&this.uniqueRadio.checked)if(a.valueObj.type=
"unique",c=this._getSelectedFilteringItem(this.uniqueValuesSelect))"string"===e?a.valueObj.value=c.value:"number"===e&&(a.valueObj.value=parseFloat(c.value));else if(b)"string"===e?a.valueObj.value="":"number"===e&&(a.valueObj.value=null,a.valueObj.isValid=!1);else return this._showValidationErrorTip(this.uniqueValuesSelect),null;if("string"===e)switch(a.operator){case this.OPERATORS.stringOperatorStartsWith:case this.OPERATORS.stringOperatorEndsWith:case this.OPERATORS.stringOperatorContains:case this.OPERATORS.stringOperatorDoesNotContain:a.caseSensitive=
this.cbxCaseSensitive.getValue()}return a},showDelteIcon:function(){f.setStyle(this.btnDelete,"display","inline-block")},hideDeleteIcon:function(){f.setStyle(this.btnDelete,"display","none")},_showCaseSensitive:function(){f.setStyle(this.cbxCaseSensitive.domNode,"display","inline-block")},_hideCaseSensitive:function(){f.setStyle(this.cbxCaseSensitive.domNode,"display","none")},_getProcessedString:function(a){return d.isNotEmptyString(a,!0)?a:""},_getProcessedNumber:function(a){return d.isValidNumber(a)?
a:null},_setValueForStringTextBox:function(a,b){b=this._getProcessedString(b);a.set("value",b)},_setValueForNumberTextBox:function(a,b){d.isValidNumber(b)&&a.set("value",b)},_getValueForNumberTextBox:function(a){a=a.get("value");return this._getProcessedNumber(a)},_initSelf:function(){this.isHosted&&(this.cbxCaseSensitive.setValue(!1),this.cbxCaseSensitive.setStatus(!1),this.cbxCaseSensitive.domNode.title=this.nls.notSupportCaseSensitiveTip);this.own(b(this.cbxAskValues,"status-change",c.hitch(this,
this._onCbxAskValuesStatusChanged)));this.cbxAskValues.onChange=c.hitch(this,this._onCbxAskValuesClicked);this.own(b(this.fieldsSelect,"MouseEnter",c.hitch(this,this._updateFieldsSelectTitle)));this.own(b(this.operatorsSelect,"MouseEnter",c.hitch(this,this._updateOperatorsSelectTitle)));this.own(b(this.dateTextBox1,"MouseEnter",c.hitch(this,this._updateDateTextBox1Title)));this.own(b(this.dateTextBox2,"MouseEnter",c.hitch(this,this._updateDateTextBox2Title)));var a=new k({idProperty:"id",data:[]});
this.uniqueValuesSelect.set("store",a);this.enableAskForValues?(f.setStyle(this.cbxAskValues.domNode,"display","inline-block"),f.setStyle(this.promptSection,"display","block")):(f.setStyle(this.cbxAskValues.domNode,"display","none"),f.setStyle(this.promptSection,"display","none"));this.layerInfo=c.mixin({},this.layerInfo);this._initRadios();this.layerInfo.currentVersion&&parseFloat(this.layerInfo.currentVersion);this._isServiceSupportDistinctValues(this.url,this.layerInfo)||(f.destroy(this.uniqueTd),
this.uniqueRadio=null);if((a=this.layerInfo.fields)&&0<a.length)a=e.filter(a,c.hitch(this,function(a){return 0<=this.supportFieldTypes.indexOf(a.type)})),this._enableRadios(),this._initFieldsSelect(a);this.cbxCascade.setLabel(window.jimuNls.filterBuilder.cascadeFilterTip);f.addClass(this.cbxCascade.domNode,"cascade-checkbox")},_isServiceSupportDistinctValues:function(a,b){return this._isStreamServer(a)?!1:10.1<=parseFloat(b.currentVersion)},_isStreamServer:function(a){a=(a||"").replace(/\/*$/g,"");
return/\/StreamServer$/gi.test(a)},_isImageServer:function(a){a=(a||"").replace(/\/*$/g,"");return/\/ImageServer$/gi.test(a)},_updateFieldsSelectTitle:function(){this.fieldsSelect.domNode.title="";var a=this._getSelectedFilteringItem(this.fieldsSelect);a&&(this.fieldsSelect.domNode.title=a.displayName||a.alias||a.name)},_updateOperatorsSelectTitle:function(){this.operatorsSelect.domNode.title="";var a=this.operatorsSelect.get("value");a&&(a=this.operatorsSelect.getOptions(a),this.operatorsSelect.domNode.title=
a.label)},_updateDateTextBox1Title:function(){var a=this.dateTextBox1.get("displayedValue")||"";this.dateTextBox1.domNode.title=a},_updateDateTextBox2Title:function(){var a=this.dateTextBox2.get("displayedValue")||"";this.dateTextBox2.domNode.title=a},_showValidationErrorTip:function(a){try{!a.validate()&&a.domNode&&a.focusNode&&(a.focusNode.focus(),a.focusNode.blur())}catch(b){console.error(b)}},_focusValidationTextBox:function(a){try{a&&a.focusNode&&a.focusNode.focus()}catch(b){console.error(b)}},
_isFieldCoded:function(a){return(a=a.domain)&&"codedValue"===a.type&&a.codedValues&&0<a.codedValues.length},_getSelectedFilteringItem:function(a){if(a.validate()){var b=a.get("item");if(b)return b}this._showValidationErrorTip(a);return null},_getShortTypeByFieldType:function(a){return a===this.stringFieldType?"string":a===this.dateFieldType?"date":0<=this.numberFieldTypes.indexOf(a)?"number":null},_getOperatorsByShortType:function(a){var b=[];"string"===a?b=[this.OPERATORS.stringOperatorIs,this.OPERATORS.stringOperatorIsNot,
this.OPERATORS.stringOperatorStartsWith,this.OPERATORS.stringOperatorEndsWith,this.OPERATORS.stringOperatorContains,this.OPERATORS.stringOperatorDoesNotContain,this.OPERATORS.stringOperatorIsBlank,this.OPERATORS.stringOperatorIsNotBlank]:"number"===a?b=[this.OPERATORS.numberOperatorIs,this.OPERATORS.numberOperatorIsNot,this.OPERATORS.numberOperatorIsAtLeast,this.OPERATORS.numberOperatorIsLessThan,this.OPERATORS.numberOperatorIsAtMost,this.OPERATORS.numberOperatorIsGreaterThan,this.OPERATORS.numberOperatorIsBetween,
this.OPERATORS.numberOperatorIsNotBetween,this.OPERATORS.numberOperatorIsBlank,this.OPERATORS.numberOperatorIsNotBlank]:"date"===a&&(b=[this.OPERATORS.dateOperatorIsOn,this.OPERATORS.dateOperatorIsNotOn,this.OPERATORS.dateOperatorIsBefore,this.OPERATORS.dateOperatorIsAfter,this.OPERATORS.dateOperatorIsBetween,this.OPERATORS.dateOperatorIsNotBetween,this.OPERATORS.dateOperatorIsBlank,this.OPERATORS.dateOperatorIsNotBlank]);return b},_initFieldsSelect:function(a){a=e.map(a,c.hitch(this,function(a,b){var d=
c.mixin({},a);d.id=b;d.shortType=this._getShortTypeByFieldType(a.type);d.alias||(d.alias=d.name);var h="";"string"===d.shortType?h=this.nls.string:"number"===d.shortType?h=this.nls.number:"date"===d.shortType&&(h=this.nls.date);d.displayName=d.alias+" ("+h+")";return d}));if(0<a.length){var b=new k({data:a});this.fieldsSelect.set("store",b);this.fieldsSelect.set("value",a[0].id)}this.fieldsSelect.focusNode.focus();this.fieldsSelect.focusNode.blur();this._onFieldsSelectChange();this.part&&this._showPart(this.part)},
_showPart:function(a){if((this.part=a)&&this.part.fieldObj&&this.part.operator&&this.part.valueObj){a=this.part.fieldObj.name;var b=this.part.operator;this.part.caseSensitive=!!this.part.caseSensitive;a=this.fieldsSelect.store.query({name:a});if(0!==a.length&&(a=a[0]))this.fieldsSelect.set("value",a.id),setTimeout(c.hitch(this,function(){this.domNode&&(this._onFieldsSelectChange(),this.operatorsSelect.set("value",b),setTimeout(c.hitch(this,function(){this.domNode&&this._resetByFieldAndOperation(this.part)}),
50),setTimeout(c.hitch(this,function(){if(this.domNode){var a=this.part.interactiveObj;a&&(this.cbxAskValues.check(),this._updatePrompt(),this.promptTB.set("value",a.prompt||""),this.hintTB.set("value",a.hint||""),"unique"===this.part.valueObj.type&&a.cascade?this.cbxCascade.check():this.cbxCascade.uncheck())}}),100))}),0)}},_onFieldsSelectChange:function(){this._updateFieldsSelectTitle();this.operatorsSelect.removeOption(this.operatorsSelect.getOptions());this.operatorsSelect.addOption({value:"none",
label:this.nls.none});this.valueRadio.checked=!0;var a=this._getSelectedFilteringItem(this.fieldsSelect);a&&(this.operatorsSelect.shortType=a.shortType,a=this._getOperatorsByShortType(a.shortType),this.operatorsSelect.removeOption(this.operatorsSelect.getOptions()),e.forEach(a,c.hitch(this,function(a){this.operatorsSelect.addOption({value:a,label:this.nls[a]})})));this._onOperatorsSelectChange()},_onOperatorsSelectChange:function(){this._updateOperatorsSelectTitle();this.valueRadio.checked=!0;this._resetByFieldAndOperation()},
_onRangeNumberBlur:function(){if(this.numberTextBox1.validate()&&this.numberTextBox2.validate()){var a=this._getValueForNumberTextBox(this.numberTextBox1),b=this._getValueForNumberTextBox(this.numberTextBox2);d.isValidNumber(a)&&d.isValidNumber(b)&&a>b&&(this._setValueForNumberTextBox(this.numberTextBox1,b),this._setValueForNumberTextBox(this.numberTextBox2,a))}},_onRangeDateBlur:function(){if(this.dateTextBox1.validate()&&this.dateTextBox2.validate()){var a=this.dateTextBox1.get("value"),b=a.getTime(),
c=this.dateTextBox2.get("value"),d=c.getTime();b>d&&(this.dateTextBox1.set("value",c),this.dateTextBox2.set("value",a))}},_initRadios:function(){var a="radio_"+d.getRandomString();this.valueRadio.name=a;this.fieldRadio.name=a;d.combineRadioCheckBoxWithLabel(this.valueRadio,this.valueLabel);d.combineRadioCheckBoxWithLabel(this.fieldRadio,this.fieldLabel);this.own(b(this.valueRadio,"click",c.hitch(this,function(){this._resetByFieldAndOperation()})));this.own(b(this.fieldRadio,"click",c.hitch(this,function(){this._resetByFieldAndOperation()})));
this.uniqueRadio&&(this.uniqueRadio.name=a,d.combineRadioCheckBoxWithLabel(this.uniqueRadio,this.uniqueLabel),this.own(b(this.uniqueRadio,"click",c.hitch(this,function(){this._resetByFieldAndOperation()}))));this._resetByFieldAndOperation()},_updateValueTypeClass:function(){f.removeClass(this.domNode,"value-type");f.removeClass(this.domNode,"field-type");f.removeClass(this.domNode,"unique-type");this.valueRadio.checked?(f.addClass(this.domNode,"value-type"),this.cbxCascade.uncheck()):this.fieldRadio.checked?
(f.addClass(this.domNode,"field-type"),this.cbxCascade.uncheck()):(f.addClass(this.domNode,"unique-type"),this.cbxCascade.check())},_enableRadios:function(){this.valueRadio.disabled=!1;this.fieldRadio.disabled=!1;this.uniqueRadio&&(this.uniqueRadio.disabled=!1)},_disableRadios:function(){this.valueRadio.disabled=!0;this.fieldRadio.disabled=!0;this.uniqueRadio&&(this.uniqueRadio.disabled=!0)},_resetByFieldAndOperation:function(a){var b=a&&a.valueObj;f.setStyle(this.attributeValueContainer,"display",
"block");this._enableRadios();this._hideCaseSensitive();b&&("value"===b.type?this.valueRadio.checked=!0:"field"===b.type?this.fieldRadio.checked=!0:"unique"===b.type&&this.uniqueRadio&&(this.uniqueRadio.checked=!0));var c=this._getSelectedFilteringItem(this.fieldsSelect),d=c&&c.shortType,e=this.operatorsSelect.get("value");if(c)if("string"===d)switch(e){case this.OPERATORS.stringOperatorStartsWith:case this.OPERATORS.stringOperatorEndsWith:case this.OPERATORS.stringOperatorContains:case this.OPERATORS.stringOperatorDoesNotContain:this.valueRadio.checked=
!0,this._disableRadios(),this._showCaseSensitive(),a&&this.cbxCaseSensitive.setValue(a.caseSensitive)}else if("number"===d)switch(e){case this.OPERATORS.numberOperatorIsBetween:case this.OPERATORS.numberOperatorIsNotBetween:this.valueRadio.checked=!0,this._disableRadios()}else if("date"===d){switch(e){case this.OPERATORS.dateOperatorIsBetween:case this.OPERATORS.dateOperatorIsNotBetween:this.valueRadio.checked=!0,this._disableRadios()}this.uniqueRadio&&(this.uniqueRadio.disabled=!0,this.uniqueRadio.checked&&
(this.valueRadio.checked=!0))}this._updateUIOfAttrValueContainer(c,e,b);this._updateValueTypeClass()},_updateUIOfAttrValueContainer:function(a,b,g){this._updatePrompt();var p=a&&a.shortType;if("string"===p||"number"===p||"date"===p)if(f.setStyle(this.attributeValueContainer,"display","block"),this.valueRadio.checked)if(f.setStyle(this.fieldsSelect2.domNode,"display","none"),f.setStyle(this.uniqueValuesSelect.domNode,"display","none"),this._showAllValueBoxContainer(),this._resetValueTextBox(),"string"===
p)f.setStyle(this.stringTextBoxContainer,"display","block"),f.setStyle(this.numberTextBoxContainer,"display","none"),f.setStyle(this.dateTextBoxContainer,"display","none"),this._isFieldCoded(a)&&b===this.OPERATORS.stringOperatorIs?(f.setStyle(this.stringCodedValuesFS.domNode,"display","inline-block"),f.setStyle(this.stringTextBox.domNode,"display","none"),a=e.map(a.domain.codedValues,c.hitch(this,function(a,b){var d=c.mixin({},a);d.id=b;return d})),p=new k({data:a}),this.stringCodedValuesFS.set("store",
p),g?(p=e.filter(a,c.hitch(this,function(a){return a.code===g.value})),0<p.length?this.stringCodedValuesFS.set("value",p[0].id):this.stringCodedValuesFS.set("value",a[0].id)):this.stringCodedValuesFS.set("value",a[0].id)):(f.setStyle(this.stringTextBox.domNode,"display","inline-block"),f.setStyle(this.stringCodedValuesFS.domNode,"display","none"),g&&this._setValueForStringTextBox(this.stringTextBox,g.value)),(b===this.OPERATORS.stringOperatorIsBlank||b===this.OPERATORS.stringOperatorIsNotBlank)&&
f.setStyle(this.attributeValueContainer,"display","none");else if("number"===p){f.setStyle(this.stringTextBoxContainer,"display","none");f.setStyle(this.numberTextBoxContainer,"display","block");f.setStyle(this.dateTextBoxContainer,"display","none");if(b===this.OPERATORS.numberOperatorIsBetween||b===this.OPERATORS.numberOperatorIsNotBetween){if(f.setStyle(this.numberTextBox.domNode,"display","none"),f.setStyle(this.numberRangeTable,"display","table"),f.setStyle(this.numberCodedValuesFS.domNode,"display",
"none"),g){var m;a=d.isValidNumber(g.value1);p=d.isValidNumber(g.value2);a&&p?(p=parseFloat(g.value1),m=parseFloat(g.value2),a=Math.min(p,m),p=Math.max(p,m),this.numberTextBox1.set("value",a),this.numberTextBox2.set("value",p)):a&&!p?(p=parseFloat(g.value1),this.numberTextBox1.set("value",p)):!a&&p&&(m=parseFloat(g.value2),this.numberTextBox2.set("value",m))}}else if(f.setStyle(this.numberRangeTable,"display","none"),this._isFieldCoded(a)&&b===this.OPERATORS.numberOperatorIs)if(f.setStyle(this.numberTextBox.domNode,
"display","none"),f.setStyle(this.numberCodedValuesFS.domNode,"display","inline-block"),a=e.map(a.domain.codedValues,c.hitch(this,function(a,b){var d=c.mixin({},a);d.id=b;return d})),p=new k({data:a}),this.numberCodedValuesFS.set("store",p),g&&!isNaN(g.value)){var h=parseFloat(g.value),p=e.filter(a,c.hitch(this,function(a){return parseFloat(a.code)===h}));0<p.length?this.numberCodedValuesFS.set("value",p[0].id):this.numberCodedValuesFS.set("value",a[0].id)}else this.numberCodedValuesFS.set("value",
a[0].id);else f.setStyle(this.numberTextBox.domNode,"display","inline-block"),f.setStyle(this.numberCodedValuesFS.domNode,"display","none"),g&&this._setValueForNumberTextBox(this.numberTextBox,g.value);(b===this.OPERATORS.numberOperatorIsBlank||b===this.OPERATORS.numberOperatorIsNotBlank)&&f.setStyle(this.attributeValueContainer,"display","none")}else"date"===p&&(f.setStyle(this.stringTextBoxContainer,"display","none"),f.setStyle(this.numberTextBoxContainer,"display","none"),f.setStyle(this.dateTextBoxContainer,
"display","block"),b===this.OPERATORS.dateOperatorIsBetween||b===this.OPERATORS.dateOperatorIsNotBetween?(f.setStyle(this.dateTextBox.domNode,"display","none"),f.setStyle(this.dateRangeTable,"display","table"),g&&(g.value1&&g.value2)&&(this.dateTextBox1.set("value",new Date(g.value1)),this.dateTextBox2.set("value",new Date(g.value2)))):(f.setStyle(this.dateTextBox.domNode,"display","inline-block"),f.setStyle(this.dateRangeTable,"display","none"),g&&g.value&&this.dateTextBox.set("value",new Date(g.value))),
(b===this.OPERATORS.dateOperatorIsBlank||b===this.OPERATORS.dateOperatorIsNotBlank)&&f.setStyle(this.attributeValueContainer,"display","none"));else this.fieldRadio.checked?(this._hideAllValueBoxContainer(),f.setStyle(this.uniqueValuesSelect.domNode,"display","none"),f.setStyle(this.fieldsSelect2.domNode,"display","inline-block"),this._resetFieldsSelect2(),g&&g.value&&(b=this.fieldsSelect2.store.query({name:g.value}),0<b.length&&(b=b[0])&&this.fieldsSelect2.set("value",b.id))):this.uniqueRadio&&this.uniqueRadio.checked&&
(this._hideAllValueBoxContainer(),f.setStyle(this.fieldsSelect2.domNode,"display","none"),f.setStyle(this.uniqueValuesSelect.domNode,"display","inline-block"),this._resetUniqueValuesSelect(g));else f.setStyle(this.attributeValueContainer,"display","none")},_showAllValueBoxContainer:function(){f.setStyle(this.allValueBoxContainer,"display","block")},_hideAllValueBoxContainer:function(){f.setStyle(this.allValueBoxContainer,"display","none")},_resetValueTextBox:function(){this.stringTextBox.set("value",
"");this.numberTextBox.set("value","");this.dateTextBox.set("value",new Date)},_resetFieldsSelect2:function(){this.fieldsSelect2.set("displayedValue","");var a=new k({data:[]});this.fieldsSelect2.set("store",a);if(this.fieldsSelect.validate()){var b=this._getSelectedFilteringItem(this.fieldsSelect);if(b){var a=this.fieldsSelect.store.query({shortType:b.shortType}),d=e.filter(a,c.hitch(this,function(a){return a.id!==b.id})),a=new k({data:d});this.fieldsSelect2.set("store",a);0<d.length&&this.fieldsSelect2.set("value",
d[0].id)}}},_tryLocaleNumber:function(a){var b=d.localizeNumber(a);if(null===b||void 0===b)b=a;return b},_resetUniqueValuesSelect:function(a){this.uniqueValuesSelect.reset();this.uniqueValuesSelect.store.setData([]);if(this.layerInfo&&10.1<=parseFloat(this.layerInfo.currentVersion)){var b=this._getSelectedFilteringItem(this.fieldsSelect);b&&d.getUniqueValues(this.url,b.name,null).then(c.hitch(this,function(d){if(this.domNode){var f=this._getSelectedFilteringItem(this.fieldsSelect);if(d&&f&&b.id===
f.id){this.uniqueValuesSelect.store.setData([]);var g=-1,h=this._hasCodedValues(f);d=e.map(d,c.hitch(this,function(b,c){var d=b;"number"===f.shortType&&(b=parseFloat(b),d=this._tryLocaleNumber(b));h&&(d=this._getDisplayNameOfCodedValues(b,f));d={id:c,value:b,label:d};a&&a.value===b&&(g=d.id);return d}));this.uniqueValuesSelect.store.setData(d);0<d.length&&0<=g&&(d=this.uniqueValuesSelect.store.get(g))&&this.uniqueValuesSelect.set("item",d)}}}),c.hitch(this,function(a){console.error(a)}))}},_hasCodedValues:function(a){var b=
!1;a.domain&&(a=a.domain.codedValues)&&0<a.length&&(b=!0);return b},_getDisplayNameOfCodedValues:function(a,b){var c=a;e.some(b.domain.codedValues,function(b){return b.code===a?(c=b.name,!0):!1});return c},_onCbxAskValuesClicked:function(){this._updateRequiredProperty();this._updatePrompt()},_onCbxAskValuesStatusChanged:function(){this._updateRequiredProperty()},_isUseAskForValues:function(){return this.cbxAskValues.status&&this.cbxAskValues.checked},_isValueRequired:function(){return!this._isUseAskForValues()},
_updateRequiredProperty:function(){var a=this._isValueRequired();this.stringTextBox.set("required",a);this.stringCodedValuesFS.set("required",a);this.numberTextBox.set("required",a);this.numberTextBox1.set("required",a);this.numberTextBox2.set("required",a);this.numberCodedValuesFS.set("required",a);this.uniqueValuesSelect.set("required",a)},_updatePrompt:function(){this.promptTB.set("value","");this.hintTB.set("value","");this.cbxAskValues.setStatus(!0);f.setStyle(this.promptTable,"display","table");
var a=this.operatorsSelect.get("value"),b=this.nls[a];this.fieldRadio.checked&&this.cbxAskValues.setStatus(!1);a===this.OPERATORS.stringOperatorIsBlank&&this.cbxAskValues.setStatus(!1);a===this.OPERATORS.stringOperatorIsNotBlank&&this.cbxAskValues.setStatus(!1);a===this.OPERATORS.numberOperatorIsBlank&&this.cbxAskValues.setStatus(!1);a===this.OPERATORS.numberOperatorIsNotBlank&&this.cbxAskValues.setStatus(!1);a===this.OPERATORS.dateOperatorIsBlank&&this.cbxAskValues.setStatus(!1);a===this.OPERATORS.dateOperatorIsNotBlank&&
this.cbxAskValues.setStatus(!1);if(this.cbxAskValues.status&&this.cbxAskValues.checked){f.setStyle(this.promptTable,"display","table");var c=this._getSelectedFilteringItem(this.fieldsSelect);c&&"none"!==a&&this.promptTB.set("value",(c.alias||c.name)+" "+b)}else f.setStyle(this.promptTable,"display","none")},_destroySelf:function(){this.destroy()}})})},"dijit/form/FilteringSelect":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/when","./MappedTextBox","./ComboBoxMixin"],function(l,
n,s,q,g){return l("dijit.form.FilteringSelect",[q,g],{required:!0,_lastDisplayedValue:"",_isValidSubset:function(){return this._opened},isValid:function(){return!!this.item||!this.required&&""==this.get("displayedValue")},_refreshState:function(){this.searchTimer||this.inherited(arguments)},_callbackSetLabel:function(c,f,e,b){f&&f[this.searchAttr]!==this._lastQuery||!f&&c.length&&this.store.getIdentity(c[0])!=this._lastQuery||(c.length?this.set("item",c[0],b):this.set("value","",b||void 0===b&&!this.focused,
this.textbox.value,null))},_openResultList:function(c,f,e){f[this.searchAttr]===this._lastQuery&&(this.inherited(arguments),void 0===this.item&&this.validate(!0))},_getValueAttr:function(){return this.valueNode.value},_getValueField:function(){return"value"},_setValueAttr:function(c,f,e,b){this._onChangeActive||(f=null);if(void 0===b){if(null===c||""===c)if(c="",!n.isString(e)){this._setDisplayedValueAttr(e||"",f);return}var g=this;this._lastQuery=c;s(this.store.get(c),function(b){g._callbackSetLabel(b?
[b]:[],void 0,void 0,f)})}else this.valueNode.value=c,this.inherited(arguments,[c,f,e,b])},_setItemAttr:function(c,f,e){this.inherited(arguments);this._lastDisplayedValue=this.textbox.value},_getDisplayQueryString:function(c){return c.replace(/([\\\*\?])/g,"\\$1")},_setDisplayedValueAttr:function(c,f){null==c&&(c="");if(!this._created){if(!("displayedValue"in this.params))return;f=!1}if(this.store){this.closeDropDown();var e=n.clone(this.query),b=this._getDisplayQueryString(c),g;this.store._oldAPI?
g=b:(g=this._patternToRegExp(b),g.toString=function(){return b});this._lastQuery=e[this.searchAttr]=g;this._lastDisplayedValue=this.textbox.value=c;this._set("displayedValue",c);var d=this,a={queryOptions:{ignoreCase:this.ignoreCase,deep:!0}};n.mixin(a,this.fetchProperties);this._fetchHandle=this.store.query(e,a);s(this._fetchHandle,function(b){d._fetchHandle=null;d._callbackSetLabel(b||[],e,a,f)},function(a){d._fetchHandle=null;d._cancelingQuery||console.error("dijit.form.FilteringSelect: "+a.toString())})}},
undo:function(){this.set("displayedValue",this._lastDisplayedValue)}})})},"dijit/form/DateTextBox":function(){define(["dojo/_base/declare","../Calendar","./_DateTimeTextBox"],function(l,n,s){return l("dijit.form.DateTextBox",s,{baseClass:"dijitTextBox dijitComboBox dijitDateTextBox",popupClass:n,_selector:"date",maxHeight:Infinity,value:new Date("")})})},"dijit/Calendar":function(){define("dojo/_base/array dojo/date dojo/date/locale dojo/_base/declare dojo/dom-attr dojo/dom-class dojo/dom-construct dojo/_base/kernel dojo/keys dojo/_base/lang dojo/on dojo/sniff ./CalendarLite ./_Widget ./_CssStateMixin ./_TemplatedMixin ./form/DropDownButton".split(" "),
function(l,n,s,q,g,c,f,e,b,k,d,a,t,r,p,m,h){var u=q("dijit.Calendar",[t,r,p],{baseClass:"dijitCalendar",cssStateNodes:{decrementMonth:"dijitCalendarArrow",incrementMonth:"dijitCalendarArrow",previousYearLabelNode:"dijitCalendarPreviousYear",nextYearLabelNode:"dijitCalendarNextYear"},setValue:function(a){e.deprecated("dijit.Calendar:setValue() is deprecated.  Use set('value', ...) instead.","","2.0");this.set("value",a)},_createMonthWidget:function(){return new u._MonthDropDownButton({id:this.id+"_mddb",
tabIndex:-1,onMonthSelect:k.hitch(this,"_onMonthSelect"),lang:this.lang,dateLocaleModule:this.dateLocaleModule},this.monthNode)},postCreate:function(){this.inherited(arguments);this.own(d(this.domNode,"keydown",k.hitch(this,"_onKeyDown")),d(this.dateRowsNode,"mouseover",k.hitch(this,"_onDayMouseOver")),d(this.dateRowsNode,"mouseout",k.hitch(this,"_onDayMouseOut")),d(this.dateRowsNode,"mousedown",k.hitch(this,"_onDayMouseDown")),d(this.dateRowsNode,"mouseup",k.hitch(this,"_onDayMouseUp")))},_onMonthSelect:function(a){var b=
new this.dateClassObj(this.currentFocus);b.setDate(1);b.setMonth(a);a=this.dateModule.getDaysInMonth(b);var c=this.currentFocus.getDate();b.setDate(Math.min(c,a));this._setCurrentFocusAttr(b)},_onDayMouseOver:function(a){if((a=c.contains(a.target,"dijitCalendarDateLabel")?a.target.parentNode:a.target)&&(a.dijitDateValue&&!c.contains(a,"dijitCalendarDisabledDate")||a==this.previousYearLabelNode||a==this.nextYearLabelNode))c.add(a,"dijitCalendarHoveredDate"),this._currentNode=a},_onDayMouseOut:function(a){this._currentNode&&
!(a.relatedTarget&&a.relatedTarget.parentNode==this._currentNode)&&(a="dijitCalendarHoveredDate",c.contains(this._currentNode,"dijitCalendarActiveDate")&&(a+=" dijitCalendarActiveDate"),c.remove(this._currentNode,a),this._currentNode=null)},_onDayMouseDown:function(a){if((a=a.target.parentNode)&&a.dijitDateValue&&!c.contains(a,"dijitCalendarDisabledDate"))c.add(a,"dijitCalendarActiveDate"),this._currentNode=a},_onDayMouseUp:function(a){(a=a.target.parentNode)&&a.dijitDateValue&&c.remove(a,"dijitCalendarActiveDate")},
handleKey:function(a){var c=-1,d,h=this.currentFocus;switch(a.keyCode){case b.RIGHT_ARROW:c=1;case b.LEFT_ARROW:d="day";this.isLeftToRight()||(c*=-1);break;case b.DOWN_ARROW:c=1;case b.UP_ARROW:d="week";break;case b.PAGE_DOWN:c=1;case b.PAGE_UP:d=a.ctrlKey||a.altKey?"year":"month";break;case b.END:h=this.dateModule.add(h,"month",1),d="day";case b.HOME:h=new this.dateClassObj(h);h.setDate(1);break;default:return!0}d&&(h=this.dateModule.add(h,d,c));this._setCurrentFocusAttr(h);return!1},_onKeyDown:function(a){this.handleKey(a)||
(a.stopPropagation(),a.preventDefault())},onValueSelected:function(){},onChange:function(a){this.onValueSelected(a)},getClassForDate:function(){}});u._MonthDropDownButton=q("dijit.Calendar._MonthDropDownButton",h,{onMonthSelect:function(){},postCreate:function(){this.inherited(arguments);this.dropDown=new u._MonthDropDown({id:this.id+"_mdd",onChange:this.onMonthSelect})},_setMonthAttr:function(b){var c=this.dateLocaleModule.getNames("months","wide","standAlone",this.lang,b);this.dropDown.set("months",
c);this.containerNode.innerHTML=(6==a("ie")?"":"\x3cdiv class\x3d'dijitSpacer'\x3e"+this.dropDown.domNode.innerHTML+"\x3c/div\x3e")+"\x3cdiv class\x3d'dijitCalendarMonthLabel dijitCalendarCurrentMonthLabel'\x3e"+c[b.getMonth()]+"\x3c/div\x3e"}});u._MonthDropDown=q("dijit.Calendar._MonthDropDown",[r,m,p],{months:[],baseClass:"dijitCalendarMonthMenu dijitMenu",templateString:"\x3cdiv data-dojo-attach-event\x3d'ondijitclick:_onClick'\x3e\x3c/div\x3e",_setMonthsAttr:function(a){this.domNode.innerHTML=
"";l.forEach(a,function(a,b){f.create("div",{className:"dijitCalendarMonthLabel",month:b,innerHTML:a},this.domNode)._cssState="dijitCalendarMonthLabel"},this)},_onClick:function(a){this.onChange(g.get(a.target,"month"))},onChange:function(){}});return u})},"dijit/CalendarLite":function(){define("dojo/_base/array dojo/_base/declare dojo/cldr/supplemental dojo/date dojo/date/locale dojo/date/stamp dojo/dom dojo/dom-class dojo/_base/lang dojo/on dojo/sniff dojo/string ./_WidgetBase ./_TemplatedMixin dojo/text!./templates/Calendar.html ./a11yclick ./hccss".split(" "),
function(l,n,s,q,g,c,f,e,b,k,d,a,t,r,p){var m=n("dijit.CalendarLite",[t,r],{templateString:p,dowTemplateString:'\x3cth class\x3d"dijitReset dijitCalendarDayLabelTemplate" role\x3d"columnheader" scope\x3d"col"\x3e\x3cspan class\x3d"dijitCalendarDayLabel"\x3e${d}\x3c/span\x3e\x3c/th\x3e',dateTemplateString:'\x3ctd class\x3d"dijitReset" role\x3d"gridcell" data-dojo-attach-point\x3d"dateCells"\x3e\x3cspan class\x3d"dijitCalendarDateLabel" data-dojo-attach-point\x3d"dateLabels"\x3e\x3c/span\x3e\x3c/td\x3e',
weekTemplateString:'\x3ctr class\x3d"dijitReset dijitCalendarWeekTemplate" role\x3d"row"\x3e${d}${d}${d}${d}${d}${d}${d}\x3c/tr\x3e',value:new Date(""),datePackage:"",dayWidth:"narrow",tabIndex:"0",dayOffset:-1,currentFocus:new Date,_setSummaryAttr:"gridNode",baseClass:"dijitCalendar dijitCalendarLite",_isValidDate:function(a){return a&&!isNaN(a)&&"object"==typeof a&&a.toString()!=this.constructor.prototype.value.toString()},_getValueAttr:function(){var a=this._get("value");if(a&&!isNaN(a)){var b=
new this.dateClassObj(a);b.setHours(0,0,0,0);b.getDate()<a.getDate()&&(b=this.dateModule.add(b,"hour",1));return b}return null},_setValueAttr:function(a,b){"string"==typeof a&&(a=c.fromISOString(a));a=this._patchDate(a);if(this._isValidDate(a)&&!this.isDisabledDate(a,this.lang)){if(this._set("value",a),this.set("currentFocus",a),this._markSelectedDates([a]),this._created&&(b||"undefined"==typeof b))this.onChange(this.get("value"))}else this._set("value",null),this._markSelectedDates([])},_patchDate:function(a){a&&
(a=new this.dateClassObj(a),a.setHours(1,0,0,0));return a},_setText:function(a,b){for(;a.firstChild;)a.removeChild(a.firstChild);a.appendChild(a.ownerDocument.createTextNode(b))},_populateGrid:function(){var a=new this.dateClassObj(this.currentFocus);a.setDate(1);var a=this._patchDate(a),b=a.getDay(),c=this.dateModule.getDaysInMonth(a),d=this.dateModule.getDaysInMonth(this.dateModule.add(a,"month",-1)),e=new this.dateClassObj,f=0<=this.dayOffset?this.dayOffset:s.getFirstDayOfWeek(this.lang);f>b&&
(f-=7);if(!this.summary){var g=this.dateLocaleModule.getNames("months","wide","standAlone",this.lang,a);this.gridNode.setAttribute("summary",g[a.getMonth()])}this._date2cell={};l.forEach(this.dateCells,function(g,p){var k=p+f,m=new this.dateClassObj(a),l="dijitCalendar",n=0;k<b?(k=d-b+k+1,n=-1,l+="Previous"):k>=b+c?(k=k-b-c+1,n=1,l+="Next"):(k=k-b+1,l+="Current");n&&(m=this.dateModule.add(m,"month",n));m.setDate(k);this.dateModule.compare(m,e,"date")||(l="dijitCalendarCurrentDate "+l);this.isDisabledDate(m,
this.lang)?(l="dijitCalendarDisabledDate "+l,g.setAttribute("aria-disabled","true")):(l="dijitCalendarEnabledDate "+l,g.removeAttribute("aria-disabled"),g.setAttribute("aria-selected","false"));(n=this.getClassForDate(m,this.lang))&&(l=n+" "+l);g.className=l+"Month dijitCalendarDateTemplate";l=m.valueOf();this._date2cell[l]=g;g.dijitDateValue=l;this._setText(this.dateLabels[p],m.getDateLocalized?m.getDateLocalized(this.lang):m.getDate())},this)},_populateControls:function(){var a=new this.dateClassObj(this.currentFocus);
a.setDate(1);this.monthWidget.set("month",a);var b=a.getFullYear()-1,c=new this.dateClassObj;l.forEach(["previous","current","next"],function(a){c.setFullYear(b++);this._setText(this[a+"YearLabelNode"],this.dateLocaleModule.format(c,{selector:"year",locale:this.lang}))},this)},goToToday:function(){this.set("value",new this.dateClassObj)},constructor:function(a){this.dateModule=a.datePackage?b.getObject(a.datePackage,!1):q;this.dateClassObj=this.dateModule.Date||Date;this.dateLocaleModule=a.datePackage?
b.getObject(a.datePackage+".locale",!1):g},_createMonthWidget:function(){return m._MonthWidget({id:this.id+"_mddb",lang:this.lang,dateLocaleModule:this.dateLocaleModule},this.monthNode)},buildRendering:function(){var b=this.dowTemplateString,c=this.dateLocaleModule.getNames("days",this.dayWidth,"standAlone",this.lang),d=0<=this.dayOffset?this.dayOffset:s.getFirstDayOfWeek(this.lang);this.dayCellsHtml=a.substitute([b,b,b,b,b,b,b].join(""),{d:""},function(){return c[d++%7]});b=a.substitute(this.weekTemplateString,
{d:this.dateTemplateString});this.dateRowsHtml=[b,b,b,b,b,b].join("");this.dateCells=[];this.dateLabels=[];this.inherited(arguments);f.setSelectable(this.domNode,!1);b=new this.dateClassObj(this.currentFocus);this.monthWidget=this._createMonthWidget();this.set("currentFocus",b,!1)},postCreate:function(){this.inherited(arguments);this._connectControls()},_connectControls:function(){var a=b.hitch(this,function(a,c,d){this[a].dojoClick=!0;return k(this[a],"click",b.hitch(this,function(){this._setCurrentFocusAttr(this.dateModule.add(this.currentFocus,
c,d))}))});this.own(a("incrementMonth","month",1),a("decrementMonth","month",-1),a("nextYearLabelNode","year",1),a("previousYearLabelNode","year",-1))},_setCurrentFocusAttr:function(a,b){var c=this.currentFocus,e=this._getNodeByDate(c);a=this._patchDate(a);this._set("currentFocus",a);if(!this._date2cell||0!=this.dateModule.difference(c,a,"month"))this._populateGrid(),this._populateControls(),this._markSelectedDates([this.value]);c=this._getNodeByDate(a);c.setAttribute("tabIndex",this.tabIndex);(this.focused||
b)&&c.focus();e&&e!=c&&(d("webkit")?e.setAttribute("tabIndex","-1"):e.removeAttribute("tabIndex"))},focus:function(){this._setCurrentFocusAttr(this.currentFocus,!0)},_onDayClick:function(a){a.stopPropagation();a.preventDefault();for(a=a.target;a&&!a.dijitDateValue;a=a.parentNode);a&&!e.contains(a,"dijitCalendarDisabledDate")&&this.set("value",a.dijitDateValue)},_getNodeByDate:function(a){return(a=this._patchDate(a))&&this._date2cell?this._date2cell[a.valueOf()]:null},_markSelectedDates:function(a){function c(a,
b){e.toggle(b,"dijitCalendarSelectedDate",a);b.setAttribute("aria-selected",a?"true":"false")}l.forEach(this._selectedCells||[],b.partial(c,!1));this._selectedCells=l.filter(l.map(a,this._getNodeByDate,this),function(a){return a});l.forEach(this._selectedCells,b.partial(c,!0))},onChange:function(){},isDisabledDate:function(){},getClassForDate:function(){}});m._MonthWidget=n("dijit.CalendarLite._MonthWidget",t,{_setMonthAttr:function(a){var b=this.dateLocaleModule.getNames("months","wide","standAlone",
this.lang,a),c=6==d("ie")?"":"\x3cdiv class\x3d'dijitSpacer'\x3e"+l.map(b,function(a){return"\x3cdiv\x3e"+a+"\x3c/div\x3e"}).join("")+"\x3c/div\x3e";this.domNode.innerHTML=c+"\x3cdiv class\x3d'dijitCalendarMonthLabel dijitCalendarCurrentMonthLabel'\x3e"+b[a.getMonth()]+"\x3c/div\x3e"}});return m})},"dijit/form/_DateTimeTextBox":function(){define("dojo/date dojo/date/locale dojo/date/stamp dojo/_base/declare dojo/_base/lang ./RangeBoundTextBox ../_HasDropDown dojo/text!./templates/DropDownBox.html".split(" "),
function(l,n,s,q,g,c,f,e){new Date("X");return q("dijit.form._DateTimeTextBox",[c,f],{templateString:e,hasDownArrow:!0,cssStateNodes:{_buttonNode:"dijitDownArrowButton"},_unboundedConstraints:{},pattern:n.regexp,datePackage:"",postMixInProperties:function(){this.inherited(arguments);this._set("type","text")},compare:function(b,c){var d=this._isInvalidDate(b),a=this._isInvalidDate(c);if(d||a)return d&&a?0:!d?1:-1;var d=this.format(b,this._unboundedConstraints),a=this.format(c,this._unboundedConstraints),
e=this.parse(d,this._unboundedConstraints),f=this.parse(a,this._unboundedConstraints);return d==a?0:l.compare(e,f,this._selector)},autoWidth:!0,format:function(b,c){return!b?"":this.dateLocaleModule.format(b,c)},parse:function(b,c){return this.dateLocaleModule.parse(b,c)||(this._isEmpty(b)?null:void 0)},serialize:function(b,c){b.toGregorian&&(b=b.toGregorian());return s.toISOString(b,c)},dropDownDefaultValue:new Date,value:new Date(""),_blankValue:null,popupClass:"",_selector:"",constructor:function(b){b=
b||{};this.dateModule=b.datePackage?g.getObject(b.datePackage,!1):l;this.dateClassObj=this.dateModule.Date||Date;this.dateClassObj instanceof Date||(this.value=new this.dateClassObj(this.value));this.dateLocaleModule=b.datePackage?g.getObject(b.datePackage+".locale",!1):n;this._set("pattern",this.dateLocaleModule.regexp);this._invalidDate=this.constructor.prototype.value.toString()},buildRendering:function(){this.inherited(arguments);this.hasDownArrow||(this._buttonNode.style.display="none");this.hasDownArrow||
(this._buttonNode=this.domNode,this.baseClass+=" dijitComboBoxOpenOnClick")},_setConstraintsAttr:function(b){b.selector=this._selector;b.fullYear=!0;var c=s.fromISOString;"string"==typeof b.min&&(b.min=c(b.min),this.dateClassObj instanceof Date||(b.min=new this.dateClassObj(b.min)));"string"==typeof b.max&&(b.max=c(b.max),this.dateClassObj instanceof Date||(b.max=new this.dateClassObj(b.max)));this.inherited(arguments);this._unboundedConstraints=g.mixin({},this.constraints,{min:null,max:null})},_isInvalidDate:function(b){return!b||
isNaN(b)||"object"!=typeof b||b.toString()==this._invalidDate},_setValueAttr:function(b,c,d){void 0!==b&&("string"==typeof b&&(b=s.fromISOString(b)),this._isInvalidDate(b)&&(b=null),b instanceof Date&&!(this.dateClassObj instanceof Date)&&(b=new this.dateClassObj(b)));this.inherited(arguments,[b,c,d]);this.value instanceof Date&&(this.filterString="");!1!==c&&this.dropDown&&this.dropDown.set("value",b,!1)},_set:function(b,c){if("value"==b){c instanceof Date&&!(this.dateClassObj instanceof Date)&&
(c=new this.dateClassObj(c));var d=this._get("value");if(d instanceof this.dateClassObj&&0==this.compare(c,d))return}this.inherited(arguments)},_setDropDownDefaultValueAttr:function(b){this._isInvalidDate(b)&&(b=new this.dateClassObj);this._set("dropDownDefaultValue",b)},openDropDown:function(b){this.dropDown&&this.dropDown.destroy();var c=g.isString(this.popupClass)?g.getObject(this.popupClass,!1):this.popupClass,d=this,a=this.get("value");this.dropDown=new c({onChange:function(a){d.set("value",
a,!0)},id:this.id+"_popup",dir:d.dir,lang:d.lang,value:a,textDir:d.textDir,currentFocus:!this._isInvalidDate(a)?a:this.dropDownDefaultValue,constraints:d.constraints,filterString:d.filterString,datePackage:d.datePackage,isDisabledDate:function(a){return!d.rangeCheck(a,d.constraints)}});this.inherited(arguments)},_getDisplayedValueAttr:function(){return this.textbox.value},_setDisplayedValueAttr:function(b,c){this._setValueAttr(this.parse(b,this.constraints),c,b)}})})},"jimu/dijit/_FilterSet":function(){define("dojo/_base/declare dijit/_WidgetBase dijit/_TemplatedMixin dijit/_WidgetsInTemplateMixin dojo/text!./templates/_FilterSet.html dijit/registry dojo/_base/lang dojo/_base/html dojo/_base/array dojo/on dojo/aspect dojo/query ./_SingleFilter".split(" "),
function(l,n,s,q,g,c,f,e,b,k,d,a,t){return l([n,s,q],{templateString:g,baseClass:"jimu-filter-set",nls:null,url:null,layerInfo:null,stringFieldType:"",dateFieldType:"",numberFieldTypes:[],partsObj:null,OPERATORS:null,enableAskForValues:!1,isHosted:!1,postMixInProperties:function(){this.nls=window.jimuNls.filterBuilder;var a=this.nls.matchMsgSet.split("${any_or_all}");this.nls.strMatchMsgPart1=a[0]||"";this.nls.strMatchMsgPart2=a[1]||"";this.inherited(arguments)},postCreate:function(){this.inherited(arguments);
this._initSelf()},toJson:function(){var d=a(".jimu-single-filter",this.allExpsBox),d=b.map(d,f.hitch(this,function(a){return c.byNode(a).toJson()}));return b.every(d,f.hitch(this,function(a){return!!a}))&&0<d.length?{logicalOperator:this.allAnySelect.value,parts:d}:null},showDelteIcon:function(){e.setStyle(this.btnDelete,"display","block")},hideDeleteIcon:function(){e.setStyle(this.btnDelete,"display","none")},_initSelf:function(){this.own(k(this.btnAdd,"click",f.hitch(this,this._addSingleFilter)));
if(this.partsObj){this.allAnySelect.value=this.partsObj.logicalOperator;var a=this.partsObj.parts||[];0===a.length?(this._addSingleFilter(),this._addSingleFilter()):1===a.length?(this._addSingleFilter(a[0]),this._addSingleFilter()):b.forEach(a,f.hitch(this,function(a){this._addSingleFilter(a)}))}else this._addSingleFilter(),this._addSingleFilter()},_addSingleFilter:function(a){a=new t({url:this.url,layerInfo:this.layerInfo,stringFieldType:this.stringFieldType,dateFieldType:this.dateFieldType,numberFieldTypes:this.numberFieldTypes,
part:a,OPERATORS:this.OPERATORS,enableAskForValues:this.enableAskForValues,isHosted:this.isHosted,style:{margin:"15px auto 0 auto",border:0,background:"inherit"}});a.placeAt(this.allExpsBox);a.startup();this.own(d.after(a,"_destroySelf",f.hitch(this,this._checkFilterNumbers)));this._checkFilterNumbers()},_checkFilterNumbers:function(){var d=a(".jimu-single-filter",this.allExpsBox),e=2<d.length;b.forEach(d,f.hitch(this,function(a){a=c.byNode(a);e?a.showDelteIcon():a.hideDeleteIcon()}))},_destroySelf:function(){this.destroy()}})})},
"jimu/dijit/SymbolPicker":function(){define("dojo/_base/declare dijit/_WidgetBase dijit/_TemplatedMixin dojo/Evented dojo/_base/lang dojo/_base/html dojo/_base/array dojo/on dojo/query dijit/TooltipDialog dijit/popup dijit/registry jimu/dijit/SymbolChooser jimu/symbolUtils".split(" "),function(l,n,s,q,g,c,f,e,b,k,d,a,t,r){return l([n,s,q],{baseClass:"jimu-symbol-picker",declaredClass:"jimu.dijit.SymbolPicker",templateString:'\x3cdiv\x3e\x3cdiv data-dojo-attach-point\x3d"symbolNode" class\x3d"symbol-node jimu-float-leading"\x3e\x3c/div\x3e\x3cdiv class\x3d"separator jimu-float-leading"\x3e\x3c/div\x3e\x3cdiv class\x3d"jimu-icon jimu-icon-down-arrow-8 jimu-float-leading"\x3e\x3c/div\x3e\x3c/div\x3e',
tooltipDialog:null,_isTooltipDialogOpened:!1,symbol:null,type:null,postCreate:function(){this.inherited(arguments);this._createTooltipDialog();this._hideTooltipDialog();var a=this.symbolChooser.getSymbol();a&&this._drawSymbol(a)},destroy:function(){this._hideTooltipDialog();this.symbolChooser&&this.symbolChooser.destroy();this.symbolChooser=null;this.inherited(arguments)},_createTooltipDialog:function(){var a=c.create("div");this.tooltipDialog=new k({content:a});this.symbolChooser=new t({symbol:this.symbol,
type:this.type});this.symbolChooser.placeAt(a);this.symbolChooser.startup();this.own(e(this.symbolChooser,"change",g.hitch(this,function(a){this._drawSymbol(a);this.emit("change",a)})));this.own(e(this.domNode,"click",g.hitch(this,function(a){a.stopPropagation();a.preventDefault();this._isTooltipDialogOpened?this._hideTooltipDialog():this._showTooltipDialog()})));this.own(e(document.body,"click",g.hitch(this,function(a){var b=a.target||a.srcElement;a=this._getColorPickers();0<a.length&&f.some(a,function(a){return a.isPartOfPopup(b)})||
(a=this.tooltipDialog.domNode,b===a||c.isDescendant(b,a)||this._hideTooltipDialog())})));this.own(e(this.symbolChooser,"resize",g.hitch(this,function(){this._isTooltipDialogOpened&&(this._hideTooltipDialog(),this._showTooltipDialog())})))},_getColorPickers:function(){var c=b(".jimu-color-picker",this.symbolChooser.domNode);return f.map(c,g.hitch(this,function(b){return a.byNode(b)}))},reset:function(){this.symbol=this.type=null;c.empty(this.symbolNode);this.symbolChooser.reset()},showBySymbol:function(a){this.reset();
a&&(this._drawSymbol(a),this.symbolChooser.showBySymbol(a))},showByType:function(a){this.reset();this.symbolChooser.showByType(a);(a=this.symbolChooser.getSymbol())&&this._drawSymbol(a)},getSymbol:function(){return this.symbolChooser.getSymbol()},_drawSymbol:function(a){c.empty(this.symbolNode);a&&(a=r.createSymbolNode(a,{width:16,height:16}))&&c.place(a,this.symbolNode)},_showTooltipDialog:function(){this.tooltipDialog&&(d.open({parent:this.getParent(),popup:this.tooltipDialog,around:this.domNode}),
this._isTooltipDialogOpened=!0)},_hideTooltipDialog:function(){this.tooltipDialog&&(d.close(this.tooltipDialog),this._isTooltipDialogOpened=!1)}})})},"jimu/dijit/ImageChooser":function(){define("dojo/_base/declare dijit/_WidgetBase dijit/_TemplatedMixin dojo/_base/lang dojo/_base/html dojo/on dojo/text!./templates/ImageChooser.html dojo/sniff dojo/request esri/lang ../utils ./_CropImage jimu/dijit/Popup jimu/dijit/Message jimu/dijit/LoadingShelter".split(" "),function(l,n,s,q,g,c,f,e,b,k,d,a,t,r,
p){var m=0;l=l([n,s],{templateString:f,declaredClass:"jimu.dijit.ImageChooser",cropImage:!0,displayImg:null,defaultSelfSrc:null,showSelfImg:!1,label:null,showTip:!0,goldenWidth:400,goldenHeight:400,maxSize:1024,format:null,imageData:null,fileProperty:{},postMixInProperties:function(){this.inherited(arguments);this.nls=window.jimuNls.imageChooser;this.nls.common=window.jimuNls.common;this.nls.readError=this.nls.readError||"Failed to read the file."},postCreate:function(){this._initial();!d.file.supportHTML5()&&
(!e("safari")&&d.file.isEnabledFlash())&&d.file.loadFileAPI().then(q.hitch(this,function(){g.setStyle(this.mask,"zIndex",1)}))},setImageSize:function(a){this.goldenWidth=a.width;this.goldenHeight=a.height},disableChooseImage:function(){g.setStyle(this.fileForm,"display","none");this.label&&"string"===typeof this.label&&g.addClass(this.displayText,"disable-label");g.removeAttr(this.domNode,"title")},enableChooseImage:function(){g.setStyle(this.fileForm,"display","block");this.label&&"string"===typeof this.label&&
g.removeClass(this.displayText,"disable-label");this._addTip()},setDefaultSelfSrc:function(a){this.defaultSelfSrc=a;this.imageData=this.selfImg.src=a},getImageData:function(){return this.imageData},_initial:function(){this._processProperties();this._porcessMaskClick();this._setupFileInput();this._addTip()},_processProperties:function(){this.label&&"string"===typeof this.label&&(this.displayText.innerHTML=this.label,g.setStyle(this.hintText,"display","block"));this.showSelfImg&&g.setStyle(this.hintImage,
"display","block");this.defaultSelfSrc&&(this.imageData=this.selfImg.src=this.defaultSelfSrc);if(this.format){var a="image/*";"string"===typeof this.format&&/^image\/./.test(this.format)?a=this.format:"[object Array]"===Object.prototype.toString.call(this.format)&&0<this.format.length&&(a=this.format.join(","));g.setAttr(this.fileInput,"accept",a)}!d.file.supportHTML5()&&(!e("safari")&&d.file.isEnabledFlash())&&g.setStyle(this.fileInput,{width:"100%",height:"100%",position:"absolute",left:0,top:0,
opacity:0,zIndex:9})},_porcessMaskClick:function(){g.setAttr(this.fileInput,"id","imageChooser_"+m);g.setAttr(this.mask,"for","imageChooser_"+m);m++;this.maskHandle=c(this.mask,"click",q.hitch(this,function(a){a.stopPropagation();if(e("safari")&&7>e("safari"))new r({message:this.nls.unsupportReaderAPI}),a.preventDefault();else{if(!d.file.supportHTML5()){if(!d.file.isEnabledFlash()){var b=g.create("a",{href:"http://helpx.adobe.com/flash-player.html",innerHTML:this.nls.enableFlash,target:"_blank"});
new r({message:b});a.preventDefault();return}if(!d.file.supportFileAPI()){new r({message:this.nls.unsupportReaderAPI});a.preventDefault();return}}g.setStyle(this.fileInput,"display","none");setTimeout(q.hitch(this,function(){g.setStyle(this.fileInput,"display","block")}),200)}}))},_addTip:function(){if(this.showTip){var a=k.substitute({width:this.goldenWidth||40,height:this.goldenHeight||40},this.nls.toolTip);g.setAttr(this.domNode,"title",a)}else g.setAttr(this.domNode,"title","")},_setupFileInput:function(){if(9>=
e("ie"))this.own(c(this.fileInput,"change",q.hitch(this,this._onFileInputChange)));else c.once(this.fileInput,"change",q.hitch(this,this._onFileInputChange))},_onFileInputChange:function(a){var b=a.target.files&&a.target.files[0]||a.files&&a.files[0];if(this.format&&-1===this.format.indexOf(b.type))new r({message:this.nls.invalidType}),(!e("ie")||9<e("ie"))&&this._recreateFileForm();else{var c=9>e("ie")?23552:1024*this.maxSize;d.file.readFile(a,"image/*",c,q.hitch(this,function(a,d,h){a?(d=this.nls[a.errCode],
"exceed"===a.errCode&&(d=d.replace("1024",c/1024)),new r({message:d})):(this.fileProperty.fileName=d,window.isXT&&this.cropImage&&"image/gif"!==b.type?this._cropImageByUser(h):this._readFileData(h));(!e("ie")||9<e("ie"))&&this._recreateFileForm()}))}},_recreateFileForm:function(){var a=q.clone(this.mask),b=q.clone(this.fileInput);g.destroy(this.mask);g.destroy(this.fileInput);var c=q.clone(this.fileForm);g.place(a,c);g.place(b,c);g.place(c,this.fileForm,"replace");this.maskHandle.remove();this.mask=
a;this.fileInput=b;g.destroy(this.fileForm);this.fileForm=c;this._porcessMaskClick();this._setupFileInput()},_readFileData:function(a){this.onImageChange(a,this.fileProperty);this.displayImg&&g.setAttr(this.displayImg,"src",a);this.showSelfImg&&(this.selfImg?g.setAttr(this.selfImg,"src",a):this.selfImg.src=a)},_cropImageByUser:function(c){var d=new a({imageSrc:c,nls:q.clone(this.nls),realWidth:this.goldenWidth,realHeight:this.goldenHeight}),e=new p({hidden:!0}),f=new t({titleLabel:this.nls.cropImage,
content:d,width:500,height:480,buttons:[{label:this.nls.common.ok,onClick:q.hitch(this,function(){var a=d.getImageSize(),g=d.getCropSize();e.show();b("/webappbuilder/rest/cropimage",{data:{imageData:c,imageDisplaySize:a.w+","+a.h,cropRectangle:g.w+","+g.h+","+g.t+","+g.l},method:"POST",handleAs:"json",headers:{"X-Requested-With":null}}).then(q.hitch(this,function(a){a.success?(this._readFileData(a.imageData),f.close()):(new r({message:this.nls.unknowError}),e.hide())}),q.hitch(this,function(a){console.error(a);
new r({message:this.nls.unknowError});e.hide()}))})}]});e.placeAt(f.domNode);d.startup();g.addClass(f.domNode,"image-chooser-crop-popup")},onImageChange:function(a){this.imageData=a}});l.GIF="image/gif";l.JPEG="image/jpeg";l.PNG="image/png";return l})},"jimu/dijit/_CropImage":function(){define("dojo/_base/declare dojo/_base/html dojo/_base/lang dojo/on dojo/query dijit/_WidgetBase dijit/_TemplatedMixin dojo/text!./templates/_CropImage.html jimu/dijit/Message esri/lang dojo/NodeList-dom".split(" "),
function(l,n,s,q,g,c,f,e,b,k){return l([c,f],{templateString:e,inDrag:!1,inSlider:!1,realWidth:30,realHeight:30,ratio:null,imageSrc:null,_currentX:null,_currentY:null,_currentTop:0,_currentLeft:0,postCreate:function(){this._dragingHandlers=[];this.setImageSrc(this.imageSrc);this.own(q(this.ownerDocument,"mousemove",s.hitch(this,"_onMouseMove")));this.own(q(this.ownerDocument,"mouseup",s.hitch(this,"_onMouseUp")));this.loadingImg.src=require.toUrl("jimu")+"/images/loading.gif";this.own(q(this.baseImage,
"load",s.hitch(this,function(){this._init();n.setStyle(this.loadingImg,"display","none")})))},setImageSrc:function(b){n.setAttr(this.viewerImage,"src",b);n.setAttr(this.baseImage,"src",b)},getImageSize:function(){return{w:this._currentImageWidth,h:this._currentImageHeight}},getCropSize:function(){return{l:-this._currentLeft,t:-this._currentTop,w:this.idealWidth,h:this.idealHeight}},_init:function(){var c=this._getComputedStyle(this.cropSection),a=n.getContentBox(this.cropSection),e=this._getComputedStyle(this.baseImage),
f=parseFloat(e.width)||this.baseImage.offsetWidth,e=parseFloat(e.height)||this.baseImage.offsetHeight,p=f/e;this._maxImageWidth=f;this._maxImageHeight=e;if(e<this.realHeight&&f<this.realWidth)c=k.substitute({width:this.realWidth,height:this.realHeight},this.nls.cropWaining),setTimeout(s.hitch(this,function(){this.popup.close()}),50),new b({message:c});else{this.idealWidth=this.realWidth;this.idealHeight=this.realHeight;var m=this.ratio=this.ratio?this.ratio:this.realWidth/this.realHeight;1<=this.ratio?
a.h*this.ratio<=a.w?(this.idealHeight=a.h,this.idealWidth=a.h*this.ratio):(this.idealHeight=this._findProperlyValue(0,a.h,a.w-5,function(a){return a*m}),this.idealWidth=this.idealHeight*this.ratio):a.w/this.ratio<=a.h?(this.idealWidth=a.w,this.idealHeight=a.w/this.ratio):(this.idealWidth=this._findProperlyValue(0,a.w,a.h-5,function(a){return a/m}),this.idealHeight=this.idealWidth/this.ratio);n.setStyle(this.viewerBox,{width:this.idealWidth+"px",height:this.idealHeight+"px"});c=Math.abs((parseFloat(c.height)-
this.idealHeight)/2);n.setStyle(this.cropSection,{paddingTop:c+"px",paddingBottom:c+"px"});1<=p?this.idealHeight*p>=this.idealWidth?(n.setStyle(this.viewerImage,"height",this.idealHeight+"px"),n.setStyle(this.baseImage,"height",this.idealHeight+"px")):(c=this._findProperlyValue(0,this.idealWidth,this.idealWidth,function(a){return a*p}),n.setStyle(this.viewerImage,"height",c+"px"),n.setStyle(this.baseImage,"height",c+"px")):this.idealWidth/p>=this.idealHeight?(n.setStyle(this.viewerImage,"width",this.idealWidth+
"px"),n.setStyle(this.baseImage,"width",this.idealWidth+"px")):(c=this._findProperlyValue(0,this.idealHeight,this.idealHeight,function(a){return a/p}),n.setStyle(this.viewerImage,"width",c+"px"),n.setStyle(this.baseImage,"width",c+"px"));g(".hide-status",this.domNode).removeClass("hide-status");e=this._getComputedStyle(this.baseImage);f=parseFloat(e.width)||this.baseImage.offsetWidth;e=parseFloat(e.height)||this.baseImage.offsetHeight;this._minImageWidth=f;this._minImageHeight=e;this._currentImageWidth=
f;this._currentImageHeight=e;this._currentTop=-(e-this.idealHeight)/2;this._currentLeft=-(f-this.idealWidth)/2;n.setStyle(this.baseImage,{top:this._currentTop+"px",left:this._currentLeft+"px"});n.setStyle(this.viewerImage,{top:this._currentTop+"px",left:this._currentLeft+"px"});this._zoomRatio=this._maxImageWidth/this._minImageWidth;1>=this._zoomRatio&&n.addClass(this.zoomInBtn,"disable-zoom");n.addClass(this.zoomOutBtn,"disable-zoom");this._latestPercentage=window.isRTL?100:0}},_findProperlyValue:function(b,
a,c,e,f){f=isFinite(f)?parseFloat(f):1;c=0>c-f||0>c+f?f:c;var g=(b+a)/2,h=e(g);if(h<=c+f&&h>=c-f)return g;if(h>c)return this._findProperlyValue(b,g,c,e);if(h<c)return this._findProperlyValue(g,a,c,e)},_getComputedStyle:function(b){b=n.getMarginBox(b);return{width:b.w,height:b.h,left:b.l,top:b.t}},_onViewerMouseDown:function(b){var a=this._getComputedStyle(this.baseImage),c=this._getComputedStyle(this.viewerContent);this._maxOffsetLeft=parseFloat(c.width)-parseFloat(a.width);this._maxOffsetTop=parseFloat(c.height)-
parseFloat(a.height);this._maxOffsetLeft=0<this._maxOffsetLeft?0:this._maxOffsetLeft;this._maxOffsetTop=0<this._maxOffsetTop?0:this._maxOffsetTop;this.inDrag=!0;this._currentX=b.clientX;this._currentY=b.clientY;this._stopSelect()},_stopSelect:function(){this._dragingHandlers=this._dragingHandlers.concat([q(this.ownerDocument,"dragstart",function(b){b.stopPropagation();b.preventDefault()}),q(this.ownerDocumentBody,"selectstart",function(b){b.stopPropagation();b.preventDefault()})])},_removeStopSelect:function(){for(var b=
this._dragingHandlers.pop();b;)b.remove(),b=this._dragingHandlers.pop()},_onViewerMouseUp:function(b){this.inDrag&&(this.inDrag=!1,this._resetImagePosition(b.clientX,b.clientY),this._removeStopSelect(),b.stopPropagation())},_onSliderMouseDown:function(b){if(!(1>=this._zoomRatio)){this.inSlider=!0;this._currentX=b.clientX;this._currentY=b.clientY;var a=n.position(this.sliderNode);this._startSliderLeft=a.x;this._sliderWidth=a.w;this._stopSelect();b.stopPropagation()}},_onSliderMouseUp:function(b){if(!(1>=
this._zoomRatio)&&this.inSlider){this.inSlider=!1;this._resetSliderButtonPosition(b.clientX);var a=this._getComputedStyle(this.baseImage);this._currentLeft=parseFloat(a.left);this._currentTop=parseFloat(a.top);this._latestPercentage=100*((b.clientX-this._startSliderLeft)/this._sliderWidth);this._latestPercentage=this._normalizePercentage(this._latestPercentage);this._removeStopSelect();b.stopPropagation()}},_onMouseMove:function(b){this.inDrag&&this._resetImagePosition(b.clientX,b.clientY);this.inSlider&&
!(1>=this._zoomRatio)&&this._resetSliderButtonPosition(b.clientX,b.clientY)},_onMouseUp:function(b){this.inDrag&&this._onViewerMouseUp(b);this.inSlider&&this._onSliderMouseUp(b)},_onZoomOutClick:function(){1>=this._zoomRatio||this._zoomImage("out")},_onZoomInClick:function(){1>=this._zoomRatio||this._zoomImage("in")},_zoomImage:function(b){var a=0;this._latestPercentage=this._normalizePercentage(this._latestPercentage);"in"===b?a=window.isRTL?this._latestPercentage-20:this._latestPercentage+20:"out"===
b&&(a=window.isRTL?this._latestPercentage+20:this._latestPercentage-20);b=this._normalizePercentage(a);this._moveSliderButton(b,this._latestPercentage);this._latestPercentage=b;b=this._getComputedStyle(this.baseImage);this._currentLeft=parseFloat(b.left);this._currentTop=parseFloat(b.top)},_resetImagePosition:function(b,a){var c=b-this._currentX,e=a-this._currentY;0<=this._currentTop+e?(n.setStyle(this.baseImage,"top",0),n.setStyle(this.viewerImage,"top",0),this._currentY=a,this._currentTop=0):this._currentTop+
e<=this._maxOffsetTop?(n.setStyle(this.baseImage,"top",this._maxOffsetTop+"px"),n.setStyle(this.viewerImage,"top",this._maxOffsetTop+"px"),this._currentY=a,this._currentTop=this._maxOffsetTop):(n.setStyle(this.baseImage,"top",this._currentTop+e+"px"),n.setStyle(this.viewerImage,"top",this._currentTop+e+"px"),this._currentY=a,this._currentTop+=e);0<=this._currentLeft+c?(n.setStyle(this.baseImage,"left",0),n.setStyle(this.viewerImage,"left",0),this._currentX=b,this._currentLeft=0):this._currentLeft+
c<=this._maxOffsetLeft?(n.setStyle(this.baseImage,"left",this._maxOffsetLeft+"px"),n.setStyle(this.viewerImage,"left",this._maxOffsetLeft+"px"),this._currentX=b,this._currentLeft=this._maxOffsetLeft):(n.setStyle(this.baseImage,"left",this._currentLeft+c+"px"),n.setStyle(this.viewerImage,"left",this._currentLeft+c+"px"),this._currentX=b,this._currentLeft+=c)},_normalizePercentage:function(b){b=0>b?0:b;return 100<b?100:b},_resetSliderButtonPosition:function(b){b=100*((b-this._startSliderLeft)/this._sliderWidth);
b=this._normalizePercentage(b);this._moveSliderButton(b,this._latestPercentage)},_moveSliderButton:function(b,a){0>=b?n.addClass(this.zoomOutBtn,"disable-zoom"):n.removeClass(this.zoomOutBtn,"disable-zoom");100<=b?n.addClass(this.zoomInBtn,"disable-zoom"):n.removeClass(this.zoomInBtn,"disable-zoom");n.setStyle(this.sliderButton,"left",b+"%");window.isRTL&&(b=100-b,a=100-a);var c=this._minImageWidth*(this._zoomRatio-1)*b/100,e=this._minImageHeight*(this._zoomRatio-1)*b/100,f=this._getComputedStyle(this.baseImage);
this._currentLeft=parseFloat(f.left);this._currentTop=parseFloat(f.top);var f=(Math.abs(this._currentLeft)+this.idealWidth/2)*((this._minImageWidth+c)/this._currentImageWidth-1),g=(Math.abs(this._currentTop)+this.idealHeight/2)*((this._minImageWidth+c)/this._currentImageWidth-1);n.setStyle(this.baseImage,{width:this._minImageWidth+c+"px",height:this._minImageHeight+e+"px"});n.setStyle(this.viewerImage,{width:this._minImageWidth+c+"px",height:this._minImageHeight+e+"px"});this._currentImageWidth=this._minImageWidth+
c;this._currentImageHeight=this._minImageHeight+e;if(0<=b-a)n.setStyle(this.baseImage,{top:this._currentTop-g+"px",left:this._currentLeft-f+"px"}),n.setStyle(this.viewerImage,{top:this._currentTop-g+"px",left:this._currentLeft-f+"px"});else{var h=0,k=0,h=0<=this._currentTop-g?0:this._currentTop-g+this._minImageHeight+e<=this.idealHeight?this.idealHeight-this._minImageHeight-e:this._currentTop-g,k=0<=this._currentLeft-f?0:this._currentLeft-f+this._minImageWidth+c<=this.idealWidth?this.idealWidth-this._minImageWidth-
c:this._currentLeft-f;n.setStyle(this.baseImage,{top:h+"px",left:k+"px"});n.setStyle(this.viewerImage,{top:h+"px",left:k+"px"})}this._latestPercentage=b}})})},"widgets/Query/setting/_build-generate_module":function(){define(["dojo/text!./Setting.html","dojo/text!./css/style.css","dojo/i18n!./nls/strings"],function(){})},"url:jimu/dijit/templates/QueryableLayerSource.html":'\x3cdiv\x3e\r\n\t\x3ctable class\x3d"radio-table" cellpadding\x3d"0" cellspacing\x3d"0"\x3e\r\n\t\t\x3ctbody\x3e\r\n\t\t\t\x3ctr\x3e\r\n\t\t\t\t\x3ctd class\x3d"map-td" nowrap\x3e\r\n\t\t\t\t\t\x3cinput data-dojo-attach-point\x3d"mapRadio" type\x3d"radio" data-dojo-attach-event\x3d"onclick: _onRadioClicked" checked /\x3e\r\n\t\t\t\t\t\x3clabel data-dojo-attach-point\x3d"mapLabel"\x3e${nls.selectFromMap}\x3c/label\x3e\r\n\t\t\t\t\x3c/td\x3e\r\n\t\t\t\t\x3ctd class\x3d"portal-td" nowrap\x3e\r\n\t\t\t\t\t\x3cinput data-dojo-attach-point\x3d"portalRadio" type\x3d"radio" data-dojo-attach-event\x3d"onclick: _onRadioClicked" /\x3e\r\n\t\t\t\t\t\x3clabel data-dojo-attach-point\x3d"portalLabel"\x3e${nls.selectFromPortal}\x3c/label\x3e\r\n\t\t\t\t\x3c/td\x3e\r\n\t\t\t\t\x3ctd class\x3d"url-td" nowrap\x3e\r\n\t\t\t\t\t\x3cinput data-dojo-attach-point\x3d"urlRadio" type\x3d"radio" data-dojo-attach-event\x3d"onclick: _onRadioClicked" /\x3e\r\n\t\t\t\t\t\x3clabel data-dojo-attach-point\x3d"urlLabel"\x3e${nls.addServiceUrl}\x3c/label\x3e\r\n\t\t\t\t\x3c/td\x3e\r\n\t\t\t\x3c/tr\x3e\r\n\t\t\x3c/tbody\x3e\r\n\t\x3c/table\x3e\r\n\t\x3cdiv class\x3d"source-content"\x3e\r\n\t\t\x3cdiv data-dojo-attach-point\x3d"operationTip" class\x3d"operation-tip"\x3e\x3c/div\x3e\r\n\t\t\x3cdiv data-dojo-attach-point\x3d"mapDijitContainer" class\x3d"dijit-container map-dijit-container" style\x3d"display:none;"\x3e\x3c/div\x3e\r\n\t\t\x3cdiv data-dojo-attach-point\x3d"portalDijitContainer" class\x3d"dijit-container portal-dijit-container" style\x3d"display:none;"\x3e\x3c/div\x3e\r\n\t\t\x3cdiv data-dojo-attach-point\x3d"urlDijitContainer" class\x3d"dijit-container url-dijit-container" style\x3d"display:none;"\x3e\x3c/div\x3e\r\n\t\x3c/div\x3e\r\n\x3c/div\x3e',
"url:jimu/dijit/templates/_TreeNode.html":'\x3cdiv class\x3d"dijitTreeNode" role\x3d"presentation"\x3e\r\n\t\x3cdiv data-dojo-attach-point\x3d"rowNode" class\x3d"dijitTreeRow" role\x3d"presentation"\x3e\r\n\t\t\x3cspan data-dojo-attach-point\x3d"expandoNode" class\x3d"dijitInline dijitTreeExpando" role\x3d"presentation"\x3e\x3c/span\x3e\r\n\t\t\x3cspan data-dojo-attach-point\x3d"expandoNodeText" class\x3d"dijitExpandoText" role\x3d"presentation"\x3e\x3c/span\x3e\r\n\t\t\x3cspan data-dojo-attach-point\x3d"contentNode" class\x3d"dijitTreeContent" role\x3d"presentation"\x3e\r\n\t\t\t\x3cspan role\x3d"presentation" class\x3d"dijitInline dijitIcon dijitTreeIcon" data-dojo-attach-point\x3d"iconNode"\x3e\x3c/span\x3e\r\n\t\t\t\x3cspan data-dojo-attach-point\x3d"labelNode,focusNode" class\x3d"dijitTreeLabel" role\x3d"treeitem" tabindex\x3d"-1" aria-selected\x3d"false"\x3e\x3c/span\x3e\r\n\t\t\x3c/span\x3e\r\n\t\x3c/div\x3e\r\n\t\x3cdiv data-dojo-attach-point\x3d"containerNode" class\x3d"dijitTreeNodeContainer" role\x3d"presentation" style\x3d"display: none;"\x3e\x3c/div\x3e\r\n\x3c/div\x3e',
"url:dijit/templates/TreeNode.html":'\x3cdiv class\x3d"dijitTreeNode" role\x3d"presentation"\r\n\t\x3e\x3cdiv data-dojo-attach-point\x3d"rowNode" class\x3d"dijitTreeRow" role\x3d"presentation"\r\n\t\t\x3e\x3cspan data-dojo-attach-point\x3d"expandoNode" class\x3d"dijitInline dijitTreeExpando" role\x3d"presentation"\x3e\x3c/span\r\n\t\t\x3e\x3cspan data-dojo-attach-point\x3d"expandoNodeText" class\x3d"dijitExpandoText" role\x3d"presentation"\x3e\x3c/span\r\n\t\t\x3e\x3cspan data-dojo-attach-point\x3d"contentNode"\r\n\t\t\tclass\x3d"dijitTreeContent" role\x3d"presentation"\x3e\r\n\t\t\t\x3cspan role\x3d"presentation" class\x3d"dijitInline dijitIcon dijitTreeIcon" data-dojo-attach-point\x3d"iconNode"\x3e\x3c/span\r\n\t\t\t\x3e\x3cspan data-dojo-attach-point\x3d"labelNode,focusNode" class\x3d"dijitTreeLabel" role\x3d"treeitem"\r\n\t\t\t\t   tabindex\x3d"-1" aria-selected\x3d"false" id\x3d"${id}_label"\x3e\x3c/span\x3e\r\n\t\t\x3c/span\r\n\t\x3e\x3c/div\x3e\r\n\t\x3cdiv data-dojo-attach-point\x3d"containerNode" class\x3d"dijitTreeNodeContainer" role\x3d"presentation"\r\n\t\t style\x3d"display: none;" aria-labelledby\x3d"${id}_label"\x3e\x3c/div\x3e\r\n\x3c/div\x3e\r\n',
"url:dijit/templates/Tree.html":'\x3cdiv role\x3d"tree"\x3e\r\n\t\x3cdiv class\x3d"dijitInline dijitTreeIndent" style\x3d"position: absolute; top: -9999px" data-dojo-attach-point\x3d"indentDetector"\x3e\x3c/div\x3e\r\n\t\x3cdiv class\x3d"dijitTreeExpando dijitTreeExpandoLoading" data-dojo-attach-point\x3d"rootLoadingIndicator"\x3e\x3c/div\x3e\r\n\t\x3cdiv data-dojo-attach-point\x3d"containerNode" class\x3d"dijitTreeContainer" role\x3d"presentation"\x3e\r\n\t\x3c/div\x3e\r\n\x3c/div\x3e\r\n',"url:jimu/dijit/templates/QueryableServiceChooserFromPortal.html":'\x3cdiv\x3e\r\n\t\x3cdiv class\x3d"selector-container" data-dojo-attach-point\x3d"selectorContainer"\x3e\x3c/div\x3e\r\n\t\x3cdiv class\x3d"service-browser-container" data-dojo-attach-point\x3d"serviceBrowserContainer"\x3e\x3c/div\x3e\r\n\t\x3cdiv class\x3d"footer"\x3e\r\n\t\t\x3cdiv class\x3d"jimu-btn jimu-float-trailing cancel" data-dojo-attach-point\x3d"btnCancel" data-dojo-attach-event\x3d"onclick:_onBtnCancelClicked"\x3e${nls.cancel}\x3c/div\x3e\r\n\t\t\x3cdiv class\x3d"jimu-btn jimu-float-trailing next jimu-state-disabled" data-dojo-attach-point\x3d"btnNext" data-dojo-attach-event\x3d"onclick:_onBtnNextClicked"\x3e${nls.next}\x3c/div\x3e\r\n\t\t\x3cdiv class\x3d"jimu-btn jimu-float-trailing ok jimu-state-disabled" data-dojo-attach-point\x3d"btnOk" data-dojo-attach-event\x3d"onclick:_onBtnOkClicked"\x3e${nls.ok}\x3c/div\x3e\r\n\t\t\x3cdiv class\x3d"jimu-btn jimu-float-trailing back" data-dojo-attach-point\x3d"btnBack" data-dojo-attach-event\x3d"onclick:_onBtnBackClicked"\x3e${nls.back}\x3c/div\x3e\r\n\t\x3c/div\x3e\r\n\x3c/div\x3e',
"url:jimu/dijit/templates/ItemSelector.html":'\x3cdiv\x3e\r\n\t\x3cdiv class\x3d"setting-tab-container"\x3e\r\n\t\t\x3cdiv data-dojo-attach-point\x3d"tabNode"\x3e\x3c/div\x3e\r\n\r\n\t\t\x3cdiv class\x3d"tab-content mycontent-tab" data-dojo-attach-point\x3d"mycontentTabNode"\x3e\r\n\t\t\t\x3cdiv class\x3d"tab-content-main mycontent-tab-content-main"\x3e\r\n\t\t\t\t\x3cdiv data-dojo-attach-point\x3d"mycontentSearch" data-dojo-type\x3d"jimu/dijit/Search" data-dojo-props\x3d\'searchWhenInput:false\' data-dojo-attach-event\x3d"onSearch:_onMyContentSearch" style\x3d"position:absolute;width:100%;top:0;"\x3e\x3c/div\x3e\r\n\t\t\t\t\x3cdiv data-dojo-attach-point\x3d"mycontentItemTable" data-dojo-type\x3d"jimu/dijit/_ItemTable" data-dojo-props\x3d\'types:${_itemTypes},typeKeywords:${_typeKeywords}\'style\x3d"top:50px;"\x3e\x3c/div\x3e\r\n\t\t\t\x3c/div\x3e\r\n\t\t\x3c/div\x3e\r\n\r\n\t\t\x3cdiv class\x3d"tab-content organization-tab" data-dojo-attach-point\x3d"organizationTabNode"\x3e\r\n\t\t\t\x3cdiv class\x3d"tab-content-main organization-tab-content-main"\x3e\r\n\t\t\t\t\x3cdiv data-dojo-attach-point\x3d"organizationSearch" data-dojo-type\x3d"jimu/dijit/Search" data-dojo-props\x3d\'searchWhenInput:false\' data-dojo-attach-event\x3d"onSearch:_onOrganizationSearch" style\x3d"position:absolute;width:100%;top:0;"\x3e\x3c/div\x3e\r\n\t\t\t\t\x3cdiv data-dojo-attach-point\x3d"organizationItemTable" data-dojo-type\x3d"jimu/dijit/_ItemTable" data-dojo-props\x3d\'types:${_itemTypes},typeKeywords:${_typeKeywords}\' style\x3d"top:50px;"\x3e\x3c/div\x3e\r\n\t\t\t\x3c/div\x3e\r\n\t\t\x3c/div\x3e\r\n\r\n\t\t\x3cdiv class\x3d"tab-content group-tab" data-dojo-attach-point\x3d"groupTabNode"\x3e\r\n\t\t\t\x3cdiv class\x3d"tab-content-main group-tab-content-main"\x3e\r\n\t\t\t\t\x3cdiv class\x3d"groups-section" style\x3d"position:absolute;width:100%;top:50px;" data-dojo-attach-point\x3d"groupsSection"\x3e\r\n\t\t\t\t\t\x3cspan\x3e${nls.groups}:\x3c/span\x3e\r\n\t\t\t\t\t\x3cselect class\x3d"groups-select" data-dojo-attach-point\x3d"groupsSelect"\x3e\r\n\t\t\t\t\t\t\x3coption value\x3d"nodata"\x3e${nls.noneGroups}\x3c/option\x3e\r\n\t\t\t\t\t\x3c/select\x3e\r\n\t\t\t\t\x3c/div\x3e\r\n\t\t\t\t\x3cdiv data-dojo-attach-point\x3d"groupSearch" data-dojo-type\x3d"jimu/dijit/Search" data-dojo-props\x3d\'searchWhenInput:false\' data-dojo-attach-event\x3d"onSearch:_onGroupSearch" style\x3d"position:absolute;width:100%;top:0;"\x3e\x3c/div\x3e\r\n\t\t\t\t\x3cdiv data-dojo-attach-point\x3d"groupItemTable" data-dojo-type\x3d"jimu/dijit/_ItemTable" data-dojo-props\x3d\'types:${_itemTypes},typeKeywords:${_typeKeywords}\' style\x3d"top:85px;"\x3e\x3c/div\x3e\r\n\t\t\t\x3c/div\x3e\r\n\t\t\x3c/div\x3e\r\n\r\n\t\t\x3cdiv class\x3d"tab-content public-tab" data-dojo-attach-point\x3d"publicTabNode"\x3e\r\n\t\t\t\x3cdiv class\x3d"tab-content-main public-tab-content-main"\x3e\r\n\t\t\t\t\x3cdiv data-dojo-attach-point\x3d"publicSearch" data-dojo-type\x3d"jimu/dijit/Search" data-dojo-props\x3d\'searchWhenInput:false\' data-dojo-attach-event\x3d"onSearch:_onPublicSearch" style\x3d"position:absolute;width:100%;top:0;"\x3e\x3c/div\x3e\r\n\t\t\t\t\x3cdiv class\x3d"public-search-radios"\x3e\r\n\t\t\t\t\t\x3cinput data-dojo-attach-point\x3d"portalPublicRaido" type\x3d"radio" name\x3d"publicSearchRadio" class\x3d"jimu-float-leading portal-public-radio" /\x3e\r\n\t\t\t\t\t\x3clabel data-dojo-attach-point\x3d"portalPublicLabel" class\x3d"jimu-float-leading portal-public-label"\x3ePortal\x3c/label\x3e\r\n\t\t\t\t\t\x3cinput data-dojo-attach-point\x3d"onlinePublicRaido" type\x3d"radio" name\x3d"publicSearchRadio" class\x3d"jimu-float-leading online-public-radio" /\x3e\r\n\t\t\t\t\t\x3clabel data-dojo-attach-point\x3d"onlinePublicLabel" class\x3d"jimu-float-leading online-public-label"\x3eArcGIS Online\x3c/label\x3e\r\n\t\t\t\t\x3c/div\x3e\r\n\t\t\t\t\x3cdiv data-dojo-attach-point\x3d"publicItemSection" class\x3d"public-item-section"\x3e\r\n\t\t\t\t\t\x3cdiv data-dojo-attach-point\x3d"publicPortalItemTable" data-dojo-type\x3d"jimu/dijit/_ItemTable" data-dojo-props\x3d\'types:${_itemTypes},typeKeywords:${_typeKeywords}\'\x3e\x3c/div\x3e\r\n\t\t\t\t\t\x3cdiv data-dojo-attach-point\x3d"publicOnlineItemTable" data-dojo-type\x3d"jimu/dijit/_ItemTable" data-dojo-props\x3d\'types:${_itemTypes},typeKeywords:${_typeKeywords}\'\x3e\x3c/div\x3e\r\n\t\t\t\t\x3c/div\x3e\r\n\t\t\t\x3c/div\x3e\r\n\t\t\x3c/div\x3e\r\n\t\x3c/div\x3e\r\n\t\x3cdiv class\x3d"signin-section" data-dojo-attach-point\x3d"signinSection" style\x3d"display:none;"\x3e\r\n\t\t\x3cdiv class\x3d"signin-tip"\x3e${nls.signInTip}\x3c/div\x3e\r\n\t\x3c/div\x3e\r\n\x3c/div\x3e',
"url:jimu/dijit/templates/_ItemTable.html":'\x3cdiv\x3e\r\n\t\x3cdiv class\x3d"items-section all-items-section" data-dojo-attach-point\x3d"allItemsSection"\x3e\r\n\t\t\x3cdiv class\x3d"items-table-div" data-dojo-attach-point\x3d"allItemsTableDiv" data-dojo-attach-event\x3d"onscroll:_onAllItemsSectionScroll"\x3e\r\n\t\t\t\x3ctable class\x3d"items-table" cellpadding\x3d"10" data-dojo-attach-point\x3d"allItemsTable" data-dojo-attach-event\x3d"onclick:_onItemsTableClicked"\x3e\r\n\t\t\t\t\x3ctbody data-dojo-attach-point\x3d"allItemTbody"\x3e\x3c/tbody\x3e\r\n\t\t\t\x3c/table\x3e\r\n\t\t\x3c/div\x3e\r\n\t\t\x3cdiv data-dojo-type\x3d"jimu/dijit/LoadingIndicator" data-dojo-attach-point\x3d"allItemsShelter" data-dojo-props\x3d\'hidden:true\'\x3e\x3c/div\x3e\r\n\t\x3c/div\x3e\r\n\t\x3cdiv class\x3d"items-section filtered-items-section" data-dojo-attach-point\x3d"filteredItemsSection"\x3e\r\n\t\t\x3cdiv class\x3d"items-table-div" data-dojo-attach-point\x3d"filteredItemsTableDiv" data-dojo-attach-event\x3d"onscroll:_onFilteredItemsSectionScroll"\x3e\r\n\t\t\t\x3ctable class\x3d"items-table" cellpadding\x3d"10" data-dojo-attach-point\x3d"filteredItemsTable" data-dojo-attach-event\x3d"onclick:_onItemsTableClicked"\x3e\r\n\t\t\t\t\x3ctbody data-dojo-attach-point\x3d"filteredItemsTbody"\x3e\x3c/tbody\x3e\r\n\t\t\t\x3c/table\x3e\r\n\t\t\x3c/div\x3e\r\n\t\t\x3cdiv class\x3d"search-none-tip-section" data-dojo-attach-point\x3d"searchNoneTipSection" style\x3d"display:none;"\x3e\r\n\t\t\t\x3cspan class\x3d"search-none-icon jimu-icon jimu-icon-error"\x3e\x3c/span\x3e\r\n\t\t\t\x3cspan class\x3d"search-none-tip jimu-state-error-text"\x3e${nls.searchNone}\x3c/span\x3e\r\n\t\t\x3c/div\x3e\r\n\t\t\x3cdiv data-dojo-type\x3d"jimu/dijit/LoadingIndicator" data-dojo-attach-point\x3d"filteredItemShelter" data-dojo-props\x3d\'hidden:true\'\x3e\x3c/div\x3e\r\n\t\x3c/div\x3e\r\n\x3c/div\x3e',
"url:jimu/dijit/templates/_BasicServiceChooserContent.html":'\x3cdiv\x3e\r\n\t\x3cdiv class\x3d"content-section"\x3e\r\n\t\t\x3ctable class\x3d"layout"\x3e\r\n\t\t\t\x3ccolgroup\x3e\r\n\t\t\t\t\x3ccol width\x3d"80px" align\x3d"right"\x3e\x3c/col\x3e\r\n\t\t\t\t\x3ccol width\x3d"auto"\x3e\x3c/col\x3e\r\n\t\t\t\t\x3ccol width\x3d"170px"\x3e\x3c/col\x3e\r\n\t\t\t\x3c/colgroup\x3e\r\n\t\t\t\x3ctbody\x3e\r\n\t\t\t\t\x3ctr\x3e\r\n\t\t\t\t\t\x3ctd class\x3d"first-td"\x3e\r\n\t\t\t\t\t\t\x3cspan\x3eURL:\x3c/span\x3e\r\n\t\t\t\t\t\x3c/td\x3e\r\n\t\t\t\t\t\x3ctd\x3e\r\n\t\t\t\t\t\t\x3cdiv data-dojo-attach-point\x3d"urlInput" data-dojo-type\x3d"jimu/dijit/URLInput" style\x3d"width:100%;"\x3e\x3c/div\x3e\r\n\t\t\t\t\t\x3c/td\x3e\r\n\t\t\t\t\t\x3ctd\x3e\r\n\t\t\t\t\t\t\x3cdiv class\x3d"jimu-btn jimu-state-disabled validate-btn jimu-float-trailing" data-dojo-attach-point\x3d"btnValidate" data-dojo-attach-event\x3d"onclick:_onBtnValidateClick"\x3e${nls.validate}\x3c/div\x3e\r\n\t\t\t\t\t\x3c/td\x3e\r\n\t\t\t\t\x3c/tr\x3e\r\n\t\t\t\t\x3ctr data-dojo-attach-point\x3d"exampleTr" class\x3d"example-tr"\x3e\r\n\t\t\t\t\t\x3ctd class\x3d"first-td" style\x3d"padding-top:5px;"\x3e\r\n\t\t\t\t\t\t\x3cspan\x3e${nls.example}:\x3c/span\x3e\r\n\t\t\t\t\t\x3c/td\x3e\r\n\t\t\t\t\t\x3ctd data-dojo-attach-point\x3d"exampleTd" colspan\x3d"2" style\x3d"padding-top:5px;font-style:italic;color:#ccc;"\x3e\r\n\t\t\t\t\t\x3c/td\x3e\r\n\t\t\t\t\x3c/tr\x3e\r\n\t\t\t\x3c/tbody\x3e\r\n\t\t\x3c/table\x3e\r\n\t\t\x3cdiv class\x3d"service-browser-container" data-dojo-attach-point\x3d"serviceBrowserContainer"\x3e\r\n\t\t\t\x3cdiv class\x3d"error-section" data-dojo-attach-point\x3d"errorSection"\x3e\r\n\t\t\t\t\x3cspan class\x3d"jimu-icon jimu-icon-error"\x3e\x3c/span\x3e\r\n\t\t\t\t\x3cspan class\x3d"error-message" data-dojo-attach-point\x3d"errorNode"\x3e\x3c/span\x3e\r\n\t\t\t\x3c/div\x3e\r\n\t\t\x3c/div\x3e\r\n\t\x3c/div\x3e\r\n\t\x3cdiv class\x3d"operations"\x3e\r\n\t\t\x3cdiv class\x3d"jimu-btn jimu-float-trailing cancel" data-dojo-attach-event\x3d"onclick:_onBtnCancelClick"\x3e${nls.cancel}\x3c/div\x3e\r\n\t\t\x3cdiv class\x3d"jimu-btn jimu-float-trailing jimu-state-disabled ok" data-dojo-attach-point\x3d"btnOk" data-dojo-attach-event\x3d"onclick:_onBtnOkClick"\x3e${nls.ok}\x3c/div\x3e\r\n\t\x3c/div\x3e\r\n\t\x3cdiv data-dojo-attach-point\x3d"loading" data-dojo-type\x3d"jimu/dijit/LoadingIndicator" data-dojo-props\x3d\'hidden:true\'\x3e\x3c/div\x3e\r\n\x3c/div\x3e',
"url:widgets/Query/setting/SingleQuerySetting.html":'\x3cdiv\x3e\r\n\t\x3cdiv data-dojo-attach-point\x3d"filterDiv" style\x3d"height:1px;visibility:hidden;overflow:hidden;"\x3e\x3c/div\x3e\r\n\t\x3ctable data-dojo-attach-point\x3d"generalTable" class\x3d"general" cellpadding\x3d"0" cellspacing\x3d"0"\x3e\r\n\t\t\x3ctbody\x3e\r\n\t\t\t\x3ctr\x3e\r\n\t\t\t\t\x3ctd class\x3d"first-td"\x3e${nls.querySource}\x3c/td\x3e\r\n\t\t\t\t\x3ctd class\x3d"second-td"\x3e\r\n\t\t\t\t\t\x3ctable cellpadding\x3d"0" cellspacing\x3d"0" style\x3d"width:100%;border-collapse:collapse;"\x3e\r\n\t\t\t\t\t\t\x3ctbody\x3e\r\n\t\t\t\t\t\t\t\x3ctr\x3e\r\n\t\t\t\t\t\t\t\t\x3ctd style\x3d"width:auto;"\x3e\r\n\t\t\t\t\t\t\t\t\t\x3cdiv data-dojo-attach-point\x3d"urlTextBox" data-dojo-type\x3d"dijit/form/ValidationTextBox" data-dojo-props\x3d\'required:true,trim:true,disabled:true\' style\x3d"width:100%;"\x3e\x3c/div\x3e\r\n\t\t\t\t\t\t\t\t\x3c/td\x3e\r\n\t\t\t\t\t\t\t\t\x3ctd style\x3d"width:40px;"\x3e\r\n\t\t\t\t\t\t\t\t\t\x3cdiv class\x3d"setting-btn jimu-float-trailing" data-dojo-attach-event\x3d"onclick:_onBtnSetSourceClicked" title\x3d"${nls.setSource}"\x3e\r\n\t\t\t\t\t\t\t\t\t\t\x3cdiv class\x3d"jimu-icon jimu-icon-setting"\x3e\x3c/div\x3e\r\n\t\t\t\t\t\t\t\t\t\x3c/div\x3e\r\n\t\t\t\t\t\t\t\t\x3c/td\x3e\r\n\t\t\t\t\t\t\t\x3c/tr\x3e\r\n\t\t\t\t\t\t\x3c/tbody\x3e\r\n\t\t\t\t\t\x3c/table\x3e\r\n\t\t\t\t\x3c/td\x3e\r\n\t\t\t\x3c/tr\x3e\r\n\t\t\x3c/tbody\x3e\r\n\t\x3c/table\x3e\r\n\t\x3cdiv data-dojo-attach-point\x3d"detailSection" class\x3d"detail"\x3e\r\n\t\t\x3cdiv data-dojo-attach-point\x3d"infoTabNode"\x3e\r\n\t\t\t\x3ctable class\x3d"general" cellpadding\x3d"0" cellspacing\x3d"0"\x3e\r\n\t\t\t\t\x3ctbody\x3e\r\n\t\t\t\t\t\x3ctr\x3e\r\n\t\t\t\t\t\t\x3ctd class\x3d"first-td"\x3e${jimuNls.common.title}\x3c/td\x3e\r\n\t\t\t\t\t\t\x3ctd class\x3d"second-td"\x3e\r\n\t\t\t\t\t\t\t\x3cdiv data-dojo-attach-point\x3d"queryNameTextBox" data-dojo-type\x3d"dijit/form/ValidationTextBox" data-dojo-props\x3d\'required:true,trim:true\' style\x3d"width:100%;" data-dojo-attach-event\x3d"change:_onQueryNameChanged"\x3e\x3c/div\x3e\r\n\t\t\t\t\t\t\x3c/td\x3e\r\n\t\t\t\t\t\x3c/tr\x3e\r\n\t\t\t\t\t\x3ctr\x3e\r\n\t\t\t\t\t\t\x3ctd class\x3d"first-td"\x3e${nls.icon}\x3c/td\x3e\r\n\t\t\t\t\t\t\x3ctd class\x3d"second-td"\x3e\r\n\t\t\t\t\t\t\t\x3cdiv class\x3d"click-picker" data-dojo-attach-event\x3d"click:_onImageChooserDivClicked"\x3e\r\n\t\t\t\t\t\t\t\t\x3cdiv data-dojo-type\x3d"jimu/dijit/ImageChooser" data-dojo-attach-point\x3d"imageChooser" data-dojo-props\x3d"cropImage:true,showSelfImg:true,goldenWidth:16,goldenHeight:16,format:[\'image/gif\',\'image/png\',\'image/jpeg\']" class\x3d"jimu-float-leading" style\x3d"width:16px;height:16px;"\x3e\x3c/div\x3e\r\n\t\t\t\t\t\t\t\t\x3cdiv class\x3d"separator jimu-float-leading"\x3e\x3c/div\x3e\r\n\t\t\t\t\t\t\t\t\x3cdiv class\x3d"jimu-icon jimu-icon-down-arrow-8 jimu-float-leading"\x3e\x3c/div\x3e\r\n\t\t\t\t\t\t\t\x3c/div\x3e\r\n\t\t\t\t\t\t\x3c/td\x3e\r\n\t\t\t\t\t\x3c/tr\x3e\r\n\t\t\t\t\x3c/tbody\x3e\r\n\t\t\t\x3c/table\x3e\r\n\t\t\x3c/div\x3e\r\n\r\n\t\t\x3cdiv data-dojo-attach-point\x3d"definitionTabNode"\x3e\r\n\t\t\t\x3cdiv class\x3d"attribute-filter-section"\x3e\r\n\t\t\t\t\x3cdiv class\x3d"stress"\x3e${nls.attributeCriteira}\x3c/div\x3e\r\n\t\t\t\t\x3cdiv class\x3d"attribute-filter-content"\x3e\r\n\t\t\t\t\t\x3cdiv class\x3d"jimu-widget-note" style\x3d"margin-top:5px;"\x3e${nls.defineWhereClause}\x3c/div\x3e\r\n\t\t\t\t\t\x3ctable style\x3d"width:100%;margin-top:4px;"\x3e\r\n\t\t\t\t\t\t\x3ccolgroup\x3e\r\n\t\t\t\t\t\t\t\x3ccol width\x3d"auto"\x3e\x3c/col\x3e\r\n\t\t\t\t\t\t\t\x3ccol width\x3d"40"\x3e\x3c/col\x3e\r\n\t\t\t\t\t\t\x3c/colgroup\x3e\r\n\t\t\t\t\t\t\x3ctbody\x3e\r\n\t\t\t\t\t\t\t\x3ctr\x3e\r\n\t\t\t\t\t\t\t\t\x3ctd\x3e\r\n\t\t\t\t\t\t\t\t\t\x3cdiv class\x3d"attribute-sql jimu-widget-note" data-dojo-attach-point\x3d"sqlDiv" style\x3d"border:1px solid #ccc;padding:7px 8px;"\x3e\x3c/div\x3e\r\n\t\t\t\t\t\t\t\t\x3c/td\x3e\r\n\t\t\t\t\t\t\t\t\x3ctd\x3e\r\n\t\t\t\t\t\t\t\t\t\x3cdiv class\x3d"setting-btn jimu-float-trailing" data-dojo-attach-event\x3d"onclick:_onBtnFilterClicked" title\x3d"${nls.setSource}"\x3e\r\n\t\t\t\t\t\t\t\t\t\t\x3cdiv class\x3d"jimu-icon jimu-icon-setting"\x3e\x3c/div\x3e\r\n\t\t\t\t\t\t\t\t\t\x3c/div\x3e\r\n\t\t\t\t\t\t\t\t\x3c/td\x3e\r\n\t\t\t\t\t\t\t\x3c/tr\x3e\r\n\t\t\t\t\t\t\x3c/tbody\x3e\r\n\t\t\t\t\t\x3c/table\x3e\r\n\t\t\t\t\t\x3cdiv style\x3d"margin-top:13px;" data-dojo-attach-point\x3d"showSQLSection"\x3e\x3c/div\x3e\r\n\t\t\t\t\x3c/div\x3e\r\n\t\t\t\x3c/div\x3e\r\n\t\t\t\x3cdiv class\x3d"spatial-filter-section" data-dojo-attach-point\x3d"spatialFilterDiv"\x3e\x3c/div\x3e\r\n\t\t\x3c/div\x3e\r\n\r\n\t\t\x3cdiv data-dojo-attach-point\x3d"resultsTabNode"\x3e\r\n\t\t\t\x3cdiv class\x3d"popup-section"\x3e\r\n\t\t\t\t\x3cdiv class\x3d"stress"\x3e${nls.content}\x3c/div\x3e\r\n\t\t\t\t\x3cdiv data-dojo-attach-point\x3d"popupContainer"\x3e\x3c/div\x3e\r\n\t\t\t\x3c/div\x3e\r\n\t\t\t\x3cdiv data-dojo-attach-point\x3d"symbolSection" class\x3d"symbol-section" style\x3d"margin-top:14px;"\x3e\r\n\t\t\t\t\x3cdiv class\x3d"stress" style\x3d"margin-bottom:15px;"\x3e${nls.symbol}\x3c/div\x3e\r\n\t\t\t\t\x3cdiv style\x3d"margin-top:5px;"\x3e\r\n\t\t\t\t\t\x3cdiv class\x3d"radio-label-container"\x3e\r\n\t\t\t\t\t\t\x3cinput type\x3d"radio" data-dojo-attach-point\x3d"radioServiceSymbol" /\x3e\r\n\t\t\t\t\t\t\x3clabel data-dojo-attach-point\x3d"labelServiceSymbol"\x3e${nls.serviceSymbolTip}\x3c/label\x3e\r\n\t\t\t\t\t\x3c/div\x3e\r\n\t\t\t\t\t\x3cdiv class\x3d"radio-label-container" style\x3d"margin-top:8px;"\x3e\r\n\t\t\t\t\t\t\x3cinput type\x3d"radio" data-dojo-attach-point\x3d"radioCustomSymbol" checked /\x3e\r\n\t\t\t\t\t\t\x3clabel data-dojo-attach-point\x3d"labelCustomSymbol"\x3e${nls.setSymbol}\x3c/label\x3e\r\n\t\t\t\t\t\t\x3cdiv data-dojo-attach-point\x3d"layerSymbolPicker" data-dojo-type\x3d"jimu/dijit/SymbolPicker"\x3e\x3c/div\x3e\r\n\t\t\t\t\t\x3c/div\x3e\r\n\t\t\t\t\x3c/div\x3e\r\n\t\t\t\x3c/div\x3e\r\n\t\t\x3c/div\x3e\r\n\r\n\t\t\x3cdiv data-dojo-attach-point\x3d"optionsTabNode"\x3e\r\n\t\t\t\x3cdiv data-dojo-attach-point\x3d"cbxKeepResultsDiv" style\x3d"display:none;"\x3e\x3c/div\x3e\r\n\t\t\t\x3cdiv class\x3d"export-section" data-dojo-attach-point\x3d"exportSection"\x3e\x3c/div\x3e\r\n\t\t\t\x3cdiv class\x3d"create-layer-section"\x3e\r\n\t\t\t\t\x3cdiv class\x3d"stress"\x3e${nls.createLayerForTaskTip}\x3c/div\x3e\r\n\t\t\t\t\x3cdiv style\x3d"margin-top:15px;"\x3e\r\n\t\t\t\t\t\x3cdiv class\x3d"radio-label-container"\x3e\r\n\t\t\t\t\t\t\x3cinput data-dojo-attach-point\x3d"radioOneLayerPerTask" type\x3d"radio" checked /\x3e\r\n\t\t\t\t\t\t\x3clabel data-dojo-attach-point\x3d"labelOneLayerPerTask"\x3e${nls.oneLayerForTaskTip}\x3c/label\x3e\r\n\t\t\t\t\t\x3c/div\x3e\r\n\t\t\t\t\t\x3cdiv class\x3d"radio-label-container" style\x3d"margin-top:15px;"\x3e\r\n\t\t\t\t\t\t\x3cinput data-dojo-attach-point\x3d"radioMultipleLayerPerTask" type\x3d"radio" /\x3e\r\n\t\t\t\t\t\t\x3clabel data-dojo-attach-point\x3d"labelMultipleLayerPerTask"\x3e${nls.multipleLayerForTaskTip}\x3c/label\x3e\r\n\t\t\t\t\t\x3c/div\x3e\r\n\t\t\t\t\x3c/div\x3e\r\n\t\t\t\x3c/div\x3e\r\n\t\t\x3c/div\x3e\r\n\t\x3c/div\x3e\r\n\t\x3cdiv data-dojo-attach-point\x3d"shelter" data-dojo-type\x3d"jimu/dijit/LoadingShelter" data-dojo-props\x3d\'hidden:true\'\x3e\x3c/div\x3e\r\n\x3c/div\x3e',
"url:widgets/Query/setting/PopupConfig.html":'\x3cdiv\x3e\r\n\t\x3cdiv style\x3d"margin-top:15px;margin-bottom:10px;"\x3e\r\n\t\t\x3cdiv class\x3d"radio-label-container radio-div portal-radio-div"\x3e\r\n\t\t\t\x3cinput type\x3d"radio" data-dojo-attach-point\x3d"portalRadio" /\x3e\r\n\t\t\t\x3clabel data-dojo-attach-point\x3d"portalLabel"\x3e${nls.webMapPopupTip}\x3c/label\x3e\r\n\t\t\x3c/div\x3e\r\n\t\t\x3cdiv class\x3d"radio-label-container radio-div custom-radio-div" style\x3d"margin-top:15px;"\x3e\r\n\t\t\t\x3cinput type\x3d"radio" data-dojo-attach-point\x3d"customRadio" /\x3e\r\n\t\t\t\x3clabel data-dojo-attach-point\x3d"customLabel" checked\x3e${nls.customPopupTip}\x3c/label\x3e\r\n\t\t\x3c/div\x3e\r\n\t\x3c/div\x3e\r\n\t\x3ctable class\x3d"title-sorting-table"\x3e\r\n\t\t\x3ccolgroup\x3e\r\n\t\t\t\x3ccol width\x3d"auto"\x3e\x3c/col\x3e\r\n\t\t\t\x3ccol width\x3d"38px"\x3e\x3c/col\x3e\r\n\t\t\x3c/colgroup\x3e\r\n\t\t\x3ctbody\x3e\r\n\t\t\t\x3ctr class\x3d"indent-tr"\x3e\r\n\t\t\t\t\x3ctd colspan\x3d"2" class\x3d"indent-td" style\x3d"padding-bottom:4px;"\x3e\r\n\t\t\t\t\t\x3cspan class\x3d"light-stress"\x3e${nls.resultItemTitle}:\x3c/span\x3e\r\n\t\t\t\t\x3c/td\x3e\r\n\t\t\t\x3c/tr\x3e\r\n\t\t\t\x3ctr class\x3d"indent-tr"\x3e\r\n\t\t\t\t\x3ctd class\x3d"indent-td"\x3e\r\n\t\t\t\t\t\x3cdiv data-dojo-attach-point\x3d"titleTextBox" data-dojo-type\x3d"dijit/form/ValidationTextBox"\r\n\t\t\t\t\tdata-dojo-props\x3d\'required:true,trim:true\' style\x3d"width:100%;" /\x3e\r\n\t\t\t\t\x3c/td\x3e\r\n\t\t\t\t\x3ctd\x3e\r\n\t\t\t\t\t\x3cdiv data-dojo-attach-point\x3d"btnAddFields" data-dojo-attach-event\x3d"onclick:_onAddClicked" class\x3d"setting-btn btn-add-fields jimu-float-trailing"\x3e\r\n\t\t\t\t\t\t\x3cdiv class\x3d"jimu-icon jimu-icon-add"\x3e\x3c/div\x3e\r\n\t\t\t\t\t\x3c/div\x3e\r\n\t\t\t\t\x3c/td\x3e\r\n\t\t\t\x3c/tr\x3e\r\n\t\t\t\x3ctr class\x3d"indent-tr"\x3e\r\n\t\t\t\t\x3ctd colspan\x3d"2" class\x3d"indent-td" style\x3d"padding-top:10px;padding-bottom:4px;"\x3e\r\n\t\t\t\t\t\x3cspan class\x3d"light-stress"\x3e${nls.resultItemContent}:\x3c/span\x3e\r\n\t\t\t\t\x3c/td\x3e\r\n\t\t\t\x3c/tr\x3e\r\n\t\t\t\x3ctr class\x3d"indent-tr"\x3e\r\n\t\t\t\t\x3ctd class\x3d"indent-td"\x3e\r\n\t\t\t\t\t\x3cdiv data-dojo-attach-point\x3d"displayFieldsTextBox" class\x3d"display-fields-textbox" data-dojo-type\x3d"dijit/form/ValidationTextBox"\r\n\t\t\t\t\tdata-dojo-props\x3d\'required:true,trim:true,disabled:true\' style\x3d"width:100%;" /\x3e\r\n\t\t\t\t\x3c/td\x3e\r\n\t\t\t\t\x3ctd\x3e\r\n\t\t\t\t\t\x3cdiv data-dojo-attach-point\x3d"btnSetDisplayFields" class\x3d"setting-btn btn-display-fields jimu-float-trailing" data-dojo-attach-event\x3d"onclick:_onBtnSetDisplayFieldsClicked"\x3e\r\n\t\t\t\t\t\t\x3cdiv class\x3d"jimu-icon jimu-icon-edit"\x3e\x3c/div\x3e\r\n\t\t\t\t\t\x3c/div\x3e\r\n\t\t\t\t\x3c/td\x3e\r\n\t\t\t\x3c/tr\x3e\r\n\t\t\t\x3ctr\x3e\r\n\t\t\t\t\x3ctd colspan\x3d"2" style\x3d"padding-top:15px;padding-bottom:7px;"\x3e\r\n\t\t\t\t\t\x3cspan class\x3d"light-stress"\x3e${nls.sortingFields}:\x3c/span\x3e\r\n\t\t\t\t\x3c/td\x3e\r\n\t\t\t\x3c/tr\x3e\r\n\t\t\t\x3ctr\x3e\r\n\t\t\t\t\x3ctd data-dojo-attach-point\x3d"tdSortFields"\x3e\r\n\t\t\t\t\t\x3cdiv data-dojo-attach-point\x3d"sortFieldsDiv" class\x3d"sort-fields-div jimu-ellipsis"\x3e\x3c/div\x3e\r\n\t\t\t\t\x3c/td\x3e\r\n\t\t\t\t\x3ctd\x3e\r\n\t\t\t\t\t\x3cdiv data-dojo-attach-point\x3d"btnSortFields" class\x3d"setting-btn btn-sort-fields jimu-float-trailing" data-dojo-attach-event\x3d"onclick:_onBtnSortFieldsClicked"\x3e\r\n\t\t\t\t\t\t\x3cdiv class\x3d"jimu-icon jimu-icon-edit" data-dojo-attach-point\x3d"sortFieldsIcon"\x3e\x3c/div\x3e\r\n\t\t\t\t\t\x3c/div\x3e\r\n\t\t\t\t\x3c/td\x3e\r\n\t\t\t\x3c/tr\x3e\r\n\t\t\x3c/tbody\x3e\r\n\t\x3c/table\x3e\r\n\t\x3cdiv data-dojo-attach-point\x3d"displayFieldsSection" style\x3d"display:none;"\x3e\r\n\t\t\x3cdiv data-dojo-attach-point\x3d"displayFieldsDiv"\x3e\r\n\t\t\t\x3cdiv style\x3d"margin-top:7px;margin-bottom:8px;font-size:12px;"\x3e${nls.fieldsSetTip}\x3c/div\x3e\r\n\t\t  \x3cdiv data-dojo-attach-point\x3d"fieldsContainer"\x3e\x3c/div\x3e\r\n\t\t\x3c/div\x3e\r\n\t\x3c/div\x3e\r\n\x3c/div\x3e',
"url:widgets/Query/setting/SortFields.html":'\x3cdiv\x3e\r\n\t\x3cdiv\x3e${nls.configureFieldsTip}\x3c/div\x3e\r\n\t\x3cdiv class\x3d"add-with-icon" data-dojo-attach-event\x3d"onclick:_onAddNewClicked"\x3e\r\n\t\t\x3cspan class\x3d"jimu-icon jimu-icon-add"\x3e\x3c/span\x3e\r\n\t\t\x3cspan class\x3d"add-label"\x3e${nls.addNew}\x3c/span\x3e\r\n\t\x3c/div\x3e\r\n\t\x3cdiv data-dojo-attach-point\x3d"tableDiv"\x3e\x3c/div\x3e\r\n\x3c/div\x3e',"url:widgets/Query/setting/SpatialFilterConfig.html":'\x3cdiv\x3e\r\n\t\x3cdiv class\x3d"stress"\x3e${nls.spatialFilter}\x3c/div\x3e\r\n\t\x3cdiv class\x3d"spatial-filter-content"\x3e\r\n\t\t\x3cdiv class\x3d"jimu-widget-note" style\x3d"margin-top:5px;"\x3e${nls.spatialFilterTip}\x3c/div\x3e\r\n\t\t\x3cdiv class\x3d"spatial-filter-items" style\x3d"margin-top:5px;"\x3e\r\n\t\t\t\x3cdiv class\x3d"spatial-filter-item" data-dojo-attach-point\x3d"mapExtentSection"\x3e\r\n\t\t\t\t\x3cdiv class\x3d"spatial-filter-item-head"\x3e\r\n\t\t\t\t\t\x3cdiv class\x3d"checkbox-container" data-dojo-attach-point\x3d"cbxMapExtentDiv"\x3e\x3c/div\x3e\r\n\t\t\t\t\t\x3cdiv class\x3d"icon-placeholder"\x3e\x3c/div\x3e\r\n\t\t\t\t\t\x3cdiv class\x3d"make-default" data-dojo-attach-event\x3d"onclick:_onBtnMakeDefaultClicked"\x3e${nls.makeDefault}\x3c/div\x3e\r\n\t\t\t\t\t\x3cdiv class\x3d"default-text"\x3e${nls.defaultOption}\x3c/div\x3e\r\n\t\t\t\t\x3c/div\x3e\r\n\t\t\t\x3c/div\x3e\r\n\t\t\t\x3cdiv class\x3d"spatial-filter-item" data-dojo-attach-point\x3d"drawGraphicSection"\x3e\r\n\t\t\t\t\x3cdiv class\x3d"spatial-filter-item-head"\x3e\r\n\t\t\t\t\t\x3cdiv class\x3d"checkbox-container cbx-draw-graphic-div" data-dojo-attach-point\x3d"cbxDrawGraphicDiv"\x3e\x3c/div\x3e\r\n\t\t\t\t\t\x3cdiv class\x3d"icon-placeholder arrow-icon" data-dojo-attach-point\x3d"arrowIconDrawGraphic" data-dojo-attach-event\x3d"onclick:_onDrawGraphicArrowIconClicked"\x3e\x3c/div\x3e\r\n\t\t\t\t\t\x3cdiv class\x3d"make-default" data-dojo-attach-event\x3d"onclick:_onBtnMakeDefaultClicked"\x3e${nls.makeDefault}\x3c/div\x3e\r\n\t\t\t\t\t\x3cdiv class\x3d"default-text"\x3e${nls.defaultOption}\x3c/div\x3e\r\n\t\t\t\t\x3c/div\x3e\r\n\t\t\t\t\x3cdiv data-dojo-attach-point\x3d"drawGraphicSettting" class\x3d"draw-graphic-setting hidden-setting leading-padding20"\x3e\r\n\t\t\t\t\t\x3cdiv class\x3d"drawing-tools-section"\x3e\r\n\t\t\t\t\t\t\x3cdiv style\x3d"font-weight:bold;"\x3e${nls.drawingTools}\x3c/div\x3e\r\n\t\t\t\t\t\t\x3cdiv data-dojo-attach-point\x3d"drawingToolsContainer" class\x3d"drawing-tools-container" data-dojo-attach-event\x3d"onclick:_onDrawingToolsContainerClicked"\x3e\r\n\t\t\t\t\t\t\t\x3cdiv class\x3d"draw-item point" data-geotype\x3d"POINT"\x3e\r\n\t\t\t\t\t\t\t\t\x3cdiv class\x3d"draw-item-icon"\x3e\x3c/div\x3e\r\n\t\t\t\t\t\t\t\x3c/div\x3e\r\n\t\t\t\t\t\t\t\x3cdiv class\x3d"draw-item line" data-geotype\x3d"LINE"\x3e\r\n\t\t\t\t\t\t\t\t\x3cdiv class\x3d"draw-item-icon"\x3e\x3c/div\x3e\r\n\t\t\t\t\t\t\t\x3c/div\x3e\r\n\t\t\t\t\t\t\t\x3cdiv class\x3d"draw-item polyline" data-geotype\x3d"POLYLINE"\x3e\r\n\t\t\t\t\t\t\t\t\x3cdiv class\x3d"draw-item-icon"\x3e\x3c/div\x3e\r\n\t\t\t\t\t\t\t\x3c/div\x3e\r\n\t\t\t\t\t\t\t\x3cdiv class\x3d"draw-item freehand-polyline" data-geotype\x3d"FREEHAND_POLYLINE"\x3e\r\n\t\t\t\t\t\t\t\t\x3cdiv class\x3d"draw-item-icon"\x3e\x3c/div\x3e\r\n\t\t\t\t\t\t\t\x3c/div\x3e\r\n\t\t\t\t\t\t\t\x3cdiv class\x3d"draw-item triangle" data-geotype\x3d"TRIANGLE"\x3e\r\n\t\t\t\t\t\t\t\t\x3cdiv class\x3d"draw-item-icon"\x3e\x3c/div\x3e\r\n\t\t\t\t\t\t\t\x3c/div\x3e\r\n\t\t\t\t\t\t\t\x3cdiv class\x3d"draw-item extent" data-geotype\x3d"EXTENT"\x3e\r\n\t\t\t\t\t\t\t\t\x3cdiv class\x3d"draw-item-icon"\x3e\x3c/div\x3e\r\n\t\t\t\t\t\t\t\x3c/div\x3e\r\n\t\t\t\t\t\t\t\x3cdiv class\x3d"draw-item circle" data-geotype\x3d"CIRCLE"\x3e\r\n\t\t\t\t\t\t\t\t\x3cdiv class\x3d"draw-item-icon"\x3e\x3c/div\x3e\r\n\t\t\t\t\t\t\t\x3c/div\x3e\r\n\t\t\t\t\t\t\t\x3cdiv class\x3d"draw-item ellipse" data-geotype\x3d"ELLIPSE"\x3e\r\n\t\t\t\t\t\t\t\t\x3cdiv class\x3d"draw-item-icon"\x3e\x3c/div\x3e\r\n\t\t\t\t\t\t\t\x3c/div\x3e\r\n\t\t\t\t\t\t\t\x3cdiv class\x3d"draw-item polygon" data-geotype\x3d"POLYGON"\x3e\r\n\t\t\t\t\t\t\t\t\x3cdiv class\x3d"draw-item-icon"\x3e\x3c/div\x3e\r\n\t\t\t\t\t\t\t\x3c/div\x3e\r\n\t\t\t\t\t\t\t\x3cdiv class\x3d"draw-item freehand-polygon" data-geotype\x3d"FREEHAND_POLYGON"\x3e\r\n\t\t\t\t\t\t\t\t\x3cdiv class\x3d"draw-item-icon"\x3e\x3c/div\x3e\r\n\t\t\t\t\t\t\t\x3c/div\x3e\r\n\t\t\t\t\t\t\x3c/div\x3e\r\n\t\t\t\t\t\x3c/div\x3e\r\n\t\t\t\t\t\x3cdiv class\x3d"search-distance-section" \x3e\r\n\t\t\t\t\t\t\x3cdiv data-dojo-attach-point\x3d"drawBufferSettingCbxDiv"\x3e\x3c/div\x3e\r\n\t\t\t\t\t\t\x3cdiv class\x3d"search-distance-div" data-dojo-attach-point\x3d"drawingSearchDistanceDiv" style\x3d"margin-top:5px;"\x3e\x3c/div\x3e\r\n\t\t\t\t\t\x3c/div\x3e\r\n\t\t\t\t\x3c/div\x3e\r\n\t\t\t\x3c/div\x3e\r\n\t\t\t\x3cdiv class\x3d"spatial-filter-item" data-dojo-attach-point\x3d"useFeaturesSection"\x3e\r\n\t\t\t\t\x3cdiv class\x3d"spatial-filter-item-head"\x3e\r\n\t\t\t\t\t\x3cdiv class\x3d"checkbox-container cbx-use-features-div" data-dojo-attach-point\x3d"cbxUseFeaturesDiv"\x3e\x3c/div\x3e\r\n\t\t\t\t\t\x3cdiv class\x3d"icon-placeholder arrow-icon" data-dojo-attach-point\x3d"arrowIconFeatures" data-dojo-attach-event\x3d"onclick:_onFeaturesArrowIconClicked"\x3e\x3c/div\x3e\r\n\t\t\t\t\t\x3cdiv class\x3d"make-default" data-dojo-attach-event\x3d"onclick:_onBtnMakeDefaultClicked"\x3e${nls.makeDefault}\x3c/div\x3e\r\n\t\t\t\t\t\x3cdiv class\x3d"default-text"\x3e${nls.defaultOption}\x3c/div\x3e\r\n\t\t\t\t\x3c/div\x3e\r\n\t\t\t\t\x3cdiv data-dojo-attach-point\x3d"featuresSetting" class\x3d"features-setting hidden-setting leading-padding20"\x3e\r\n\t\t\t\t\t\x3cdiv class\x3d"relationships-section" style\x3d"margin-top:10px;"\x3e\r\n\t\t\t\t\t\t\x3cdiv style\x3d"font-weight:bold;"\x3e${nls.availableSpatialRelationships}\x3c/div\x3e\r\n\t\t\t\t\t\t\x3cdiv class\x3d"relationships-selector-div"\x3e\r\n\t\t\t\t\t\t\t\x3cdiv data-dojo-attach-point\x3d"relationshipTextBox" data-dojo-type\x3d"dijit/form/ValidationTextBox" data-dojo-props\x3d\'required:true,trim:true,disabled:true\'\x3e\x3c/div\x3e\r\n\t\t\t\t\t\t\t\x3cdiv class\x3d"setting-btn jimu-float-trailing" data-dojo-attach-event\x3d"onclick:_onBtnRelationshipClicked"\x3e\r\n\t\t\t\t\t\t\t\t\x3cdiv class\x3d"jimu-icon jimu-icon-setting"\x3e\x3c/div\x3e\r\n\t\t\t\t\t\t\t\x3c/div\x3e\r\n\t\t\t\t\t\t\x3c/div\x3e\r\n\t\t\t\t\t\x3c/div\x3e\r\n\t\t\t\t\t\x3cdiv class\x3d"search-distance-section" style\x3d"margin-top:10px;"\x3e\r\n\t\t\t\t\t\t\x3cdiv data-dojo-attach-point\x3d"featureBufferSettingCbxDiv"\x3e\x3c/div\x3e\r\n\t\t\t\t\t\t\x3cdiv class\x3d"search-distance-div" data-dojo-attach-point\x3d"featuresSearchDistanceDiv" style\x3d"margin-top:5px;"\x3e\x3c/div\x3e\r\n\t\t\t\t\t\x3c/div\x3e\r\n\t\t\t\t\x3c/div\x3e\r\n\t\t\t\x3c/div\x3e\r\n\t\t\t\x3cdiv class\x3d"spatial-filter-item" data-dojo-attach-point\x3d"layerExtentSection"\x3e\r\n\t\t\t\t\x3cdiv class\x3d"spatial-filter-item-head"\x3e\r\n\t\t\t\t\t\x3cdiv class\x3d"checkbox-container" data-dojo-attach-point\x3d"cbxLayerExtentDiv"\x3e\x3c/div\x3e\r\n\t\t\t\t\t\x3cdiv class\x3d"icon-placeholder"\x3e\x3c/div\x3e\r\n\t\t\t\t\t\x3cdiv class\x3d"make-default" data-dojo-attach-event\x3d"onclick:_onBtnMakeDefaultClicked"\x3e${nls.makeDefault}\x3c/div\x3e\r\n\t\t\t\t\t\x3cdiv class\x3d"default-text"\x3e${nls.defaultOption}\x3c/div\x3e\r\n\t\t\t\t\x3c/div\x3e\r\n\t\t\t\x3c/div\x3e\r\n\t\t\x3c/div\x3e\r\n\t\x3c/div\x3e\r\n\x3c/div\x3e',
"url:widgets/Query/setting/SearchDistance.html":'\x3cdiv\x3e\r\n\t\x3ctable style\x3d"table-layout:fixed;"\x3e\r\n\t\t\x3ccolgroup\x3e\r\n\t\t\t\x3ccol width\x3d"auto"\x3e\x3c/col\x3e\r\n\t\t\t\x3ccol width\x3d"15px"\x3e\x3c/col\x3e\r\n\t\t\t\x3ccol width\x3d"auto"\x3e\x3c/col\x3e\r\n\t\t\x3c/colgroup\x3e\r\n\t\t\x3ctbody\x3e\r\n\t\t\t\x3ctr\x3e\r\n\t\t\t\t\x3ctd style\x3d"padding-bottom:5px;"\x3e${nls.defaultDistance}\x3c/td\x3e\r\n\t\t\t\t\x3ctd\x3e\x3c/td\x3e\r\n\t\t\t\t\x3ctd\x3e${nls.defaultUnit}\x3c/td\x3e\r\n\t\t\t\x3c/tr\x3e\r\n\t\t\t\x3ctr\x3e\r\n\t\t\t\t\x3ctd\x3e\r\n\t\t\t\t\t\x3cinput data-dojo-attach-point\x3d"numberTextBox" data-dojo-type\x3d"dijit/form/NumberTextBox"\r\n\t\t\t\t\t data-dojo-props\x3d\'"required":true,intermediateChanges:true,constraints:{min:0,pattern:"#####0.##########"}\'\r\n\t\t\t\t\t style\x3d"width:100%;" /\x3e\r\n\t\t\t\t\x3c/td\x3e\r\n\t\t\t\t\x3ctd\x3e\x3c/td\x3e\r\n\t\t\t\t\x3ctd\x3e\r\n\t\t\t\t\t\x3cselect data-dojo-type\x3d"dijit/form/Select" class\x3d"restrict-select-width" data-dojo-attach-point\x3d"defaultUnitSelect" style\x3d"width:100%;"\x3e\r\n\t\t\t\t\t\t\x3coption value\x3d"MILES" selected\x3e${nls.miles}\x3c/option\x3e\r\n\t\t\t\t\t\t\x3coption value\x3d"KILOMETERS"\x3e${nls.kilometers}\x3c/option\x3e\r\n\t\t\t\t\t\t\x3coption value\x3d"FEET"\x3e${nls.feet}\x3c/option\x3e\r\n\t\t\t\t\t\t\x3coption value\x3d"METERS"\x3e${nls.meters}\x3c/option\x3e\r\n\t\t\t\t\t\t\x3coption value\x3d"YARDS"\x3e${nls.yards}\x3c/option\x3e\r\n\t\t\t\t\t\t\x3coption value\x3d"NAUTICAL_MILES"\x3e${nls.nauticalMiles}\x3c/option\x3e\r\n\t\t\t\t\t\x3c/select\x3e\r\n\t\t\t\t\x3c/td\x3e\r\n\t\t\t\x3c/tr\x3e\r\n\t\t\x3c/tbody\x3e\r\n\t\x3c/table\x3e\r\n\x3c/div\x3e',
"url:jimu/dijit/templates/Filter.html":'\x3cdiv\x3e\r\n\t\x3cdiv data-dojo-attach-point\x3d"contentSection" class\x3d"content-section"\x3e\r\n\t\t\x3cdiv class\x3d"add-btn-section"\x3e\r\n\t\t\t\x3cdiv data-dojo-attach-point\x3d"btnAddExp" data-dojo-attach-event\x3d"click:_onBtnAddExpClick"\r\n\t\t\t class\x3d"add-with-icon jimu-state-disabled add-expression jimu-float-leading"\x3e\r\n\t\t\t\t\x3cspan data-dojo-attach-point\x3d"iconAddExp" class\x3d"jimu-icon jimu-icon-add jimu-state-disabled"\x3e\x3c/span\x3e\r\n\t\t\t\t\x3cspan class\x3d"add-label"\x3e${nls.addAnotherExpression}\x3c/span\x3e\r\n\t\t\t\x3c/div\x3e\r\n\t\t\t\x3cdiv data-dojo-attach-point\x3d"btnAddSet" data-dojo-attach-event\x3d"click:_onBtnAddSetClick"\r\n\t\t\t class\x3d"add-with-icon jimu-state-disabled add-set jimu-float-leading"\x3e\r\n\t\t\t\t\x3cspan data-dojo-attach-point\x3d"iconAddSet" class\x3d"jimu-icon jimu-icon-add jimu-state-disabled"\x3e\x3c/span\x3e\r\n\t\t\t\t\x3cspan class\x3d"add-label"\x3e${nls.addSet}\x3c/span\x3e\r\n\t\t\t\x3c/div\x3e\r\n\t\t\x3c/div\x3e\r\n\t\t\x3cspan data-dojo-attach-point\x3d"matchMsg" style\x3d"margin-top:11px;margin-bottom:11px;display:none;"\x3e\r\n\t\t\t\x3cspan\x3e${nls.strMatchMsgPart1}\x3c/span\x3e\r\n\t\t\t\x3cselect data-dojo-attach-point\x3d"allAnySelect"\x3e\r\n\t\t\t\t\x3coption value\x3d"AND" selected\x3e${nls.all}\x3c/option\x3e\r\n\t\t\t\t\x3coption value\x3d"OR"\x3e${nls.any}\x3c/option\x3e\r\n\t\t\t\x3c/select\x3e\r\n\t\t\t\x3cspan\x3e${nls.strMatchMsgPart2}\x3c/span\x3e\r\n\t\t\x3c/span\x3e\r\n\t\t\x3cdiv class\x3d"allExpsBox" data-dojo-attach-point\x3d"allExpsBox"\x3e\r\n\t\t\x3c/div\x3e\r\n\t\x3c/div\x3e\r\n\t\x3cdiv data-dojo-attach-point\x3d"errorSection" style\x3d"display:none;"\x3e\r\n\t\t\x3cspan class\x3d"jimu-icon jimu-icon-error"\x3e\x3c/span\x3e\r\n\t\t\x3cspan data-dojo-attach-point\x3d"errorTip" class\x3d"error-tip"\x3e\x3c/span\x3e\r\n\t\x3c/div\x3e\r\n\t\x3cdiv data-dojo-attach-point\x3d"noFilterTipSection" class\x3d"no-filter-tip" style\x3d"display:none;"\x3e\x3c/div\x3e\r\n\t\x3cdiv data-dojo-attach-point\x3d"loading" data-dojo-type\x3d"jimu/dijit/LoadingIndicator" data-dojo-props\x3d"hidden:true"\x3e\x3c/div\x3e\r\n\x3c/div\x3e',
"url:jimu/dijit/templates/_SingleFilter.html":'\x3cdiv\x3e\r\n\t\x3ctable class\x3d"setting-table" cellpadding\x3d"0" cellspacing\x3d"0" cellpadding\x3d"10px" style\x3d"table-layout:fixed;"\x3e\r\n\t\t\x3ctbody\x3e\r\n\t\t\t\x3ctr\x3e\r\n\t\t\t\t\x3ctd class\x3d"fields-td" nowrap\x3e\r\n\t\t\t\t\t\x3cdiv data-dojo-attach-point\x3d"fieldsSelect" data-dojo-type\x3d"dijit/form/FilteringSelect" data-dojo-attach-event\x3d"change:_onFieldsSelectChange"  data-dojo-props\x3d\'searchAttr:"displayName",required:true,intermediateChanges:true\' class\x3d"dijit-form-FilteringSelect" style\x3d"width:100%;"\x3e\x3c/div\x3e\r\n\t\t\t\t\x3c/td\x3e\r\n\t\t\t\t\x3ctd class\x3d"operators-td" nowrap\x3e\r\n\t\t\t\t\t\x3cselect data-dojo-attach-point\x3d"operatorsSelect" data-dojo-type\x3d"dijit/form/Select" data-dojo-attach-event\x3d"change:_onOperatorsSelectChange" style\x3d"width:100%;" class\x3d"dijit-form-Select restrict-select-width"\x3e\r\n\t\t\t\t\t\t\x3coption value\x3d"none"\x3e${nls.none}\x3c/option\x3e\r\n\t\t\t\t\t\x3c/select\x3e\r\n\t\t\t\t\x3c/td\x3e\r\n\t\t\t\t\x3ctd class\x3d"value-td" nowrap\x3e\r\n\t\t\t\t\t\x3cdiv data-dojo-attach-point\x3d"attributeValueContainer" class\x3d"value-container"\x3e\r\n\t\t\t\t\t\t\x3cdiv\x3e\r\n\t\t\t\t\t\t\t\x3cdiv data-dojo-attach-point\x3d"allValueBoxContainer" style\x3d"width:100%;"\x3e\r\n\t\t\t\t\t\t\t\t\x3cdiv data-dojo-attach-point\x3d"stringTextBoxContainer" style\x3d"width:100%;"\x3e\r\n\t\t\t\t\t\t\t\t\t\x3cinput data-dojo-attach-point\x3d"stringTextBox" data-dojo-type\x3d"dijit/form/ValidationTextBox" data-dojo-props\x3d"required:true,trim:true" style\x3d"width:100%;" class\x3d"dijit-form-ValidationTextBox" /\x3e\r\n\r\n\t\t\t\t\t\t\t\t\t\x3cdiv data-dojo-attach-point\x3d"stringCodedValuesFS" data-dojo-type\x3d"dijit/form/FilteringSelect" data-dojo-props\x3d\'searchAttr:"name",required:true,intermediateChanges:true\' class\x3d"dijit-form-FilteringSelect" style\x3d"display:none;width:100%;"\x3e\x3c/div\x3e\r\n\t\t\t\t\t\t\t\t\x3c/div\x3e\r\n\r\n\t\t\t\t\t\t\t\t\x3cdiv data-dojo-attach-point\x3d"numberTextBoxContainer" style\x3d"display:none;"\x3e\r\n\t\t\t\t\t\t\t\t\t\x3cinput data-dojo-attach-point\x3d"numberTextBox" data-dojo-type\x3d"dijit/form/NumberTextBox" data-dojo-props\x3d\'"required":true,intermediateChanges:true,constraints: {pattern: "#####0.##########"}\' class\x3d"dijit-form-NumberTextBox" style\x3d"width:100%;" /\x3e\r\n\r\n\t\t\t\t\t\t\t\t\t\x3ctable data-dojo-attach-point\x3d"numberRangeTable" style\x3d"display:none;width:100%;border-collapse:collapse;table-layout:fixed;" cellpadding\x3d"0" cellspacing\x3d"0"\x3e\r\n\t\t\t\t\t\t\t\t\t\t\x3ctbody\x3e\r\n\t\t\t\t\t\t\t\t\t\t\t\x3ctr\x3e\r\n\t\t\t\t\t\t\t\t\t\t\t\t\x3ctd style\x3d"width:40%;"\x3e\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\x3cinput data-dojo-attach-point\x3d"numberTextBox1" data-dojo-type\x3d"dijit/form/NumberTextBox" data-dojo-attach-event\x3d"blur:_onRangeNumberBlur" data-dojo-props\x3d\'"required":true,intermediateChanges:true,constraints: {pattern: "#####0.##########"}\' class\x3d"dijit-form-NumberTextBox" style\x3d"width:100%;" /\x3e\r\n\t\t\t\t\t\t\t\t\t\t\t\t\x3c/td\x3e\r\n\t\t\t\t\t\t\t\t\t\t\t\t\x3ctd style\x3d"width:20%;text-align:center;"\x3e\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\x3cspan\x3e${nls.and}\x3c/span\x3e\r\n\t\t\t\t\t\t\t\t\t\t\t\t\x3c/td\x3e\r\n\t\t\t\t\t\t\t\t\t\t\t\t\x3ctd style\x3d"width:40%;"\x3e\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\x3cinput data-dojo-attach-point\x3d"numberTextBox2" data-dojo-type\x3d"dijit/form/NumberTextBox" data-dojo-attach-event\x3d"blur:_onRangeNumberBlur" data-dojo-props\x3d\'"required":true,intermediateChanges:true,constraints: {pattern: "#####0.##########"}\' class\x3d"dijit-form-NumberTextBox" style\x3d"width:100%;" /\x3e\r\n\t\t\t\t\t\t\t\t\t\t\t\t\x3c/td\x3e\r\n\t\t\t\t\t\t\t\t\t\t\t\x3c/tr\x3e\r\n\t\t\t\t\t\t\t\t\t\t\x3c/tbody\x3e\r\n\t\t\t\t\t\t\t\t\t\x3c/table\x3e\r\n\r\n\t\t\t\t\t\t\t\t\t\x3cdiv data-dojo-attach-point\x3d"numberCodedValuesFS" data-dojo-type\x3d"dijit/form/FilteringSelect" data-dojo-props\x3d\'searchAttr:"name",required:true,intermediateChanges:true\' class\x3d"dijit-form-FilteringSelect" style\x3d"display:none;width:100%;"\x3e\x3c/div\x3e\r\n\t\t\t\t\t\t\t\t\x3c/div\x3e\r\n\r\n\t\t\t\t\t\t\t\t\x3cdiv data-dojo-attach-point\x3d"dateTextBoxContainer" style\x3d"display:none;"\x3e\r\n\t\t\t\t\t\t\t\t\t\x3cinput data-dojo-attach-point\x3d"dateTextBox" data-dojo-type\x3d"dijit/form/DateTextBox" data-dojo-props\x3d\'value:new Date(),required:true,trim:true\' class\x3d"dijit-form-DateTextBox" style\x3d"width:100%;" /\x3e\r\n\t\t\t\t\t\t\t\t\t\x3ctable data-dojo-attach-point\x3d"dateRangeTable" style\x3d"display:none;width:100%;border-collapse:collapse;table-layout:fixed;" cellpadding\x3d"0" cellspacing\x3d"0"\x3e\r\n\t\t\t\t\t\t\t\t\t\t\x3ctbody\x3e\r\n\t\t\t\t\t\t\t\t\t\t\t\x3ctr\x3e\r\n\t\t\t\t\t\t\t\t\t\t\t\t\x3ctd style\x3d"width:40%;"\x3e\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\x3cinput data-dojo-attach-point\x3d"dateTextBox1" data-dojo-type\x3d"dijit/form/DateTextBox" data-dojo-attach-event\x3d"change:_onRangeDateBlur" data-dojo-props\x3d\'value:new Date(),required:true,trim:true\' class\x3d"dijit-form-DateTextBox" style\x3d"width:100%;" /\x3e\r\n\t\t\t\t\t\t\t\t\t\t\t\t\x3c/td\x3e\r\n\t\t\t\t\t\t\t\t\t\t\t\t\x3ctd style\x3d"width:20%;text-align:center;"\x3e\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\x3cspan\x3e${nls.and}\x3c/span\x3e\r\n\t\t\t\t\t\t\t\t\t\t\t\t\x3c/td\x3e\r\n\t\t\t\t\t\t\t\t\t\t\t\t\x3ctd\x3e\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\x3cinput data-dojo-attach-point\x3d"dateTextBox2" data-dojo-type\x3d"dijit/form/DateTextBox" data-dojo-attach-event\x3d"change:_onRangeDateBlur" data-dojo-props\x3d\'value:new Date(),required:true,trim:true\' class\x3d"dijit-form-DateTextBox" style\x3d"width:100%;" /\x3e\r\n\t\t\t\t\t\t\t\t\t\t\t\t\x3c/td\x3e\r\n\t\t\t\t\t\t\t\t\t\t\t\x3c/tr\x3e\r\n\t\t\t\t\t\t\t\t\t\t\x3c/tbody\x3e\r\n\t\t\t\t\t\t\t\t\t\x3c/table\x3e\r\n\t\t\t\t\t\t\t\t\x3c/div\x3e\r\n\t\t\t\t\t\t\t\x3c/div\x3e\r\n\r\n\t\t\t\t\t\t\t\x3cdiv data-dojo-attach-point\x3d"fieldsSelect2" data-dojo-type\x3d"dijit/form/FilteringSelect" data-dojo-props\x3d\'searchAttr:"name"\' class\x3d"dijit-form-FilteringSelect" style\x3d"display:none;width:100%;"\x3e\r\n\t\t\t\t\t\t\t\x3c/div\x3e\r\n\r\n\t\t\t\t\t\t\t\x3cdiv data-dojo-attach-point\x3d"uniqueValuesSelect" data-dojo-type\x3d"dijit/form/FilteringSelect"  data-dojo-props\x3d\'searchAttr:"label"\' class\x3d"dijit-form-FilteringSelect" style\x3d"display:none;width:100%;"\x3e\r\n\t\t\t\t\t\t\t\x3c/div\x3e\r\n\t\t\t\t\t\t\x3c/div\x3e\r\n\r\n\t\t\t\t\t\t\x3cdiv class\x3d"radio-table-container"\x3e\r\n\t\t\t\t\t\t\t\x3ctable class\x3d"radio-table" cellpadding\x3d"0" cellspacing\x3d"0"\x3e\r\n\t\t\t\t\t\t\t\t\x3ctbody\x3e\r\n\t\t\t\t\t\t\t\t\t\x3ctr\x3e\r\n\t\t\t\t\t\t\t\t\t\t\x3ctd\x3e\r\n\t\t\t\t\t\t\t\t\t\t\t\x3cinput type\x3d"radio" data-dojo-attach-point\x3d"valueRadio" checked\x3d"true" disabled  title\x3d"${nls.valueTooltip}" /\x3e\r\n\t\t\t\t\t\t\t\t\t\t\t\x3clabel data-dojo-attach-point\x3d"valueLabel" title\x3d"${nls.valueTooltip}"\x3e${nls.value}\x3c/label\x3e\r\n\t\t\t\t\t\t\t\t\t\t\x3c/td\x3e\r\n\t\t\t\t\t\t\t\t\t\t\x3ctd\x3e\r\n\t\t\t\t\t\t\t\t\t\t\t\x3cinput type\x3d"radio" data-dojo-attach-point\x3d"fieldRadio" disabled title\x3d"${nls.fieldTooltip}" /\x3e\r\n\t\t\t\t\t\t\t\t\t\t\t\x3clabel data-dojo-attach-point\x3d"fieldLabel" title\x3d"${nls.fieldTooltip}"\x3e${nls.field}\x3c/label\x3e\r\n\t\t\t\t\t\t\t\t\t\t\x3c/td\x3e\r\n\t\t\t\t\t\t\t\t\t\t\x3ctd data-dojo-attach-point\x3d"uniqueTd"\x3e\r\n\t\t\t\t\t\t\t\t\t\t\t\x3cinput type\x3d"radio" data-dojo-attach-point\x3d"uniqueRadio" disabled title\x3d"${nls.uniqueValueTooltip}" /\x3e\r\n\t\t\t\t\t\t\t\t\t\t\t\x3clabel data-dojo-attach-point\x3d"uniqueLabel" title\x3d"${nls.uniqueValueTooltip}"\x3e${nls.unique}\x3c/label\x3e\r\n\t\t\t\t\t\t\t\t\t\t\x3c/td\x3e\r\n\t\t\t\t\t\t\t\t\t\x3c/tr\x3e\r\n\t\t\t\t\t\t\t\t\x3c/tbody\x3e\r\n\t\t\t\t\t\t\t\x3c/table\x3e\r\n\t\t\t\t\t\t\x3c/div\x3e\r\n\t\t\t\t\t\x3c/div\x3e\r\n\t\t\t\t\x3c/td\x3e\r\n\t\t\t\t\x3ctd class\x3d"delete-td" nowrap\x3e\r\n\t\t\t\t\t\x3cdiv class\x3d"jimu-icon jimu-icon-delete" data-dojo-attach-point\x3d"btnDelete"\r\n\t\t\t\t\t data-dojo-attach-event\x3d"click:_destroySelf"\x3e\x3c/div\x3e\r\n\t\t\t\t\x3c/td\x3e\r\n\t\t\t\x3c/tr\x3e\r\n\t\t\x3c/tbody\x3e\r\n\t\x3c/table\x3e\r\n\t\x3cdiv class\x3d"askvalues"\x3e\r\n\t\t\x3cdiv data-dojo-type\x3d"jimu/dijit/CheckBox" data-dojo-attach-point\x3d"cbxAskValues" label\x3d"${nls.askForValues}" class\x3d"jimu-trailing-margin6"\x3e\x3c/div\x3e\r\n\t\t\x3cdiv data-dojo-type\x3d"jimu/dijit/CheckBox" data-dojo-attach-point\x3d"cbxCaseSensitive" label\x3d"${nls.caseSensitive}" style\x3d"display:none;"\x3e\x3c/div\x3e\r\n\t\x3c/div\x3e\r\n\t\x3cdiv data-dojo-attach-point\x3d"promptSection" class\x3d"prompt"\x3e\r\n\t\t\x3ctable data-dojo-attach-point\x3d"promptTable" cellpadding\x3d"0" cellspacing\x3d"0" class\x3d"prompt-table" style\x3d"width:100%;"\x3e\r\n\t\t\t\x3ctbody\x3e\r\n\t\t\t\t\x3ctr\x3e\r\n\t\t\t\t\t\x3ctd class\x3d"first-td"\x3e\r\n\t\t\t\t\t\t\x3cspan\x3e${nls.prompt}\x3c/span\x3e\r\n\t\t\t\t\t\x3c/td\x3e\r\n\t\t\t\t\t\x3ctd class\x3d"second-td"\x3e\r\n\t\t\t\t\t\t\x3cdiv data-dojo-attach-point\x3d"promptTB" data-dojo-type\x3d"dijit/form/ValidationTextBox" data-dojo-props\x3d"required:true,trim:true" style\x3d"width:257px;" class\x3d"dijit-form-ValidationTextBox" \x3e\x3c/div\x3e\r\n\t\t\t\t\t\x3c/td\x3e\r\n\t\t\t\t\x3c/tr\x3e\r\n\t\t\t\t\x3ctr\x3e\r\n\t\t\t\t\t\x3ctd class\x3d"first-td"\x3e\r\n\t\t\t\t\t\t\x3cspan\x3e${nls.hint}\x3c/span\x3e\r\n\t\t\t\t\t\x3c/td\x3e\r\n\t\t\t\t\t\x3ctd class\x3d"second-td"\x3e\r\n\t\t\t\t\t\t\x3cdiv data-dojo-attach-point\x3d"hintTB" data-dojo-type\x3d"dijit/form/ValidationTextBox" data-dojo-props\x3d"trim:true" style\x3d"width:257px;" class\x3d"dijit-form-ValidationTextBox" \x3e\x3c/div\x3e\r\n\t\t\t\t\t\x3c/td\x3e\r\n\t\t\t\t\x3c/tr\x3e\r\n\t\t\t\t\x3ctr data-dojo-attach-point\x3d"cascadeTr" class\x3d"cascade-tr"\x3e\r\n\t\t\t\t\t\x3ctd class\x3d"first-td" colspan\x3d"2"\x3e\r\n\t\t\t\t\t\t\x3cdiv data-dojo-attach-point\x3d"cbxCascade" data-dojo-type\x3d"jimu/dijit/CheckBox"\x3e\x3c/div\x3e\r\n\t\t\t\t\t\x3c/td\x3e\r\n\t\t\t\t\x3c/tr\x3e\r\n\t\t\t\x3c/tbody\x3e\r\n\t\t\x3c/table\x3e\r\n\t\x3c/div\x3e\r\n\x3c/div\x3e',
"url:dijit/templates/Calendar.html":'\x3cdiv class\x3d"dijitCalendarContainer dijitInline" role\x3d"presentation" aria-labelledby\x3d"${id}_mddb ${id}_year"\x3e\r\n\t\x3cdiv class\x3d"dijitReset dijitCalendarMonthContainer" role\x3d"presentation"\x3e\r\n\t\t\x3cdiv class\x3d\'dijitReset dijitCalendarArrow dijitCalendarDecrementArrow\' data-dojo-attach-point\x3d"decrementMonth"\x3e\r\n\t\t\t\x3cimg src\x3d"${_blankGif}" alt\x3d"" class\x3d"dijitCalendarIncrementControl dijitCalendarDecrease" role\x3d"presentation"/\x3e\r\n\t\t\t\x3cspan data-dojo-attach-point\x3d"decreaseArrowNode" class\x3d"dijitA11ySideArrow"\x3e-\x3c/span\x3e\r\n\t\t\x3c/div\x3e\r\n\t\t\x3cdiv class\x3d\'dijitReset dijitCalendarArrow dijitCalendarIncrementArrow\' data-dojo-attach-point\x3d"incrementMonth"\x3e\r\n\t\t\t\x3cimg src\x3d"${_blankGif}" alt\x3d"" class\x3d"dijitCalendarIncrementControl dijitCalendarIncrease" role\x3d"presentation"/\x3e\r\n\t\t\t\x3cspan data-dojo-attach-point\x3d"increaseArrowNode" class\x3d"dijitA11ySideArrow"\x3e+\x3c/span\x3e\r\n\t\t\x3c/div\x3e\r\n\t\t\x3cdiv data-dojo-attach-point\x3d"monthNode" class\x3d"dijitInline"\x3e\x3c/div\x3e\r\n\t\x3c/div\x3e\r\n\t\x3ctable cellspacing\x3d"0" cellpadding\x3d"0" role\x3d"grid" data-dojo-attach-point\x3d"gridNode"\x3e\r\n\t\t\x3cthead\x3e\r\n\t\t\t\x3ctr role\x3d"row"\x3e\r\n\t\t\t\t${!dayCellsHtml}\r\n\t\t\t\x3c/tr\x3e\r\n\t\t\x3c/thead\x3e\r\n\t\t\x3ctbody data-dojo-attach-point\x3d"dateRowsNode" data-dojo-attach-event\x3d"ondijitclick: _onDayClick" class\x3d"dijitReset dijitCalendarBodyContainer"\x3e\r\n\t\t\t\t${!dateRowsHtml}\r\n\t\t\x3c/tbody\x3e\r\n\t\x3c/table\x3e\r\n\t\x3cdiv class\x3d"dijitReset dijitCalendarYearContainer" role\x3d"presentation"\x3e\r\n\t\t\x3cdiv class\x3d"dijitCalendarYearLabel"\x3e\r\n\t\t\t\x3cspan data-dojo-attach-point\x3d"previousYearLabelNode" class\x3d"dijitInline dijitCalendarPreviousYear" role\x3d"button"\x3e\x3c/span\x3e\r\n\t\t\t\x3cspan data-dojo-attach-point\x3d"currentYearLabelNode" class\x3d"dijitInline dijitCalendarSelectedYear" role\x3d"button" id\x3d"${id}_year"\x3e\x3c/span\x3e\r\n\t\t\t\x3cspan data-dojo-attach-point\x3d"nextYearLabelNode" class\x3d"dijitInline dijitCalendarNextYear" role\x3d"button"\x3e\x3c/span\x3e\r\n\t\t\x3c/div\x3e\r\n\t\x3c/div\x3e\r\n\x3c/div\x3e\r\n',
"url:jimu/dijit/templates/_FilterSet.html":'\x3cdiv\x3e\r\n\t\x3ctable class\x3d"header-table" cellspacing\x3d"0" cellpadding\x3d"0"\x3e\r\n\t\t\x3ctbody\x3e\r\n\t\t\t\x3ctr\x3e\r\n\t\t\t\t\x3ctd\x3e\r\n\t\t\t\t\t\x3cdiv\x3e\r\n\t\t\t\t\t\t\x3cspan\x3e${nls.strMatchMsgPart1}\x3c/span\x3e\r\n\t\t\t\t\t\t\x3cselect data-dojo-attach-point\x3d"allAnySelect"\x3e\r\n\t\t\t\t\t\t\t\x3coption value\x3d"AND" selected\x3e${nls.all}\x3c/option\x3e\r\n\t\t\t\t\t\t\t\x3coption value\x3d"OR"\x3e${nls.any}\x3c/option\x3e\r\n\t\t\t\t\t\t\x3c/select\x3e\r\n\t\t\t\t\t\t\x3cspan\x3e${nls.strMatchMsgPart2}\x3c/span\x3e\r\n\t\t\t\t\t\x3c/div\x3e\r\n\t\t\t\t\x3c/td\x3e\r\n\t\t\t\t\x3ctd style\x3d"width:15px;padding-right:10px;"\x3e\r\n\t\t\t\t\t\x3cdiv data-dojo-attach-point\x3d"btnDelete" data-dojo-attach-event\x3d"onclick:_destroySelf"\r\n\t\t\t\t\t class\x3d"jimu-icon jimu-icon-delete"\x3e\x3c/div\x3e\r\n\t\t\t\t\x3c/td\x3e\r\n\t\t\t\t\x3ctd style\x3d"width:15px;padding-right:14px;"\x3e\r\n\t\t\t\t\t\x3cdiv data-dojo-attach-point\x3d"btnAdd" class\x3d"jimu-icon jimu-icon-add"\x3e\x3c/div\x3e\r\n\t\t\t\t\x3c/td\x3e\r\n\t\t\t\x3c/tr\x3e\r\n\t\t\x3c/tbody\x3e\r\n\t\x3c/table\x3e\r\n\t\x3cdiv data-dojo-attach-point\x3d"allExpsBox"\x3e\r\n\t\x3c/div\x3e\r\n\x3c/div\x3e',
"url:jimu/dijit/templates/ImageChooser.html":'\x3cdiv class\x3d"jimu-image-chooser js-fileapi-wrapper"\x3e\r\n  \x3cdiv class\x3d"hint" data-dojo-attach-point\x3d"hintText"\x3e\r\n\t\t\x3cspan class\x3d"display-text" data-dojo-attach-point\x3d"displayText"\x3e\x3c/span\x3e\r\n  \x3c/div\x3e\r\n  \x3cdiv class\x3d"hint" data-dojo-attach-point\x3d"hintImage"\x3e\r\n\t\t\x3cimg class\x3d"display-image" data-dojo-attach-point\x3d"selfImg"\x3e\r\n  \x3c/div\x3e\r\n  \x3cform data-dojo-attach-point\x3d"fileForm"\x3e\r\n    \x3clabel data-dojo-attach-point\x3d"mask"\x3e\x3c/label\x3e\r\n    \x3cinput type\x3d"file" data-dojo-attach-point\x3d"fileInput"\x3e\r\n  \x3c/form\x3e\r\n\x3c/div\x3e',
"url:jimu/dijit/templates/_CropImage.html":'\x3cdiv class\x3d"jimu-crop-image"\x3e\r\n\t\x3cdiv class\x3d"crop-section" data-dojo-attach-point\x3d"cropSection"\x3e\r\n\t\t\x3cdiv class\x3d"viewer-box hide-status" data-dojo-attach-point\x3d"viewerBox"\x3e\r\n\t\t\t\x3cdiv class\x3d"viewer-content" data-dojo-attach-point\x3d"viewerContent"\x3e\r\n\t\t\t\t\x3cimg class\x3d"viewer-image hide-status" data-dojo-attach-point\x3d"viewerImage" src\x3d""\x3e\r\n\t\t\t\x3c/div\x3e\r\n\t\t\t\x3cimg class\x3d"base-image hide-status" data-dojo-attach-point\x3d"baseImage" data-dojo-attach-event\x3d"mousedown:_onViewerMouseDown,mouseup:_onViewerMouseUp"\x3e\r\n\t\t\x3c/div\x3e\r\n\t\t\x3cimg class\x3d"loading-image" data-dojo-attach-point\x3d"loadingImg" src\x3d""\x3e\r\n\t\x3c/div\x3e\r\n\t\x3cdiv class\x3d"controller hide-status" data-dojo-attach-point\x3d"zoomController"\x3e\r\n\t\t\x3cdiv class\x3d"zoom-out" data-dojo-attach-point\x3d"zoomOutBtn" data-dojo-attach-event\x3d"click:_onZoomOutClick"\x3e-\x3c/div\x3e\r\n\t\t\x3cdiv class\x3d"slider" data-dojo-attach-point\x3d"sliderNode"\x3e\r\n\t\t\t\x3cdiv class\x3d"button" data-dojo-attach-point\x3d"sliderButton" data-dojo-attach-event\x3d"mousedown:_onSliderMouseDown,mouseup:_onSliderMouseUp"\x3e\x3c/div\x3e\r\n\t\t\t\x3cdiv class\x3d"horizontal"\x3e\x3c/div\x3e\r\n\t\t\x3c/div\x3e\r\n\t\t\x3cdiv class\x3d"zoom-in" data-dojo-attach-point\x3d"zoomInBtn" data-dojo-attach-event\x3d"click:_onZoomInClick"\x3e+\x3c/div\x3e\r\n\t\x3c/div\x3e\r\n\x3c/div\x3e\r\n',
"url:widgets/Query/setting/Setting.html":'\x3cdiv\x3e\r\n\t\x3cdiv class\x3d"add-task-tip"\x3e${nls.addTaskTip}\x3c/div\x3e\r\n\t\x3cdiv class\x3d"content"\x3e\r\n\t\t\x3cdiv class\x3d"items-list jimu-not-selectable"\x3e\r\n\t\t\t\x3cdiv class\x3d"add-btn" data-dojo-attach-event\x3d"click:_onBtnAddItemClicked"\x3e\r\n\t\t\t\t\x3cdiv class\x3d"icon"\x3e\x3c/div\x3e\r\n\t\t\t\t\x3cdiv class\x3d"tip"\x3e${nls.newQuery}\x3c/div\x3e\r\n\t\t\t\x3c/div\x3e\r\n\t\t\t\x3cdiv class\x3d"items-list-content" data-dojo-attach-point\x3d"listContent" data-dojo-attach-event\x3d"click:_onListContentClicked"\x3e\x3c/div\x3e\r\n\t\t\x3c/div\x3e\r\n\t\t\x3cdiv class\x3d"separator not-visible" data-dojo-attach-point\x3d"separator"\x3e\x3c/div\x3e\r\n\t\t\x3cdiv class\x3d"single-setting-content" data-dojo-attach-point\x3d"singleSettingContent"\x3e\r\n\t\t\t\x3cdiv class\x3d"no-query-tip" data-dojo-attach-point\x3d"noQueryTip"\x3e\x3c/div\x3e\r\n\t\t\x3c/div\x3e\r\n\t\x3c/div\x3e\r\n\t\x3cdiv data-dojo-type\x3d"jimu/dijit/CheckBox" data-dojo-attach-point\x3d"cbxHideLayersAfterWidgetClosed" data-dojo-props\x3d\'checked:true\'\x3e\x3c/div\x3e\r\n\t\x3cdiv data-dojo-attach-point\x3d"shelter" data-dojo-type\x3d"jimu/dijit/LoadingShelter" data-dojo-props\x3d\'hidden:true\'\x3e\x3c/div\x3e\r\n\x3c/div\x3e',
"url:widgets/Query/setting/css/style.css":'.jimu-widget-query-setting{width: 100%; height: 100%; font-size: 12px;}.jimu-widget-query-setting .add-task-tip{font-size: 12px;}.jimu-widget-query-setting .not-visible{display: none;}.jimu-widget-query-setting \x3e .content{position: absolute; left: 0; right: 0; top: 40px; bottom: 0;}.jimu-widget-query-setting \x3e .content \x3e div{position: absolute; top: 0; bottom: 0; height: 100%;}.jimu-widget-query-setting .items-list{left: 0; width: 300px;}.jimu-widget-query-setting \x3e .content \x3e .separator{left: 320px; width: 1px; background-color: #ccc;}.jimu-widget-query-setting .single-setting-content{right: 0; width: 625px;}.jimu-rtl .jimu-widget-query-setting .items-list{left: auto; right: 0;}.jimu-rtl .jimu-widget-query-setting \x3e .content \x3e .separator{left: auto; right: 320px;}.jimu-rtl .jimu-widget-query-setting .single-setting-content{right: auto; left: 0;}.jimu-widget-query-setting .items-list-content{position: absolute; left: 0; right: 0; top: 50px; bottom: 0; overflow: auto;}.jimu-widget-query-setting .items-list-content .item{position: relative; width: 100%; height: 40px; border-top: 1px solid #F3F3F3; cursor: pointer;}.jimu-widget-query-setting .items-list-content .item:hover{background-color: #F9F9F9;}.jimu-widget-query-setting .items-list-content .item.selected{background-color: #F3F3F3 !important; border-left: 4px solid #24B5CC;}.jimu-rtl .jimu-widget-query-setting .items-list-content .item.selected{border-left: 0; border-right: 4px solid #24B5CC;}.jimu-widget-query-setting .items-list-content .item \x3e *{cursor: pointer;}.jimu-widget-query-setting .items-list-content .item:first-child{border-top: 0;}.jimu-widget-query-setting .items-list-content .item .label{position: absolute; left: 8px; right: 8px; top: 0; bottom: 0; line-height: 40px; font-size: 12px; color: #353535;}.jimu-widget-query-setting .items-list-content .item.selected .label{font-weight: bold; color: #000;}.jimu-widget-query-setting .items-list-content .item .actions{position: relative; display: none; height: 100%; overflow: hidden; background-color: #F9F9F9;}.jimu-widget-query-setting .items-list-content .item:hover .actions{display: block;}.jimu-widget-query-setting .items-list-content .item.selected .actions{background-color: #F3F3F3 !important;}.jimu-widget-query-setting .items-list-content .item .action{width: 12px; height: 12px; background-repeat: no-repeat; background-position: center center; position: relative; top: 14px; cursor: pointer; margin: 0 5px;}.jimu-widget-query-setting .items-list-content .item .action.up{background-image: url("images/up_normal.png");}.jimu-widget-query-setting .items-list-content .item .action.up:hover{background-image: url("images/up_hover.png");}.jimu-widget-query-setting .items-list-content .item .action.down{background-image: url("images/down_normal.png");}.jimu-widget-query-setting .items-list-content .item .action.down:hover{background-image: url("images/down_hover.png");}.jimu-widget-query-setting .items-list-content .item .action.delete{background-image: url("images/delete_normal.png");}.jimu-widget-query-setting .items-list-content .item .action.delete:hover{background-image: url("images/delete_hover.png");}.jimu-widget-query-setting .items-list-content .item:first-child .action.up{display: none;}.jimu-widget-query-setting .items-list-content .item:last-child .action.down{display: none;}.jimu-widget-query-setting .add-btn{display: inline-block; width: 100%; height: 32px; background-color: #24B5CC; color: #ffffff; text-align: center; cursor: pointer;}.jimu-widget-query-setting .add-btn:hover{background-color: #0090A7;}.jimu-widget-query-setting .add-btn \x3e div{display: inline-block; cursor: pointer; height: 32px; line-height: 32px; font-size: 12px;}.jimu-widget-query-setting .add-btn .icon{position: relative; top: 1px; width: 12px; height: 12px; background: url("images/add.png") center center no-repeat; background-size: contain;}.jimu-widget-query-setting .add-btn .tip{margin-left: 8px;}.jimu-rtl .jimu-widget-query-setting .add-btn .tip{margin-left: 0; margin-right: 8px;}.jimu-widget-query-setting \x3e .content{bottom: 25px;}.jimu-widget-query-setting \x3e .jimu-checkbox{position: absolute; left: 0; right: 0; bottom: 5px;}.jimu-widget-query-setting .stress{font-size: 14px; font-weight: bold; color: #000;}.jimu-widget-query-setting .light-stress{font-family: \'Avenir Medium\'; font-size: 12px; color: #353535;}.jimu-widget-query-setting .jimu-checkbox .label.light-stress{position: relative; top: 2px;}.jimu-widget-query-setting .radio-label-container \x3e *{vertical-align: middle;}.jimu-widget-query-setting .radio-label-container input{margin-left: 2px; vertical-align: middle;}.jimu-rtl .jimu-widget-query-setting .radio-label-container input{margin-left: 0; margin-right: 2px;}.jimu-widget-query-setting .jimu-checkbox.buffer-checkbox .label{font-size: 12px; font-weight: bold;}.jimu-widget-query-setting .leading-padding20{padding-left: 20px;}.jimu-rtl .jimu-widget-query-setting .leading-padding20{padding-left: 0; padding-right: 20px;}.jimu-widget-query-setting .single-setting-content .no-query-tip{position: relative; top: 50%; margin-top: -10px;}.jimu-widget-query-setting .single-setting-content .no-query-tip span{font-weight: bold;}.jimu-widget-single-query-setting{position: relative; width: 100%; height: 100%;}.jimu-widget-single-query-setting .click-picker{display: inline-block; border: 1px solid #D7D7D7; height: 24px; overflow: hidden; padding: 0 4px; cursor: pointer;}.jimu-widget-single-query-setting .click-picker .jimu-image-chooser{position: relative; top: 4px;}.jimu-widget-single-query-setting .click-picker .separator{position: relative; top: 4px; width: 1px; height: 16px; background-color: #D7D7D7; margin: 0 5px;}.jimu-widget-single-query-setting .click-picker .jimu-icon{position: relative; top: 8px;}.jimu-widget-single-query-setting .setting-btn{width: 30px; height: 30px; border: 1px solid #D7D7D7; cursor: pointer;}.jimu-widget-single-query-setting .setting-btn .jimu-icon{position: relative; left: 7px; top: 7px;}.jimu-rtl .jimu-widget-single-query-setting .setting-btn .jimu-icon{left: auto; right: 7px;}.jimu-widget-single-query-setting table.general{width: 100%; border-collapse: collapse;}.jimu-widget-single-query-setting table.general\x3etbody\x3etr\x3etd{height: 40px;}.jimu-widget-single-query-setting table.general\x3etbody\x3etr\x3e.first-td{width: 100px;}.jimu-widget-single-query-setting table.general\x3etbody\x3etr\x3e.second-td{width: auto;}.jimu-widget-single-query-setting .detail{position: absolute; width: 100%; left: 0; right: 0; top: 55px; bottom: 0;}.jimu-widget-single-query-setting .detail .jimu-tab3{height: 100%;}.jimu-widget-single-query-setting .detail .jimu-tab3 \x3e .jimu-viewstack{position: absolute; width: 100%; left: 0; right: 0; top: 55px; bottom: 0;}.jimu-widget-single-query-setting .detail .jimu-tab3 \x3e .jimu-viewstack \x3e .view{overflow: auto;}.jimu-widget-single-query-setting .tab-item-div{height: 30px; line-height: 30px;}.jimu-widget-single-query-setting .title-sorting-table{table-layout:fixed; width:100%;}.jimu-widget-single-query-setting .spatial-filter-section{margin-top: 20px;}.jimu-widget-single-query-setting .draw-graphic-setting .search-distance-section{margin-top: 7px;}.jimu-widget-single-query-setting .create-layer-section{margin-top: 22px;}.jimu-widget-single-query-setting .cbx-at-div{margin-top: 15px;}.jimu-widget-single-query-setting .cbx-rt-div{margin-top: 15px;}.jimu-query-setting-spatialfilter-config .spatial-filter-item{margin-top: 10px;}.jimu-query-setting-spatialfilter-config .spatial-filter-item{overflow: hidden;}.jimu-query-setting-spatialfilter-config .spatial-filter-item-head{position: relative; overflow: hidden;}.jimu-query-setting-spatialfilter-config .spatial-filter-item .checkbox-container{width: 485px; float: left;}.jimu-rtl .jimu-query-setting-spatialfilter-config .spatial-filter-item .checkbox-container{float: right;}.jimu-query-setting-spatialfilter-config .spatial-filter-item .default-text{float: right; color: green; cursor: pointer; display: none;}.jimu-rtl .jimu-query-setting-spatialfilter-config .spatial-filter-item .default-text{float: left;}.jimu-query-setting-spatialfilter-config .spatial-filter-item.default .default-text{display: block; color: #9B9B9B; background-color: #F3F3F3; font-size: 12px; padding: 2px 6px;}.jimu-query-setting-spatialfilter-config .spatial-filter-item .make-default{position: absolute; right: 23px; cursor: pointer; display: none; font-size: 12px; background-color: #24B5CC; color: #ffffff; padding: 2px 6px;}.jimu-rtl .jimu-query-setting-spatialfilter-config .spatial-filter-item .make-default{right: auto; left: 23px;}.jimu-query-setting-spatialfilter-config .spatial-filter-item:hover .make-default{display: block;}.jimu-query-setting-spatialfilter-config .spatial-filter-item.default:hover .make-default{display: none;}.jimu-query-setting-spatialfilter-config .spatial-filter-item .icon-placeholder{position: relative; top: 2px; width: 13px; height: 13px; float: right; cursor: pointer; margin-left: 10px;}.jimu-rtl .jimu-query-setting-spatialfilter-config .spatial-filter-item .icon-placeholder{float: left; margin-left: 0; margin-right: 10px;}.jimu-query-setting-spatialfilter-config .spatial-filter-item .arrow-icon{background: url(images/arrow-right.png) center center no-repeat;}.jimu-rtl .jimu-query-setting-spatialfilter-config .spatial-filter-item .arrow-icon{background: url(images/arrow-left.png) center center no-repeat;}.jimu-query-setting-spatialfilter-config .spatial-filter-item .arrow-icon.opened{background-color: green; background: url(images/arrow-down.png) center center no-repeat !important;}.jimu-query-setting-spatialfilter-config .hidden-setting{display: none;}.jimu-query-setting-spatialfilter-config .draw-graphic-setting .drawing-tools-section{margin-top:10px;}.jimu-query-setting-spatialfilter-config .drawing-tools-container{margin-top:5px; overflow: hidden;}.jimu-query-setting-spatialfilter-config .drawing-tools-container .draw-item{float: left; width: 48px; height: 48px; cursor: pointer; background-repeat: no-repeat; background-position: center center; margin-left: 5px; position: relative; border: 1px solid #DBDBDB; border-radius: 1px;}.jimu-rtl .jimu-query-setting-spatialfilter-config .drawing-tools-container .draw-item{float: right; margin-left: 0; margin-right: 5px;}.jimu-query-setting-spatialfilter-config .drawing-tools-container .draw-item:first-child{margin-left: 0 !important; margin-right: 0 !important;}.jimu-query-setting-spatialfilter-config .drawing-tools-container .draw-item .draw-item-icon{position: absolute; left: 2px; top: 2px; width: 16px; height: 16px; display: none; background: url(images/checked.png) center center no-repeat; background-color: #fff;}.jimu-rtl .jimu-query-setting-spatialfilter-config .drawing-tools-container .draw-item .draw-item-icon{left: auto; right: 2px;}.jimu-query-setting-spatialfilter-config .drawing-tools-container .draw-item.selected .draw-item-icon{display: block;}.jimu-query-setting-spatialfilter-config .drawing-tools-container .draw-item.point{background-image: url(../../../../jimu.js/css/images/draw_point.png);}.jimu-query-setting-spatialfilter-config .drawing-tools-container .draw-item.line{background-image: url(../../../../jimu.js/css/images/draw_line.png);}.jimu-query-setting-spatialfilter-config .drawing-tools-container .draw-item.polyline{background-image: url(../../../../jimu.js/css/images/draw_polyline.png);}.jimu-query-setting-spatialfilter-config .drawing-tools-container .draw-item.freehand-polyline{background-image: url(../../../../jimu.js/css/images/draw_freehand_polyline.png);}.jimu-query-setting-spatialfilter-config .drawing-tools-container .draw-item.triangle{background-image: url(../../../../jimu.js/css/images/draw_triangle.png);}.jimu-query-setting-spatialfilter-config .drawing-tools-container .draw-item.extent{background-image: url(../../../../jimu.js/css/images/draw_extent.png);}.jimu-query-setting-spatialfilter-config .drawing-tools-container .draw-item.circle{background-image: url(../../../../jimu.js/css/images/draw_circle.png);}.jimu-query-setting-spatialfilter-config .drawing-tools-container .draw-item.ellipse{background-image: url(../../../../jimu.js/css/images/draw_ellipse.png);}.jimu-query-setting-spatialfilter-config .drawing-tools-container .draw-item.polygon{background-image: url(../../../../jimu.js/css/images/draw_polygon.png);}.jimu-query-setting-spatialfilter-config .drawing-tools-container .draw-item.freehand-polygon{background-image: url(../../../../jimu.js/css/images/draw_freehand_polygon.png);}.jimu-query-setting-spatialfilter-config .cbx-draw-graphic-div .jimu-checkbox .label,.jimu-query-setting-spatialfilter-config .cbx-use-features-div .jimu-checkbox .label{width: 457px;}.jimu-query-setting-spatialfilter-config .relationships-selector-div{position: relative; overflow:hidden; margin-top:5px;}.jimu-query-setting-spatialfilter-config .relationships-selector-div \x3e .dijitTextBox{position: absolute; width: auto; left: 0; right: 50px;}.jimu-rtl .jimu-query-setting-spatialfilter-config .relationships-selector-div \x3e .dijitTextBox{left: 50px; right: 0;}.jimu-query-setting-searchdistance \x3e table{table-layout: fixed; width: 100%; border-collapse: collapse;}.jimu-query-setting-popup-config .dijitTextBox .dijitInputInner{font-size: 12px !important;}.jimu-query-setting-popup-config .custom-radio-div{margin-top: 5px;}.jimu-query-setting-popup-config.portal-radio-selected .indent-tr{display: none;}.jimu-query-setting-popup-config .indent-td{padding-left: 18px;}.jimu-rtl .jimu-query-setting-popup-config .indent-td{padding-left: 0; padding-right: 18px;}.jimu-query-setting-popup-config .sort-fields-div{width: 100%; height: 30px; line-height: 30px; border: 1px solid #d2dae2; background-color: #e3ecf2; color: #7989a0; font-size: 14px;}.jimu-query-setting-popup-config .sort-fields-div span{float: left; display: inline-block; height: 30px; line-height: 30px;}.jimu-query-setting-popup-config .sort-arrow{width: 13px;}.jimu-query-setting-popup-config .sort-arrow.asc{background: center center no-repeat url(images/up_arrow.png);}.jimu-query-setting-popup-config .sort-arrow.desc{background: center center no-repeat url(images/down_arrow.png);}.jimu-query-setting-sort-fields .add-with-icon{margin-top: 4px;}.jimu-query-setting-sort-fields .sort-tip{display: inline-block;}',
"*now":function(l){l(['dojo/i18n!*preload*widgets/Query/setting/nls/Setting*["ar","cs","da","de","en","el","es","et","fi","fr","he","hr","it","ja","ko","lt","lv","nb","nl","pl","pt-br","pt-pt","ro","ru","sr","sv","th","tr","zh-cn","vi","zh-hk","zh-tw","ROOT"]'])}}});
define("dojo/on dojo/sniff dojo/query dojo/_base/declare dojo/_base/lang dojo/_base/html dojo/_base/array dijit/_WidgetsInTemplateMixin jimu/BaseWidgetSetting jimu/dijit/_QueryableLayerSourcePopup jimu/utils jimu/filterUtils ../utils ./SingleQuerySetting jimu/dijit/CheckBox jimu/dijit/TabContainer".split(" "),function(l,n,s,q,g,c,f,e,b,k,d,a,t,r){return q([b,e],{baseClass:"jimu-widget-query-setting",singleSetting:null,noQueryNls:"",postMixInProperties:function(){this.inherited(arguments);this.config&&
(this.config=t.getConfigWithValidDataSource(this.config),this._updateConfig());this.noQueryNls=this.nls.noTasksTip;var a='"${newQuery}""';0>this.noQueryNls.indexOf(a)&&(a='"${newQuery}"');this.noQueryNls=this.noQueryNls.replace(a,"\x3cspan\x3e"+this.nls.newQuery+"\x3c/span\x3e")},_updateConfig:function(){this.config&&(this.config.queries&&0<this.config.queries.length)&&f.forEach(this.config.queries,g.hitch(this,function(a){this._rebuildFilter(a.url,a.filter)}))},_rebuildFilter:function(b,c){try{if(c){delete c.expr;
var e=new a;e.isHosted=d.isHostedService(b);e.getExprByFilterObj(c)}}catch(f){console.log(f)}},postCreate:function(){this.inherited(arguments);this.noQueryTip.innerHTML=this.noQueryNls;this.cbxHideLayersAfterWidgetClosed.setLabel(this.nls.hideLayersTip);this.config&&this.setConfig(this.config);n("mac")?c.addClass(this.domNode,"mac"):c.addClass(this.domNode,"not-mac")},_onBtnAddItemClicked:function(){if(this.singleSetting)if(this.singleSetting.getConfig())this.singleSetting.destroy(),this.singleSetting=
null;else return;var a=new k({titleLabel:this.nls.setDataSource,dijitArgs:{multiple:!1,createMapResponse:this.map.webMapResponse,portalUrl:this.appConfig.portalUrl,style:{height:"100%"}}});this.own(l(a,"ok",g.hitch(this,function(b){var c=a.getSelectedRadioType();a.close();a=null;this.singleSetting&&(this.singleSetting.destroy(),this.singleSetting=null);var d=this._createTarget();this._createSingleSetting(d,null);this.singleSetting.setNewLayerDefinition(b,c,b.name||"")})));this.own(l(a,"cancel",g.hitch(this,
function(){a.close();a=null})));a.startup()},_createSingleSetting:function(a){s(".item",this.listContent).removeClass("selected");this.singleSetting&&this.singleSetting.destroy();this.singleSetting=null;this.singleSetting=new r({map:this.map,nls:this.nls,target:a,_layerDefinition:a._layerDefinition,appConfig:this.appConfig,folderUrl:this.folderUrl});this.singleSetting.placeAt(this.singleSettingContent);this.own(l(this.singleSetting,"loading",g.hitch(this,function(){this.shelter.show()})));this.own(l(this.singleSetting,
"unloading",g.hitch(this,function(){this.shelter.hide()})));this.own(l(this.singleSetting,"before-destroy",g.hitch(this,function(){c.addClass(this.separator,"not-visible")})));c.addClass(a,"selected");a.singleConfig&&this.singleSetting.setConfig(a.singleConfig);c.removeClass(this.separator,"not-visible");c.addClass(this.noQueryTip,"not-visible")},_createTarget:function(a){a=a||"";return c.create("div",{"class":"item",innerHTML:'\x3cdiv class\x3d"label jimu-ellipsis" title\x3d"'+a+'"\x3e'+a+'\x3c/div\x3e\x3cdiv class\x3d"actions jimu-float-trailing"\x3e\x3cdiv class\x3d"delete action jimu-float-trailing"\x3e\x3c/div\x3e\x3cdiv class\x3d"down action jimu-float-trailing"\x3e\x3c/div\x3e\x3cdiv class\x3d"up action jimu-float-trailing"\x3e\x3c/div\x3e\x3c/div\x3e'},
this.listContent)},_onListContentClicked:function(a){a=a.target||a.srcElement;var b=d.getAncestorDom(a,function(a){return c.hasClass(a,"item")},3);b&&(c.hasClass(a,"action")?c.hasClass(a,"up")?b.previousElementSibling&&c.place(b,b.previousElementSibling,"before"):c.hasClass(a,"down")?b.nextElementSibling&&c.place(b,b.nextElementSibling,"after"):c.hasClass(a,"delete")&&(this.singleSetting&&this.singleSetting.target===b&&(this.singleSetting.destroy(),this.singleSetting=null),c.destroy(b),a=s(".item",
this.listContent),0<a.length&&this._createSingleSetting(a[0]),this._updateNoQueryTip()):this.singleSetting?this.singleSetting.target!==b&&this.singleSetting.getConfig()&&(this.singleSetting.destroy(),this.singleSetting=null,this._createSingleSetting(b)):this._createSingleSetting(b))},_updateNoQueryTip:function(){0<s(".item",this.listContent).length?c.addClass(this.noQueryTip,"not-visible"):c.removeClass(this.noQueryTip,"not-visible")},setConfig:function(a){this.cbxHideLayersAfterWidgetClosed.setValue(a.hideLayersAfterWidgetClosed);
var b=null;f.forEach(a.queries,g.hitch(this,function(a,c){var d=this._createTarget(a.name);d.singleConfig=a;0===c&&(b=d)}));b&&this._createSingleSetting(b);this._updateNoQueryTip()},getConfig:function(){if(this.singleSetting&&!this.singleSetting.getConfig())return!1;var a=s(".item",this.listContent),b={hideLayersAfterWidgetClosed:this.cbxHideLayersAfterWidgetClosed.getValue(),queries:[]};b.queries=f.map(a,g.hitch(this,function(a){return a.singleConfig}));return b},destroy:function(){this.singleSetting&&
this.singleSetting.destroy();this.singleSetting=null;this.inherited(arguments)}})});